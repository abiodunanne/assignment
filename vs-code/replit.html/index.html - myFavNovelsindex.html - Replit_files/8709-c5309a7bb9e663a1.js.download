!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="7df406aa-884a-4f5e-b3cb-d93099f40a95",e._sentryDebugIdIdentifier="sentry-dbid-7df406aa-884a-4f5e-b3cb-d93099f40a95")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"2f8d6ed5"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8709,351],{72129:function(e,n,t){t.d(n,{v:function(){return g}});var r=t(32477),i=t(92920),o=t(45903),a=t(93295),u=t(23982),l=t(66039);function c(){var e=(0,a._)(['\n  query ChatEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-chat-engine")\n      hasOverride: gate(feature: "flag-ghostwriter-chat-engine-override")\n    }\n  }\n']);return c=function(){return e},e}var s={},f=(0,u.Ps)(c()),d=t(45434),p=t(1228),h=t(38382),v=t(44124);function g(){var e,n,t,a=(0,i.Z)().preferences,u=(e=(0,o._)({},s,void 0),l.a(f,e)).data,c=(0,r._)((0,v.Ni)(),1)[0],g=(0,h.ll)(),m=null==u?void 0:null===(n=u.currentUser)||void 0===n?void 0:n.hasOverride,y=null==a?void 0:a.chatEngine,b=null==u?void 0:null===(t=u.currentUser)||void 0===t?void 0:t.defaultEngine;return m&&y&&(0,d.uL)(y)?y:(0,d.uL)(b)?"advanced"===c&&g?d.hf.model:b:p.Fp}},51944:function(e,n,t){t.d(n,{Q:function(){return i},h:function(){return o}});var r=t(84357),i=r.Py.define(),o=r.Py.define()},38003:function(e,n,t){t.d(n,{X:function(){return nd}});var r,i=t(39698),o=t(45903),a=t(8182),u=t(74652),l=t(26508),c=t(93918),s=t(8279),f=t(29287),d=t(37951),p=t(56596),h=t(43429),v=t(50199),g=t(7444),m=t(88936),y=t(93496),b=t(34142),w=t(32477),x=t(87682),S=t(90234),k=t(92153),E=t(10981),T=t(21289);function C(e){return e.map(function(e){return"group"===e.data.type?e.data.key:e.data.key||e.data.label}).join(":")}function R(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,u=e.slice(n)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;"group"!==l.data.type&&t.push(l.data.label)}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return(0,T._)(new Set(t))}function Z(e,n){for(var t=e.indexPath,r=n.indexPath,i=Math.min(t.length,r.length),o=0;o<i;o++){if(t[o]>r[o])return 1;if(t[o]<r[o])return -1}return t.length-r.length}var D=t(71999),P=t(66368),_=t(28999),I=(0,h.createContext)(void 0);function A(){var e=(0,h.useContext)(I);if(!e)throw Error("Expected store in context");return e}function L(e){var n=A();return(0,D.Dv)(e,{store:n})}function N(e){return(0,_.lV)((0,h.useCallback)(function(n){return n(e)},[e]),{store:A()})}var O=function(e){var n=A();return(0,D.b9)(e,{store:n})};function M(e){return(0,P.b)(e,A())}var B=t(15859),G=function(e){return"item-"+e},F=(0,S.cn)(0),q=(0,S.cn)(0),z=(0,S.cn)(0),U=(0,S.cn)(function(e){return e(F)+e(q)+e(z)}),W=(0,S.cn)({path:[],rows:[],items:[],placeholder:"",isLoading:!1}),H=(0,S.cn)(!0),X=(0,S.cn)(!1),V=(0,S.cn)(null),j=(0,S.cn)({}),K=(0,B.kv)(j,function(e){return!!e.openOnInput}),J=(0,B.kv)(j,function(e){return!!e.autoFocus}),Y=(0,B.kv)(j,function(e){return e.keyboardShortcut}),Q=(0,B.kv)(j,function(e){return e.command}),$=(0,B.kv)(j,function(e){return e.overscan}),ee=(0,B.kv)(j,function(e){return e.footer}),en=(0,B.kv)(j,function(e){return e.focusRef}),et=(0,B.kv)(j,function(e){var n;return null!==(n=e.fontSize)&&void 0!==n?n:14}),er=(0,B.kv)(j,function(e){return!!e.compact}),ei=(0,B.kv)(j,function(e){var n;return null!==(n=e.minItemHeight)&&void 0!==n?n:32}),eo=(0,S.cn)(function(e){return!e(K)}),ea=(0,B.kv)(j,function(e){return!!e.iconBreadcrumbs}),eu=(0,S.cn)(null),el=(0,S.cn)(function(e){return e(eh)>-1}),ec=(0,S.cn)(function(e){var n=e(W);return!n.isLoading&&0===n.rows.length}),es=(0,S.cn)({label:"",input:"",menu:""}),ef=(0,S.cn)(""),ed=(0,S.cn)(""),ep=(0,S.cn)(""),eh=(0,S.cn)(-1),ev=(0,S.cn)(function(e){var n=e(eh);return e(eg).findIndex(function(e){return"item"===e.type&&e.index===n})}),eg=(0,S.cn)(function(e){return e(W).rows}),em=(0,S.cn)(function(e){return e(W).items}),ey=(0,S.cn)(function(e){return e(em).length}),eb=(0,S.cn)(function(e){return e(eZ).filter(function(e){return"context"===e.data.type&&!!e.match})}),ew=(0,S.cn)(function(e){return e(eb).length>0}),ex=(0,S.cn)(!1),eS=(0,S.cn)(null,function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(ex,!0),n(W,function(e){return(0,k.ZP)(e,function(e){e.path=[e.path[0]]})}),e(eF).setPath(e(eZ)),n(eh,-1),n(ef,""),n(ed,""),n(ep,""),e(K)&&n(H,!1),r.focus&&(null===(t=e(eO))||void 0===t||t.focus())}),ek=(0,S.cn)(function(e){return e(W).placeholder}),eE=(0,S.cn)(function(e){return e(W).isLoading}),eT=(0,S.cn)(function(e){return e(W).path.length}),eC=(0,S.cn)(function(e){return e(ew)||!!e(ef)}),eR=(0,S.cn)(null,(r=(0,b._)(function(e,n,t,r){var i,o,a,u,l,c;function s(t){var r;n(eA,null!=t?t:"Something went wrong"),null===(r=e(eO))||void 0===r||r.focus()}return(0,x.Jh)(this,function(f){switch(f.label){case 0:if("group"===t.data.type)return[2];if(n(eu,t),o=e(j),"context"===t.data.type)return n(eN,u=t.path),n(eh,-1),e(eF).setPath(u),null===(a=e(eO))||void 0===a||a.focus(),[2];switch(t.data.type){case"output":case"error":return n(eS),null===(l=o.onSelect)||void 0===l||l.call(o,t),[2]}n(X,!0),c=null,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.resolve(t.data.run(r.nativeEvent))];case 2:return c=f.sent(),[3,4];case 3:return f.sent(),n(X,!1),s(),[2];case 4:if(n(X,!1),(null==c?void 0:c.type)==="error")return s(c.message),[2];return n(eS),null===(i=o.onAction)||void 0===i||i.call(o),[2]}})}),function(e,n,t,i){return r.apply(this,arguments)})),eZ=(0,S.cn)(function(e){return e(W).path}),eD=(0,S.cn)(function(e){return 1===e(eZ).length}),eP=(0,S.cn)(null,function(e,n,t){var r=e(eZ),i=r.indexOf(t);-1!==i&&(r=r.slice(0,i+1),n(eh,0),e(eF).setPath(r),n(ef,""))});function e_(e,n){return n.match.score-e.match.score}var eI=(0,S.cn)(null,function(e,n,t){var r,i=e(ep);if(i===e(ep)){var o=t.items.sort(e_),a=t.path.length?t.path[t.path.length-1]:null,u=function(e,n){var t=new Map;e.forEach(function(e){var n=e.path.slice(0,-1),r="section:"+C(n),i=t.get(r);if(i)i.items.push(e);else{var o=n[n.length-1],a=(null==o?void 0:o.data.type)==="group";t.set(r,{type:"section",path:n,score:e.match.score,items:[e],unlabeled:a,key:r})}});var r=(0,T._)(t.entries()).sort(function(e,t){var r=(0,w._)(e,2),i=r[0],o=r[1],a=(0,w._)(t,2),u=a[0],l=a[1];if(!n||!n.includes(i)&&!n.includes(u))return l.score-o.score;var c=n.indexOf(i),s=n.indexOf(u);return c>-1&&s>-1?c-s:-1===c?1:-1}),i={items:[],rows:[]},o=0;return r.forEach(function(e){var n=(0,w._)(e,2),t=n[0],r=n[1];i.rows.push({type:r.type,key:t,path:r.path,unlabeled:r.unlabeled}),r.items.forEach(function(e){i.items.push(e),i.rows.push({type:"item",item:e,index:o++})})}),i}(o,i?e(W).rows.filter(function(e){return"section"===e.type}).map(function(e){return e.key}):void 0),l=u.items,c=u.rows,s=null!==(r=null==a?void 0:a.data)&&void 0!==r?r:null,f=null==s?void 0:s.description;e(ea)&&(null==s?void 0:s.type)!=="group"&&(f=null==s?void 0:s.label),n(W,function(e){return{items:l,rows:c,isLoading:!!t.partial,path:t.path,placeholder:f||e.placeholder}})}}),eA=(0,S.cn)(null,function(e,n,t){n(V,t),n(W,function(e){return{items:[],rows:[],isLoading:!1,path:e.path,placeholder:e.placeholder}})}),eL=(0,S.cn)(null,function(e,n,t){n(ef,t),n(eh,t?0:-1),n(V,null),n(W,function(e){return(0,k.ZP)(e,function(e){e.isLoading=!!t})}),e(K)&&n(H,!!t)}),eN=(0,S.cn)(null,function(e,n,t){n(W,function(e){return(0,k.ZP)(e,function(e){e.items=[],e.rows=[],e.path=t})}),n(eL,""),n(ed,""),n(ep,"")}),eO=(0,S.cn)(null),eM=(0,S.cn)(null,function(e,n,t){var r=e(eh);if(!(r<0)){var i=e(em)[r];i&&n(eR,i,t)}}),eB=(0,S.cn)(null,function(e,n,t){var r=e(H),i=e(ey),o=e(eh);switch(t.key){case"ArrowDown":t.preventDefault();var a=o+1;n(eh,a<i?a:0),n(H,!0);return;case"ArrowUp":t.preventDefault(),n(eh,Math.max(-1,o-1));return;case"Home":t.preventDefault(),t.shiftKey?t.currentTarget.selectionStart=0:t.currentTarget.setSelectionRange(0,0);return;case"End":t.preventDefault();var u=t.currentTarget.value.length;t.shiftKey?t.currentTarget.selectionEnd=u:t.currentTarget.setSelectionRange(u,u);return;case"Escape":if(!e(ef)||(t.preventDefault(),n(eL,""),n(ed,""),e(eo)))return;n(H,!1);return;case"Enter":if(!r)return;t.preventDefault(),n(eM,t);return;case"PageUp":case"PageDown":if(!r)return;t.preventDefault();var l="PageUp"===t.key?-10:10;n(eh,function(e){return Math.max(Math.min(e+l,i-1),0)});return}}),eG=(0,S.cn)(null,function(e,n,t){var r=Array.isArray(t)?t:[t];e(ex)&&(r=[r[0]]);var i=e(ed);n(ep,i),e(eF).setPath(r,i)}),eF=(0,S.cn)({}),eq=(0,S.cn)(null,function(e,n){var t=e(eZ),r=e(eb);if(r.pop()){var i=r.pop();if(!i){n(eS);return}var o=t.indexOf(i);t=t.slice(0,o+1),n(eh,0),n(eN,t),e(eF).setPath(t)}}),ez=t(9331),eU=t(1643),eW=(0,c.X)({root:[f.l0.reset.button,f.l0.viewStyle,f.l0.flex.row,f.l0.align.center,f.l0.borderRadius(0),f.l0.cursor.pointer,f.l0.color.foregroundDimmer,{gap:(0,eU.fP)(4),paddingLeft:(0,eU.fP)(4),paddingRight:(0,eU.fP)(4),"&:hover":{color:f.TV.foregroundDefault}}],icon:[f.l0.position.relative,(0,eU.D$)(16),{width:(0,eU.fP)(16),height:(0,eU.fP)(16)}],iconRight:[(0,eU.D$)(12),{width:(0,eU.fP)(12),height:(0,eU.fP)(12)}],text:[f.l0.truncate,f.l0.flex.shrink(1),{fontSize:"1em"}]}),eH=(0,h.memo)(function(){var e={iconOnly:L(ea),breadcrumbs:L(eb),onClick:O(eP)},n=e.breadcrumbs,t=e.iconOnly,r=e.onClick;return n.length?(0,a.tZ)(a.HY,{children:n.map(function(e,n){if(!e.data||!("label"in e.data))return null;var i=e.data,o=i.label,u=i.icon;return(0,a.BX)("button",{css:eW.root,onClick:function(){return r(e)},children:[(0,a.tZ)(p.G,{css:eW.icon,children:u}),t?null:(0,a.tZ)(p.G,{css:eW.text,children:o}),(0,a.tZ)(p.G,{css:eW.iconRight,children:(0,a.tZ)(ez.Z,{})})]},o+n)})}):null}),eX=t(51384),eV=t(58719),ej=(0,eX.iv)([f.l0.reset.button,f.l0.viewStyle,f.l0.center,f.l0.height("100%"),f.l0.cursor.pointer,f.l0.color.foregroundDimmest,{paddingLeft:(0,eU.fP)(4),paddingRight:(0,eU.fP)(4),"&:hover":{color:f.TV.foregroundDefault}},(0,eU.D$)(16)]);function eK(e){return(0,a.tZ)("button",{css:ej,onClick:e.onClick,title:e.isLoading?"Loading":"Clear",children:e.isLoading?(0,a.tZ)(m.Z,{}):(0,a.tZ)(eV.Z,{})})}var eJ=t(25e3),eY=t(47357),eQ=t(38080),e$=t(69119),e0=function(e){return Math.round(e.value/14*e.fontSize)},e1=[f.l0.position.absolute,f.l0.top(0),f.l0.left(0),f.l0.width("100%")],e2=(0,c.X)({item:[e1,{userSelect:"none",cursor:"pointer","&:hover > div":{backgroundColor:"var(".concat(y.dj.interactiveBackground,")")}}],divider:[e1,f.l0.justify.center,{padding:"0 ".concat((0,eU.fP)(8))}]}),e4=(0,h.memo)(function(e){var n,t,r,i,u,l,c,s,f=(n=e.index,t=O(eR),r=(0,h.useRef)(null),u="item"===(i=L((0,h.useMemo)(function(){return(0,B.kv)(eg,function(e){return e[n]})},[n]))).type?i.index:null,l=L((0,h.useMemo)(function(){return(0,S.cn)(function(e){return null!==u&&e(eh)===u})},[u])),c=(null==i?void 0:i.type)==="item"?function(e){return t(i.item,e)}:void 0,s="item"===i.type?{id:G(n),role:"option","aria-selected":l}:void 0,{row:i,active:l,ref:r,onClick:c,ariaAttrs:s}),d=f.row,v=f.active,g=f.onClick,m=f.ariaAttrs,y=f.ref;if(!d)return null;var b={height:e.height,transform:"translateY(".concat(e.y,"px)")};if("section"===d.type)return(0,a.tZ)(e7,{path:d.path,style:b,border:e.index>0});var w=d.item,x=w.data,k=w.match;if("group"===x.type)return null;var E=k.render;if(E&&"content"in E&&E.content)return(0,a.tZ)(p.G,(0,eJ._)((0,o._)({innerRef:y,css:e2.item,style:b,onClick:g},m),{children:(0,a.tZ)(eQ.Tg,{elevated:v,children:(0,h.cloneElement)(E.content,{active:v})})}));var T=x.label,C=x.icon,R=x.dataCy,Z=E&&"ranges"in E?E.ranges:void 0;return(0,a.tZ)(p.G,(0,eJ._)((0,o._)({innerRef:y,css:e2.item,style:b,onClick:g,dataCy:R},m),{children:(0,a.tZ)(e8,{active:v,icon:C,text:T,highlight:Z,description:x.description,shortcut:x.keyboardShortcut,hasChildren:"context"===w.data.type})}))}),e3=[{padding:(0,eU.fP)(8)}],e9=(0,c.X)({root:[e3,f.l0.align.center,f.l0.flex.row,f.l0.height("100%"),{gap:(0,eU.fP)(8),userSelect:"none"}],iconText:[f.l0.align.center,f.l0.flex.row,f.l0.maxWidth("100%"),{gap:(0,eU.fP)(8)}],description:[f.l0.truncate,f.l0.flex.growAndShrink(1),{fontSize:"0.9em"}],right:[f.l0.flex.row,f.l0.align.center,{gap:(0,eU.fP)(4),justifySelf:"end",marginLeft:"auto"}],shortcut:[{"& > div > div":{fontSize:"0.8em",paddingLeft:(0,eU.fP)(4),paddingRight:(0,eU.fP)(4),paddingTop:(0,eU.fP)(2),paddingBottom:(0,eU.fP)(2)}}],chevron:(0,eU.D$)(12)});function e8(e){return(0,a.BX)(eQ.Tg,{elevated:e.active,css:e9.root,children:[(0,a.BX)(p.G,{css:e9.iconText,children:[(0,a.tZ)(p.G,{className:"icon",css:e5.root,children:e.icon}),(0,a.tZ)(e$.x,{dimmed:!e.active,text:e.text,highlight:e.highlight})]}),e.description?(0,a.tZ)(p.G,{css:e9.description,style:{color:e.active?f.TV.foregroundDimmer:f.TV.foregroundDimmest},children:e.description}):null,(0,a.BX)(p.G,{css:e9.right,children:[e.shortcut?(0,a.tZ)(p.G,{css:e9.shortcut,children:(0,a.tZ)(u.bM,{keyCombo:e.shortcut,small:!0})}):null,e.hasChildren?(0,a.tZ)(p.G,{css:e9.chevron,children:(0,a.tZ)(ez.Z,{size:12})}):null]})]})}var e5=(0,c.X)({root:[f.l0.position.relative,(0,eU.D$)(16),{width:(0,eU.fP)(16),height:(0,eU.fP)(16)}]}),e6=(0,c.X)({borderHeaderWrap:[{userSelect:"none",padding:[8,8,4,8].map(eU.fP).join(" ")},e1,f.l0.colWithGap(0),f.l0.justify.spaceBetween],borderWrap:[{userSelect:"none",paddingLeft:(0,eU.fP)(8),paddingRight:(0,eU.fP)(8)},e1,f.l0.justify.center],headerWrap:[{userSelect:"none",paddingLeft:(0,eU.fP)(8),paddingRight:(0,eU.fP)(8),paddingBottom:(0,eU.fP)(4)},e1,f.l0.justify.end],header:[{userSelect:"none"},f.l0.align.center,f.l0.flex.row,{gap:(0,eU.fP)(4)},(0,eU.D$)(12)],text:[{userSelect:"none"},f.l0.flex.shrink(1),f.l0.color.foregroundDimmest,f.l0.truncate,{fontSize:"0.9em"}],border:[f.l0.height(1),f.l0.width("100%")]}),e7=(0,h.memo)(function(e){var n=L(eT),t=R(e.path,n),r=(0,a.tZ)(eQ.Tg,{elevated:!0,css:e6.border}),i=0===t.length;if(e.border&&i)return(0,a.tZ)(p.G,{css:e6.borderWrap,style:e.style,children:r});var o=(0,a.tZ)(p.G,{css:e6.header,children:t.map(function(e,n){return(0,a.BX)(h.Fragment,{children:[n>0?(0,a.tZ)(ez.Z,{color:f.TV.foregroundDimmest}):null,(0,a.tZ)(p.G,{css:e6.text,children:e})]},e+n)})});return e.border||i?(0,a.BX)(p.G,{css:e6.borderHeaderWrap,style:e.style,children:[r,o]}):(0,a.tZ)(p.G,{css:e6.headerWrap,style:e.style,children:o})}),ne=(0,c.X)({root:[f.l0.flex.growAndShrink(1),f.l0.overflow("hidden"),{paddingTop:eU.Cn.menuPaddingTop}],scrollParent:[f.l0.height("100%"),f.l0.overflowY("auto"),f.l0.flex.growAndShrink(1)]}),nn=(0,h.memo)(function(e){var n,t,r,i,u=(n=L(eg),t=L(H),{rows:n,isOpen:t,scrollRef:(0,h.useRef)(null),currentPathIndex:L(eT),ariaAttrs:{id:(r=L(es)).menu,"aria-labelledby":r.label,role:"listbox"}}),l=u.rows,c=u.isOpen,s=u.scrollRef,d=u.currentPathIndex,v=u.ariaAttrs,g=O(q),m=L(et),y=L(er),b=(0,eY.MG)({count:l.length,overscan:null!==(i=e.overscan)&&void 0!==i?i:1,getScrollElement:function(){return s.current},getItemKey:function(e){var n=l[e];return n?"section"===n.type?n.key:C(n.item.path):""},estimateSize:function(n){var t=l[n];return t?function(e){var n,t=e.row,r=e.currentPathIndex,i=e.compact,o=e.isFirst,a=e.fontSize,u=e.minItemHeight;if("section"===t.type){var l=R(t.path,r).length?24:0;if(o){var c=i?l+e0({fontSize:a,value:6}):l;return 0===l?c:e0({fontSize:a,value:l})}return l+e0({fontSize:a,value:16})}var s=t.item.match.render;return s&&"content"in s?Math.max(e0({fontSize:a,value:null!==(n=s.height)&&void 0!==n?n:32}),u):Math.max(e0({fontSize:a,value:32}),u)}({fontSize:m,row:t,currentPathIndex:d,compact:y,isFirst:0===n,minItemHeight:e.minItemHeight}):0},onChange:function(e){g(e.getTotalSize())}}),w={borderRadius:e.hasFooter?void 0:f.TV.space8,display:c?void 0:"none"},x=b.scrollToIndex,S=b.getVirtualItems,k=L(ev);return(0,h.useEffect)(function(){var e=k;!(e<0)&&(1===e&&(e=0),S()[e]&&x(e,{behavior:"smooth"}))},[x,S,k]),(0,a.tZ)(p.G,(0,eJ._)((0,o._)({css:ne.root},v),{style:w,children:(0,a.tZ)(p.G,{innerRef:s,css:ne.scrollParent,children:(0,a.tZ)(p.G,{style:{height:"".concat(b.getTotalSize(),"px"),position:"relative",overflow:"hidden"},children:c?b.getVirtualItems().map(function(e){return(0,a.tZ)(e4,{index:e.index,height:e.size,y:e.start},e.key)}):null})})}))}),nt=(0,c.X)({root:[f.l0.flex.shrink(1),f.l0.height("100%"),{fontSize:eU.Cn.fontSize}],footer:{paddingTop:(0,eU.fP)(8)},keyComboBlocks:{paddingRight:(0,eU.fP)(8)},menuWrap:[f.l0.flex.shrink(1)],row:[f.l0.position.absolute,f.l0.top(0),f.l0.left(0),f.l0.width("100%")],menu:[f.l0.flex.shrink(1),f.l0.overflow("auto")],running:[f.l0.center,f.l0.flex.growAndShrink(1)],error:{padding:(0,eU.fP)(8)}}),nr=(0,c.X)({root:[f.l0.viewStyle,f.l0.flex.growAndShrink(1),f.l0.height("100%"),{fontSize:"1em",padding:"0 ".concat((0,eU.fP)(8)),backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:f.TV.foregroundDimmest},"&:hover::placeholder":{color:f.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:f.TV.foregroundDimmest}}]}),ni=(0,h.memo)(function(e){var n,t,r,i,u,l,c,s,f,d,p,v,g,m=(n=O(eO),t=L(ek),s=(c=(0,w._)((r=L(ef),i=O(eL),u=O(ed),l=(0,w._)((0,h.useTransition)(),2)[1],[r,(0,h.useCallback)(function(e){var n="string"==typeof e?e:e.currentTarget.value;i(n),l(function(){return u(n)})},[i,l,u])]),2))[0],f=c[1],d=O(eh),p=L(eh),v=L(es),g=L(H),{onBlur:function(){return d(-1)},onChange:f,placeholder:t,value:s,ref:n,disabled:L(X),ariaAttrs:{id:v.input,role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-activedescendant":p>-1?G(p):"","aria-controls":v.menu,"aria-expanded":g,"aria-labelledby":v.label}});return(0,a.tZ)("input",(0,o._)({autoFocus:e.autoFocus,onKeyDown:e.onKeyDown,css:nr.root,placeholder:m.placeholder,value:m.value,onChange:m.onChange,ref:m.ref,onBlur:m.onBlur,disabled:m.disabled,autoComplete:"off"},m.ariaAttrs))}),no=[y.gU.filled,f.l0.viewStyle,f.l0.flex.row,f.l0.align.center,f.l0.flex.growAndShrink(1),{height:(0,eU.fP)(32),borderRadius:(0,eU.fP)(4)}],na=(0,c.X)({container:[{padding:(0,eU.fP)(8),"& > div > button + input":{paddingLeft:0}},f.l0.pb(0)],surface:no,surfaceRunning:[no,s.p.foregroundPulse()]}),nu=[y.gU.nofill,f.l0.flex.row,f.l0.align.center,f.l0.flex.growAndShrink(1),{height:(0,eU.fP)(36),borderRadius:(0,eU.fP)(8),borderBottomLeftRadius:0,borderBottomRightRadius:0}],nl=(0,c.X)({container:[{"& > div > button + input":{paddingLeft:0}},f.l0.pb(0)],surface:nu,surfaceRunning:[nu,s.p.foregroundPulse()],border:[f.l0.height(1)]});function nc(e){var n=L(X),t=O(F),r=(0,l.Z)(function(e){return t(e.height)}),i=L(er),o=i?nl:na;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(p.G,{css:o.container,innerRef:r,children:(0,a.tZ)(p.G,{css:n?o.surfaceRunning:o.surface,children:e.children})}),i?(0,a.tZ)(eQ.Tg,{elevated:!0,css:nl.border}):null]})}var ns=(0,h.memo)(function(e){var n=L(eC),t=L(eE);return n?(0,a.tZ)(eK,{onClick:e.onClick,isLoading:t}):null}),nf=(0,h.memo)(function(){var e,n,t,r,o,c,s,y,b,w,x,S,k,E,T,C,R,Z,D,P,_,I,A,B=(r=L(H),o=L(eC),c=L(ef),s=L(ec),y=L(X),b=L(V),w=O(eB),x=L(el),S=O(eS),k=N(eO),E=L(eF),T=L(Q),C=M(eD),R=M(ed),Z=O(ep),D=O(eG),P=(0,g.Z)(T),(0,h.useEffect)(function(){C.current&&D(T)},[E,C,T,R,D]),(0,h.useEffect)(function(){return C.subscribe(function(e){e&&D(P.current)})},[E,R,C,D,P]),(0,h.useEffect)(function(){var e=function(e){Z(e),E.search(e)};return e(R.current),R.subscribe(e)},[E,R,C,Z,P]),_=(0,v.Z)(function(){return function(){var e;return null===(e=k())||void 0===e?void 0:e.focus()}},[k]),I=O(eq),{focus:_,onKeyDown:(0,v.Z)(function(){return function(e){if("Backspace"===e.key&&!e.currentTarget.value){I();return}return w(e)}},[w,I]),inputValue:c,isOpen:r,isClearable:o,noResults:s,hasHighlightedItem:x,isRunning:y,actionError:b,clearCommands:S}),G=B.isOpen,q=B.focus,W=B.clearCommands,K=B.isClearable,eo=B.onKeyDown,ea=B.inputValue,eu=B.noResults,eh=B.hasHighlightedItem,ev=B.isRunning,eg=B.actionError,em=(0,g.Z)({inputValue:ea,noResults:eu,hasHighlightedItem:eh});e=N(j),n=L(F),t=M(U),(0,h.useEffect)(function(){var r=function(n){var t=e().onTotalHeightChange;t&&(0===i&&(i=n),t({initial:i,current:n}))};if(0!==n){var i=0;return r(t.current),t.subscribe(r)}},[n,e,t]);var ey=L(J),eb=L(Y),ew=L($),ex=L(ee),ek=L(en),eE=L(ei),eT=N(j),eR=(0,v.Z)(function(){return function(e){var n,t=em.current,r=eT();if(null===(n=r.onKeyDown)||void 0===n||n.call(r,e,{inputValue:t.inputValue,noResults:t.noResults,hasHighlightedItem:t.hasHighlightedItem}),!e.defaultPrevented){if("Enter"===e.key&&t.inputValue&&t.noResults&&r.onSubmit){r.onSubmit(t.inputValue);return}eo(e)}}},[em,eo,eT]);(0,h.useEffect)(function(){ek&&(ek.current=q)},[q,ek]);var eZ=L(es),eP=O(z),e_=(0,l.Z)(function(e){return eP(e.height)}),eI=L(et),eA=L(er);return(0,a.BX)(p.G,{css:nt.root,style:(A={},(0,i._)(A,eU.Dq.fontSize,eI+"px"),(0,i._)(A,eU.Dq.menuPaddingTop,eA?"0px":(0,eU.fP)(8)),A),children:[(0,a.tZ)("label",{id:eZ.label,htmlFor:eZ.input,css:f.l0.visuallyHidden,children:"Commands"}),(0,a.BX)(nc,{children:[(0,a.tZ)(eH,{}),(0,a.tZ)(ni,{autoFocus:ey,onKeyDown:eR}),(0,a.tZ)(ns,{onClick:function(){return W({focus:!0})}}),eb&&!K?(0,a.tZ)(p.G,{css:nt.keyComboBlocks,children:(0,a.tZ)(u.bM,{keyCombo:eb,small:!0})}):null]}),eg?(0,a.tZ)(p.G,{css:nt.error,children:(0,a.tZ)(d.E,{colorway:"warning",text:eg})}):null,G&&!ev?(0,a.BX)(a.HY,{children:[(0,a.tZ)(nn,{minItemHeight:eE,overscan:ew,hasFooter:!!ex}),ex?(0,a.tZ)(p.G,{innerRef:e_,css:nt.footer,children:ex}):null]}):null,ev?(0,a.tZ)(p.G,{css:nt.running,children:(0,a.tZ)(m.Z,{size:24})}):null]})});function nd(e){var n,t,r,i=(t={label:(n=(0,E.U)())("label"),input:n("input"),menu:n("menu")},r=(0,w._)((0,h.useState)(function(){var n,r,i=(0,S.MT)();i.set(es,t),i.set(j,e),i.set(H,!e.openOnInput),i.set(eF,function(e){var n=e.initialPath,t=e.partialUpdateTimeout,r=e.onUpdate,i=n,o=null,a=0;function u(e){o&&clearTimeout(o);var n=++a,u=0,l=[],c=i[i.length-1];if(!c.commands){r({items:l,path:i});return}void 0!==t&&(o=setTimeout(function(){l.length&&r({items:(0,T._)(l).sort(Z),partial:!0,path:i})},t)),function t(c,s,f){if(u++,!c.commands)throw Error("Expected commands");var d=(0,T._)(s).concat([c]),p=d.length===i.length;Promise.resolve(c.commands({active:p,search:e,path:d})).then(function(c){if(n!==a){o&&clearTimeout(o);return}u--,c.forEach(function(n,r){var i=(0,T._)(d).concat([n]),o=(0,T._)(f).concat([r]),a=n.match?n.match({search:e,data:n.data,path:i,active:p}):null;a&&l.push({path:i,data:n.data,match:a,indexPath:o}),n.commands&&t(n,d,o)}),u>0||(o&&clearTimeout(o),r({items:(0,T._)(l).sort(Z),path:i}))})}(c,i.slice(0,i.length-1),[])}return{search:u,setPath:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i=e,u(n)},getPath:function(){return i}}}({initialPath:Array.isArray(e.command)?e.command:[e.command],partialUpdateTimeout:30,onUpdate:function(e){return i.set(eI,e)}}));var o=Array.isArray(e.command)?e.command[0]:e.command,a=null!==(r=null==o?void 0:null===(n=o.data)||void 0===n?void 0:n.description)&&void 0!==r?r:null;return a&&i.set(W,function(e){return(0,k.ZP)(e,function(e){e.placeholder=a})}),i}),1)[0],(0,h.useEffect)(function(){r.set(j,e)},[r,e]),r);return(0,a.tZ)(I.Provider,{value:i,children:(0,a.tZ)(nf,{})})}},1643:function(e,n,t){t.d(n,{Cn:function(){return o},D$:function(){return l},Dq:function(){return i},fP:function(){return u}});var r=(0,t(91608).$)(["fontSize","menuPaddingTop"]),i=r.cssVars,o=r.styleTokens,a=function(e){return Math.round(100*e)/100},u=function(e){return a(e/14)+"em"},l=function(e){var n=a(e/14)+"em";return{"&& svg":{minWidth:n,minHeight:n,width:n,height:n}}}},53430:function(e,n,t){t.d(n,{Z:function(){return b}});var r=t(8182);t(43429);var i=t(72769),o=t(82751),a=t(83311),u=t(42802),l=t(6989),c=t(43586),s=Array.prototype.concat,f=function(e){return{recursive:!!e.recursive,bail:e.bail&&e.bail>0?e.bail:1e3}},d=function(e){return s.apply([],e)},p=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;if(!e||t>=n.bail||!e.isDirectory||!e.createReader)return Promise.resolve([]);var i=null!=r?r:e.name;return new Promise(function(r){e.createReader().readEntries(function(e){return Promise.all(e.map(function(e){var r,o,a,u;return r=e,o=n,a=t,u=i,r.isDirectory?o.recursive?p(r,o,a+1,(0,c.join)(u,r.name)):Promise.resolve([]):new Promise(function(e,n){r.file?r.file(e,n):e(null)}).catch(function(){return null}).then(function(e){return e&&(e.dirPath=(0,c.join)(u,e.name)),e?[e]:[]})})).then(function(e){return r(d(e))})},function(){return r([])})})},h=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p("function"==typeof e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry?e.webkitGetAsEntry():null,f(n))},v=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=f(n),new Promise(function(t){var r,i;(null==e?void 0:null===(r=e.dataTransfer)||void 0===r?void 0:r.items)?Promise.all(d(e.dataTransfer.items).filter(function(e){return"file"===e.kind}).map(function(e){return h(e,n).then(function(n){if(!n.length){var t=e.getAsFile();n=t?[t]:n}return n})})).then(function(e){return t(d(e))}):(null==e?void 0:null===(i=e.dataTransfer)||void 0===i?void 0:i.files)?t(d(e.dataTransfer.files)):t([])})},g=t(18059),m=null,y=null;function b(e){var n=function(e){var n=e.isTouchBackend;if(y&&n)return y;if(m&&!n)return m;var t={dragDropManager:(0,i.i)(function(e){var t=n?(0,u.zr)(e,void 0,{delayTouchStart:500}):(0,o.PD)(e),r=t.handleTopDropCapture;return t.handleTopDropCapture=function(e){var n,i=t.monitor.getItemType();i===a.HTML||i===a.TEXT?(t.dropTargetIds=[],null===(n=t.currentNativeSource)||void 0===n||n.loadDataTransfer(e.dataTransfer),t.enterLeaveCounter.reset()):r.call(t,e),t.currentNativeSource&&(t.currentNativeSource.item.dirContent=v(e,{recursive:!0}))},t})};return n?y=t:m=t,t}({isTouchBackend:(0,g.w8)()});return(0,r.tZ)(l.L.Provider,{value:n,children:e.children})}},69119:function(e,n,t){t.d(n,{x:function(){return c}});var r=t(8182),i=t(51384),o=t(29287),a=t(56596),u=(0,i.iv)([o.l0.flex.shrink(1),o.l0.truncate]),l={normal:{matched:o.TV.foregroundDefault,unmatched:o.TV.foregroundDimmer},dimmed:{matched:o.TV.foregroundDimmer,unmatched:o.TV.foregroundDimmest}};function c(e){var n,t,i,c,s=null===(c=e.highlight)||void 0===c?void 0:c.filter(function(e){return e.to>0}),f=e.dimmed?l.dimmed:l.normal;return(null==s?void 0:s.length)?(0,r.tZ)(a.G,{className:e.className,css:u,children:(n=e.text,t=0,i=[],s.forEach(function(e){var r=e.from,o=e.to,a=n.slice(t,r);a&&i.push({text:a,match:!1});var u=n.slice(r,o);u&&i.push({text:u,match:!0}),t=o}),t<n.length&&i.push({text:n.slice(t),match:!1}),i).map(function(e,n){return(0,r.tZ)("span",{style:{fontWeight:e.match?o.TV.fontWeightBold:o.TV.fontWeightRegular,color:e.match?f.matched:f.unmatched},children:e.text},e.text+n)})}):(0,r.tZ)(a.G,{className:e.className,style:{color:f.matched},css:u,children:e.text})}},43481:function(e,n,t){var r=t(8182);t(43429);var i=t(71144),o=t(49344),a=t(28121);n.Z=function(e){var n=e.isOpen,t=e.setOpen,u=e.feature;return(0,r.tZ)(r.HY,{children:(0,r.tZ)(i.b5,{children:(0,r.tZ)(o.u,{isOpen:n,onRequestClose:function(){t(!1)},children:(0,r.tZ)(a.Z,{setFeedbackFormOpen:t,feature:u})})})})}},45726:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(32477),i=t(8182),o=t(43429),a=t(1498),u=t(18836),l=t(56596),c=t(74833),s=t(29287);function f(e){var n=e.prompt,t=e.desc,f=e.type,d=e.placeholder,p=e.confirmText,h=e.loading,v=e.errorMessage,g=e.onCancel,m=e.onConfirm,y=e.isDanger,b=e.buttonIcon,w=(0,r._)(o.useState(),2),x=w[0],S=w[1];return(0,i.BX)(l.G,{css:[s.l0.colWithGap(24)],children:[(0,i.tZ)(c.h4,{variant:"headerDefault",level:2,children:n}),(0,i.tZ)(c.xv,{children:t}),(0,i.tZ)(u.II,{type:f,value:x,placeholder:d,autoFocus:!0,onChange:function(e){return S(e.target.value)}}),v?(0,i.tZ)(c.xv,{css:[s.l0.color.accentNegativeStronger],multiline:!1,children:v}):null,(0,i.BX)(l.G,{css:[s.l0.rowWithGap(12),s.l0.justify.end],children:[(0,i.tZ)(a.zx,{disabled:h,onClick:g,text:"Cancel"}),(0,i.tZ)(a.zx,{colorway:y?"negative":"primary",disabled:h,onClick:function(){return x&&m(x)},text:p||"Ok",iconLeft:b,dataCy:"prompt-confirm-button"})]})]})}},73097:function(e,n,t){t.d(n,{K:function(){return o}});var r=t(43429),i=t(23814);function o(e){(0,r.useEffect)(function(){e((0,i.r)(),{captureDraggingState:!0})},[e])}},62624:function(e,n,t){function r(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function i(){return!!/iPad|iPhone|iPod/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)}t.d(n,{Z:function(){return r},y:function(){return i}})},23394:function(e,n,t){t.d(n,{T:function(){return a},Z:function(){return o}});var r=t(43429),i=t(22894);function o(){var e=r.useContext(i.Z);if(!e)throw Error("Expected Repl info to be in context");return e.language}function a(){return o().startsWith("html")}},37491:function(e,n,t){t.d(n,{UV:function(){return o},fN:function(){return i}});var r=t(21289);function i(e,n){for(var t=0;t<n.length;t+=1e4)e.push.apply(e,(0,r._)(n.slice(t,t+1e4)))}function o(e){return(0,r._)(Array(e))}},10704:function(e,n,t){t.d(n,{V:function(){return f},Q:function(){return m}});var r=t(45903),i=t(19949),o=t(23026),a=.5*(Math.sqrt(3)-1),u=(3-Math.sqrt(3))/6,l=new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),c=new(function(){"use strict";function e(){var n,t,r,i,a,u,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random;(0,o._)(this,e);var c="function"==typeof l?l:(t=0,r=0,i=0,a=1,t=(n=4022871197,u=function(e){e=e.toString();for(var t=0;t<e.length;t++){var r=.02519603282416938*(n+=e.charCodeAt(t));n=r>>>0,r-=n,r*=n,n=r>>>0,r-=n,n+=4294967296*r}return(n>>>0)*23283064365386963e-26})(" "),r=u(" "),i=u(" "),(t-=u(l))<0&&(t+=1),(r-=u(l))<0&&(r+=1),(i-=u(l))<0&&(i+=1),function(){var e=2091639*t+23283064365386963e-26*a;return t=r,r=i,i=e-(a=0|e)});this.p=function(e){for(var n=new Uint8Array(256),t=0;t<256;t++)n[t]=t;for(var r=0;r<255;r++){var i=r+~~(e()*(256-r)),o=n[r];n[r]=n[i],n[i]=o}return n}(c),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var s=0;s<512;s++)this.perm[s]=this.p[255&s],this.permMod12[s]=this.perm[s]%12}return e.prototype.noise2D=function(e,n){var t,r,i=this.permMod12,o=this.perm,c=0,s=0,f=0,d=(e+n)*a,p=Math.floor(e+d),h=Math.floor(n+d),v=(p+h)*u,g=e-(p-v),m=n-(h-v);g>m?(t=1,r=0):(t=0,r=1);var y=g-t+u,b=m-r+u,w=g-1+2*u,x=m-1+2*u,S=255&p,k=255&h,E=.5-g*g-m*m;if(E>=0){var T=3*i[S+o[k]];E*=E,c=E*E*(l[T]*g+l[T+1]*m)}var C=.5-y*y-b*b;if(C>=0){var R=3*i[S+t+o[k+r]];C*=C,s=C*C*(l[R]*y+l[R+1]*b)}var Z=.5-w*w-x*x;if(Z>=0){var D=3*i[S+1+o[k+1]];Z*=Z,f=Z*Z*(l[D]*w+l[D+1]*x)}return 70*(c+s+f)},e}()),s=t(33212);function f(e){var n=!1,t=0,r=0,i=null,o=function(u){if(n){var l=u-t;r+=l,t=u,i=window.requestAnimationFrame(o),e({elapsedTime:r,deltaTime:l,stop:a})}},a=function(){n&&(n=!1,i&&window.cancelAnimationFrame(i))};return{start:function(){n||(r=0,t=performance.now(),n=!0,i=window.requestAnimationFrame(o))},stop:a}}var d=function(){return(0,i.hd)(600,1200)},p=function(){return(0,i.hd)(1,3)},h=function(){return{width:(0,i.hd)(5,20),height:(0,i.hd)(5,20)}},v=function(){return(0,i.vF)()};function g(e){return Array.isArray(e)?(0,i.DQ)(e):e instanceof Function?e():e}function m(){var e=!1,n=null,t=null,o=[],a=null,u={},l=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0)!function(){var e=i.value;if(!u[e]){var n=new Image;n.src=e,n.onerror=function(){s.error('Failed to load particle image "'.concat(e,'"'))},u[e]=n}}()}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}};return{getIsInstalled:function(){return e},addParticles:function(e){for(var n=e.x,t=e.y,c=e.numParticles,s=e.spread,f=e.heading,m=e.airDrag,y=void 0===m?.9:m,b=e.color,w=void 0===b?v:b,x=e.gravity,S=void 0===x?800:x,k=e.velocity,E=void 0===k?d:k,T=e.size,C=void 0===T?h:T,R=e.lifetime,Z=void 0===R?p:R,D=e.flip,P=void 0===D||D,_=e.image,I=void 0===_?void 0:_,A=g(void 0===s?60:s),L=g(void 0===f?90:f),N=(0,i.Id)(A),O=(0,i.Id)(-L),M=g(void 0===c?150:c),B=0;B<M;B++){var G=O+(0,i.hd)(-N/2,N/2),F=g(E),q=g(C),z=q.width,U=q.height,W=g(Z),H=g(w),X=g(y),V=g(n),j=g(t),K=g(I);"string"==typeof K&&(u[K]||l([K]),K=u[K]),o.push((0,r._)({seed:(0,i.hd)(0,1e5),x:V,y:j,gravity:S,airDrag:X,scaleX:1,scaleY:1,rotation:(0,i.hd)(0,(0,i.Id)(360)),velocityX:Math.cos(G)*F,velocityY:Math.sin(G)*F,angularVelocity:(0,i.hd)((0,i.Id)(-400),(0,i.Id)(400)),color:H,alpha:1,width:z,height:U,flip:P,lifetime:W,lifetimeRemaining:W},K?{image:K,type:"image"}:{type:(0,i.DQ)(["rectangle","ellipse"])}))}null==a||a.start()},clearParticles:function(){o=[]},uninstall:function(){var r;e&&(n&&(null===(r=document.body)||void 0===r?void 0:r.contains(n))&&document.body.removeChild(n),a&&a.stop(),n=null,t=null,e=!1,u={})},install:function(){var r;!e&&document&&document.body&&((r=document.createElement("canvas")).style.position="fixed",r.style.top="0px",r.style.left="0px",r.style.pointerEvents="none",r.style.zIndex="999999",r.width=document.documentElement.clientWidth,r.height=document.documentElement.clientHeight,r.id="replit-particles-simulation",r.setAttribute("role","image"),r.ariaHidden="true",(t=(n=r).getContext("2d"))&&(document.body.appendChild(n),a=f(function(e){var r=e.deltaTime,a=e.stop;if(n&&t){var u=t,l=window.scrollX,s=window.scrollY;n.width!==document.documentElement.clientWidth&&(n.width=document.documentElement.clientWidth),n.height!==document.documentElement.clientHeight&&(n.height=document.documentElement.clientHeight),t.clearRect(0,0,n.width,n.height),o.map(function(e){var n,t,o,a,u,l;return t=(n={particle:e,deltaTime:r}).particle,o=n.deltaTime,t.velocityY+=t.gravity*o/1e3,t.x+=t.velocityX*o/1e3,t.y+=t.velocityY*o/1e3,t.rotation+=t.angularVelocity*o/1e3,t.velocityX*=t.airDrag,t.velocityY*=t.airDrag,t.flip&&(t.scaleY=2*(0,i.WE)(t.lifetimeRemaining,.5)),a=(0,i.NC)(t.velocityX,t.velocityY),u=(0,i.$G)(t.velocityX,t.velocityY),l=a+.05*c.noise2D(t.seed,t.lifetimeRemaining),void(t.velocityX=Math.cos(l)*u,t.velocityY=Math.sin(l)*u,t.lifetimeRemaining-=o/1e3,t.lifetimeRemaining<=0?t.alpha=0:t.alpha=1-(t.lifetime-t.lifetimeRemaining)/t.lifetime)}),o.map(function(e){var n,t,r,i,o,a,c,f,d;return t=(n={particle:e,ctx:u,scrollX:l,scrollY:s}).particle,r=n.ctx,i=n.scrollX,o=n.scrollY,a=t.width*t.scaleX,c=t.height*t.scaleY,f=t.x-i,d=t.y-o,void(r.save(),r.translate(f,d),r.rotate(t.rotation),r.globalAlpha=t.alpha,"image"===t.type?r.drawImage(t.image,-a/2,-c/2,a,c):"rectangle"===t.type?(r.fillStyle=t.color,r.fillRect(-a/2,-c/2,a,c)):"ellipse"===t.type&&(r.fillStyle=t.color,r.beginPath(),r.ellipse(0,0,a/2,c/2,0,0,2*Math.PI),r.fill()),r.restore())}),0===(o=o.filter(function(e){return e.lifetimeRemaining>0})).length&&a()}}),e=!0))},preloadImages:l,unloadImages:function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;delete u[a]}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}}}},90351:function(e,n,t){t.d(n,{$0:function(){return r.$},hd:function(){return i.hd},su:function(){return r.s}});var r=t(97047),i=t(19949)},97047:function(e,n,t){t.d(n,{$:function(){return d},s:function(){return i}});var r,i,o=t(45903),a=t(70322),u=t(43429),l=t(19949),c=t(10704),s=t(48796),f=(0,c.Q)();function d(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preloadImages,n=(0,s.T)();u.useEffect(function(){return f.install(),function(){f.uninstall()}},[]),u.useEffect(function(){e&&f.preloadImages(e)},[e]);var t=function(e){n||f.addParticles(e)},r=function(e){n||f.addParticles((0,o._)({numParticles:125,spread:360,velocity:function(){return(0,l.hd)(400,900)},size:function(){return{width:(0,l.hd)(5,15),height:(0,l.hd)(5,25)}}},e))};return{fireBurst:t,fireBurstFrom:function(e){var r=e.element,i=(0,a._)(e,["element"]);if(!n){var u=(0,l.tj)(r),c=u.x,s=u.y;t((0,o._)({x:c,y:s},i))}},fireCircularBurst:r,fireCircularBurstFrom:function(e){var t=e.element,i=(0,a._)(e,["element"]);if(!n){var u=(0,l.tj)(t),c=u.x,s=u.y;r((0,o._)({x:c,y:s},i))}},fireDirectionalBurst:function(e){var t=e.direction,r=(0,a._)(e,["direction"]);n||f.addParticles((0,o._)({heading:t},r))},fireDirectionalBurstFrom:function(e){var t=e.element,r=e.direction,i=(0,a._)(e,["element","direction"]);if(!n){var u=(0,l.tj)(t),c=u.x,s=u.y;f.addParticles((0,o._)({x:c,y:s,numParticles:100,velocity:function(){return(0,l.hd)(400,1500)},spread:60,size:function(){return{width:(0,l.hd)(5,15),height:(0,l.hd)(5,25)}},heading:r},i))}}}}(r=i||(i={}))[r.East=0]="East",r[r.NorthEast=45]="NorthEast",r[r.North=90]="North",r[r.NorthWest=135]="NorthWest",r[r.West=180]="West",r[r.SouthWest=225]="SouthWest",r[r.South=270]="South"},19949:function(e,n,t){t.d(n,{$G:function(){return f},DQ:function(){return a},Id:function(){return c},NC:function(){return s},WE:function(){return d},hd:function(){return u},tj:function(){return o},vF:function(){return l}});var r=t(6686),i=t.n(r);function o(e){var n,t={x:(n=e.getBoundingClientRect()).left+n.width/2,y:n.top+n.height/2};return{x:t.x+window.scrollX,y:t.y+window.scrollY}}function a(e){var n;return e[n=e.length-1,i()(0,n,!1)]}function u(e,n){return i()(e,n,!0)}function l(){return"hsl(".concat(i()(0,360,!1),", 100%, 70%)")}function c(e){return e*Math.PI/180}function s(e,n){return Math.atan2(n,e)}function f(e,n){return Math.sqrt(Math.pow(e,2)+Math.pow(n,2))}function d(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs((e%(n=2*t)+n)%n-t)}},1228:function(e,n,t){t.d(n,{Fp:function(){return r},Fv:function(){return a},HH:function(){return o},hI:function(){return i}});var r="gpt-3.5-turbo-0613",i=["package.json","package-lock.json","yarn.lock","poetry.lock","package.json","package-lock.json",".replit","replit.nix","pyproject.toml",".breakpoints"],o=[".md",".yml",".yaml",".json",".toml",".out",".pkl",".bin",".txt",".csv",".log",".zip",".tar",".gz"],a=["node_modules",".config","venv",".next",".git"]},62582:function(e,n){n.Z={sandbox:"allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-modals allow-downloads allow-downloads-without-user-activation allow-presentation allow-orientation-lock allow-scripts",allow:"accelerometer; ambient-light-sensor; autoplay; battery; camera; display-capture; encrypted-media; execution-while-not-rendered; execution-while-out-of-viewport; fullscreen; gamepad; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; navigation-override; oversized-images; payment; picture-in-picture; publickey-credentials; speaker-selection; sync-xhr; unoptimized-images; unsized-media; usb; screen-wake-lock; web-share; xr-spatial-tracking; clipboard-read; clipboard-write",allowFullScreen:!0,allowtransparency:"true",allowpaymentrequest:"true"}},27592:function(e,n,t){t.d(n,{j:function(){return r}});function r(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.root,i=t.rootMargin,o=t.threshold;if("undefined"==typeof IntersectionObserver)return function(){};var a=new WeakMap,u=new IntersectionObserver(function(e){e.forEach(function(e){var t=a.get(e.target);if(!!t!==e.isIntersecting){if(e.isIntersecting){var r=n(e);"function"==typeof r?a.set(e.target,r):u.unobserve(e.target)}else t&&(t(e),a.delete(e.target))}})},{root:r,rootMargin:i,threshold:void 0===o?1:o});return u.observe(e),function(){return u.disconnect()}}},31950:function(e,n,t){t.d(n,{j:function(){return a}});var r=t(43429),i=t(44166),o=t(7444);function a(e,n,t){var a=(0,o.Z)(t);(0,r.useLayoutEffect)(function(){var t=function(n){var t=a.current?a.current(n):n;null!==t&&(0,i.A)(e,t)};return t(n.current),(0,i.p)(e),n.subscribe(t)},[e,n,a])}},44166:function(e,n,t){t.d(n,{A:function(){return u},p:function(){return l}});var r=t(23026),i=t(32477),o=new(function(){"use strict";function e(){(0,r._)(this,e),this.map=new Map}var n=e.prototype;return n.getOrInit=function(e){var n=this.map.get(e);return n||(n=new Map,this.map.set(e,n)),n},n.add=function(e,n,t){this.getOrInit(e).set(n,t)},n.flush=function(){var e=!0,n=!1,t=void 0;try{for(var r,o=this.map[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=(0,i._)(r.value,2),u=a[0],l=a[1];if(u&&"current"in u&&(u=u.current),u){var c=!0,s=!1,f=void 0;try{for(var d,p=l[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var h=(0,i._)(d.value,2),v=h[0],g=h[1];u.style.setProperty(v,g)}}catch(e){s=!0,f=e}finally{try{c||null==p.return||p.return()}finally{if(s)throw f}}}}}catch(e){n=!0,t=e}finally{try{e||null==o.return||o.return()}finally{if(n)throw t}}this.map.clear()},n.flushNode=function(e){if(e){var n=e,t=this.map.get(n);if(t&&(e&&"current"in e&&(e=e.current),e)){var r=!0,o=!1,a=void 0;try{for(var u,l=t[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var c=(0,i._)(u.value,2),s=c[0],f=c[1];e.style.setProperty(s,f)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}this.map.delete(n)}}},e}()),a=!1;function u(e,n,t){if(null!==e){if("string"==typeof n){if(void 0===t)throw Error("value is undefined when prop is string");o.add(e,n,t)}else for(var r in n)o.add(e,r,n[r]);a||(a=!0,requestAnimationFrame(function(){o.flush(),a=!1}))}}function l(e){o.flushNode(e)}},917:function(e,n,t){var r,i;t.d(n,{y:function(){return r}}),(i=r||(r={})).Welcome="Welcome",i.Editor="Editor",i.Examples="Examples",i.Run="Run",i.Output="Output",i.Sidepane="Sidepane",i.Share="Share"},41792:function(e,n,t){t.d(n,{D:function(){return i},V:function(){return a}});var r,i,o=t(29559);function a(e){return(0,o.gK)(e)?"Markdown":(0,o.sL)(e)?"Draw":(0,o.IQ)(e)?"Pedit":(0,o.T3)(e)?"Media":"Code"}(r=i||(i={})).Media="Media",r.Code="Code",r.Markdown="Markdown",r.Draw="Draw",r.Pedit="Pedit"},3630:function(e,n,t){t.d(n,{J:function(){return m}});var r=t(45903),i=t(25e3),o=t(70322),a=t(8182),u=t(51384),l=t(48796),c=t(93918),s=t(93496),f=t(8279),d=t(29287),p=t(30983),h=t(56596),v=(0,u.F4)("from{opacity:0}to{opacity:1}"),g=(0,c.X)({self:[d.l0.flex.row,d.l0.flex.growAndShrink(1),d.l0.height(d.TV.space12),d.l0.borderRadius(16),d.l0.position.relative,s.gU.filledAndOutlined],progressWrapper:[d.l0.flex.row,d.l0.flex.growAndShrink(1),d.l0.height("100%"),d.l0.width("100%"),d.l0.borderRadius(16),d.l0.overflow("clip"),d.l0.position.relative],progress:[d.l0.position.relative,d.l0.width("100%"),d.l0.height("100%"),{top:0,left:0}],loading:f.p.backgroundPulse(),smoke:[d.l0.width("100%"),d.l0.height("500%"),d.l0.position.absolute,d.l0.left("50%"),d.l0.top("100%"),{opacity:.4,transition:"1s opacity",transform:"translate(-50%, -100%)",pointerEvents:"none"}],fadeInAnim:{animation:"".concat(v," 120ms forwards ease-out alternate")}});function m(e){var n,t=e.total,c=e.tooltip,s=e.className,f=e.disabled,d=void 0!==f&&f,v=e.smoke,m=void 0!==v&&v,b=e.loading,w=void 0!==b&&b,x=e.tooltipHidden,S=(0,o._)(e,["total","tooltip","className","disabled","smoke","loading","tooltipHidden"]),k=!(0,l.T)(),E=null;return c?E=c:"current"in S?E="".concat(S.current||"0","/").concat(t):"data"in S&&(E=null===(n=S.data)||void 0===n?void 0:n.map(function(e){var n=e.current;return"".concat(n||"0","/").concat(t)}).join(" | ")),(0,a.tZ)(p.u,{placement:"top",tooltip:E,maxWidth:280,isDisabled:w||void 0!==x&&x,children:function(e,n){var o,l;return w?o=null:"current"in S&&S.current?o=(0,a.tZ)(y,{total:t,disabled:d,current:S.current,color:S.color}):"data"in S&&(o=null===(l=S.data)||void 0===l?void 0:l.map(function(e,n){var o;return(0,u.az)(y,(0,i._)((0,r._)({},e),{key:"measure-bar-".concat(n),total:t,disabled:d,isLast:n+1===(null===(o=S.data)||void 0===o?void 0:o.length)}))})),(0,u.az)(h.G,(0,i._)((0,r._)({},e),{css:[g.self,g.fadeInAnim,w&&g.loading],className:s,innerRef:n,onClick:void 0,key:w?"loadingMeasureBar":"finishedLoadingMeasureBar",role:"group",children:[(0,a.tZ)(h.G,{css:g.progressWrapper,children:o},"measureBarProgress"),k?(0,a.tZ)("img",{src:"/public/images/smoke.gif",alt:"",style:{opacity:m?void 0:0},css:g.smoke},"measureBarSmoke"):null]}))}})}function y(e){var n=e.current,t=e.total,i=e.color,o=void 0===i?d.TV.accentPrimaryDefault:i,u=e.disabled,l=e.isLast,c=(0,r._)({backgroundColor:void 0!==u&&u?d.TV.outlineDefault:o,width:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===n||0===e?0:Math.max(0,Math.min(100,e/n*100))}(n,t)+"%"},void 0!==l&&l?{borderTopRightRadius:d.TV.borderRadiusRound,borderBottomRightRadius:d.TV.borderRadiusRound}:{});return(0,a.tZ)(h.G,{css:g.progress,style:c,role:"meter","aria-label":"".concat(n," out of ").concat(t),"aria-valuemin":0,"aria-valuenow":n,"aria-valuemax":t})}},37770:function(e,n,t){t.d(n,{T:function(){return s}});var r=t(45903),i=t(25e3),o=t(70322),a=t(8182);t(43429);var u=t(56596),l=t(23291),c=u.K.button;function s(e){var n=e.iconLeft,t=e.iconRight,u=e.text,s=e.innerRef,f=e.colorway,d=(0,o._)(e,["iconLeft","iconRight","text","innerRef","colorway"]);return(0,a.BX)(c,(0,i._)((0,r._)({ref:s},d),{css:[(0,l.E)({colorway:f,clickable:!0,variant:"filled",iconLeft:!!n,iconRight:!!t}),{color:"inherit"}],children:[n,(0,a.tZ)("span",{children:u}),t]}))}},75296:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(39698),i=t(45903),o=t(25e3),a=t(8182),u=t(79378),l=t(56596),c=t(29287),s=t(30983),f=t(93918),d=(0,t(91608).$)(["size","fontSize","listGap","iconTextGap","avatarOverlap","tooltipFontSize"]),p=d.styleTokens,h=d.cssVars,v=(0,f.X)({avatarsRow:[c.l0.flex.row,{"& > *":{marginLeft:"calc(-0.4 * ".concat(p.size,")")},"& > *:first-child":{marginLeft:0}}],countCirlce:[c.l0.center,c.l0.overflow("hidden"),c.l0.backgroundColor.backgroundDefault,c.l0.color.foregroundDimmer,c.l0.px(2),{borderRadius:"50%",minWidth:p.size,height:p.size,fontSize:p.fontSize}],tooltop:[{gap:p.listGap,gridTemplateColumns:"repeat(auto-fill, 200px)"}],tooltipRow:[c.l0.rowWithGap(c.TV.space2),c.l0.align.center],tooltipText:[c.l0.flex.growAndShrink(1),c.l0.truncate,c.l0.color.foregroundDimmer,{paddingLeft:p.iconTextGap,fontSize:p.tooltipFontSize}],stackItem:[]}),g={12:{fontSize:8,listGap:2,iconTextGap:2,tooltipAvatarSize:12,tooltipFontSize:8},16:{fontSize:10,listGap:2,iconTextGap:2,tooltipAvatarSize:16,tooltipFontSize:10},24:{fontSize:12,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:12},32:{fontSize:14,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:14},40:{fontSize:16,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14},48:{fontSize:24,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14}};function m(e){var n,t,c,f,d,p,m,y,b,w=e.activeUsers,x=e.visibleNumOfUsers,S=void 0===x?3:x,k=e.size,E=void 0===k?24:k,T=w.length,C=(b={},(0,r._)(b,h.size,E+"px"),(0,r._)(b,h.fontSize,(null!==(d=null===(n=g[E])||void 0===n?void 0:n.fontSize)&&void 0!==d?d:E)+"px"),(0,r._)(b,h.listGap,(null!==(p=null===(t=g[E])||void 0===t?void 0:t.listGap)&&void 0!==p?p:8)+"px"),(0,r._)(b,h.iconTextGap,(null!==(m=null===(c=g[E])||void 0===c?void 0:c.iconTextGap)&&void 0!==m?m:8)+"px"),(0,r._)(b,h.tooltipFontSize,(null!==(y=null===(f=g[E])||void 0===f?void 0:f.tooltipFontSize)&&void 0!==y?y:14)+"px"),b),R=T>S,Z=w.slice(0,R?S-1:S);return(0,a.tZ)(s.u,{tooltip:(0,a.tZ)(l.G,{css:v.tooltop,style:C,children:w.map(function(e){var n;return(0,a.BX)(l.G,{css:v.tooltipRow,children:[(0,a.tZ)(u.q,{size:(null===(n=g[E])||void 0===n?void 0:n.tooltipAvatarSize)||E,src:e.image||null,ringColor:e.color,username:e.username},e.id),(0,a.tZ)(l.G,{css:v.tooltipText,children:e.username})]},e.username)})}),children:function(e,n){return(0,a.BX)(l.G,(0,o._)((0,i._)({},e),{tag:"ul",innerRef:n,css:v.avatarsRow,style:C,children:[Z.map(function(e,n){return(0,a.tZ)(l.G,{tag:"li",style:{zIndex:n+1},css:v.stackItem,children:(0,a.tZ)(u.q,{size:E,src:e.image||null,ringColor:e.color,username:e.username})},e.id)}),R?(0,a.tZ)(l.G,{tag:"li",css:v.stackItem,style:{zIndex:Z.length},children:(0,a.tZ)(l.G,{css:v.countCirlce,children:(0,a.BX)(l.G,{children:["+",T-S+1]})})}):null]}))}})}},17867:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(32477),i=t(43429);function o(e){var n=(0,r._)((0,i.useState)(e.getConnectionState()),2),t=n[0],o=n[1];return(0,i.useEffect)(function(){return e.onConnectionStateChanged(o)},[e]),t}},86612:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(32477),i=t(43429),o=t(17867);function a(e){var n=(0,o.Z)(e),t=(0,r._)((0,i.useState)(null),2),a=t[0],u=t[1];return(0,i.useEffect)(function(){var n=e.getDotdevUrl();n&&u(n)},[e,n]),a}},63092:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(59173),i=t(34142),o=t(45903),a=t(25e3),u=t(32477),l=t(21289),c=t(87682),s=t(58962),f=t(83493),d=t(91039),p=t(20298),h=t(88422).lW;function v(e){var n=e.container,t=e.beforeRun,v=(0,r.u)(null);return{mainClient:v,connect:function(){return new Promise(function(e){v.current||n.openChannel({service:"debugger"},function(n){return v.current=function(e){var n,t=e.channel,v=e.beforeRun,g=(0,r.u)("terminated"),m=(0,r.u)([]),y=(0,r.u)([]),b=(0,r.u)(new Map),w=(0,r.u)(null),x=(0,f.ZP)(),S=function(e,n){var t=new Map,r=new Map,a=new Map;function l(){return(l=(0,i._)(function(n){var i,l,s,f,d,p,h;return(0,c.Jh)(this,function(v){switch(v.label){case 0:i=!0,l=!1,s=void 0,v.label=1;case 1:v.trys.push([1,6,7,8]),f=function(){var t,i,l,s,f,d,h,v,g,m,y,b,w,x,S,k,E,T,C,R,Z,D,P,_,I,A,L,N,O,M,B,G,F,q,z;return(0,c.Jh)(this,function(U){switch(U.label){case 0:if(i=(t=(0,u._)(p.value,2))[0],l=t[1],void 0!==n&&n!==i)return[2,"continue"];return[4,e({command:"setBreakpoints",arguments:{source:{name:i,path:i},breakpoints:l.map(function(e){return{line:e.line,logMessage:e.logMessage||void 0}})}})];case 1:if(!(s=U.sent()).success)return[2,"continue"];f=!0,d=!1,h=void 0;try{for(v=r[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){y=(m=(0,u._)(g.value,2))[0],b=m[1],(null===(w=b.source)||void 0===w?void 0:w.name)===i&&r.delete(y),x=!0,S=!1,k=void 0;try{for(E=a[Symbol.iterator]();!(x=(T=E.next()).done);x=!0)R=(C=(0,u._)(T.value,2))[0],C[1]===y&&a.delete(R)}catch(e){S=!0,k=e}finally{try{x||null==E.return||E.return()}finally{if(S)throw k}}}}catch(e){d=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(d)throw h}}Z=s,D=!0,P=!1,_=void 0;try{for(I=Z.body.breakpoints[Symbol.iterator]();!(D=(A=I.next()).done);D=!0)L=A.value,null!=L.id&&r.set(L.id,(0,o._)({source:{name:i,path:i}},L))}catch(e){P=!0,_=e}finally{try{D||null==I.return||I.return()}finally{if(P)throw _}}N=!0,O=!1,M=void 0;try{for(B=(function(e,n){var t;return(0,c.Jh)(this,function(r){switch(r.label){case 0:if(e.length!==n.length)return[2];t=0,r.label=1;case 1:if(!(t<e.length))return[3,4];return[4,[e[t],n[t]]];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})(l,Z.body.breakpoints)[Symbol.iterator]();!(N=(G=B.next()).done);N=!0)q=(F=(0,u._)(G.value,2))[0],z=F[1],q.breakpointId&&null!=z.id&&a.set(q.breakpointId,z.id)}catch(e){O=!0,M=e}finally{try{N||null==B.return||B.return()}finally{if(O)throw M}}return[2]}})},d=t.entries()[Symbol.iterator](),v.label=2;case 2:if(i=(p=d.next()).done)return[3,5];return[5,(0,c.XA)(f())];case 3:v.sent(),v.label=4;case 4:return i=!0,[3,2];case 5:return[3,8];case 6:return h=v.sent(),l=!0,s=h,[3,8];case 7:try{i||null==d.return||d.return()}finally{if(l)throw s}return[7];case 8:return[2]}})})).apply(this,arguments)}function s(){var e=new Map,n=new Set,i=!0,o=!1,l=void 0;try{for(var c,s=t.entries()[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var f=(0,u._)(c.value,2),p=f[0],h=f[1];if(0!==h.length){var v=[],g=!0,m=!1,y=void 0;try{for(var b,w=h[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var x=b.value;if(x.breakpointId&&x.line){var S=a.get(x.breakpointId),k=void 0===S?void 0:r.get(S);k&&n.add(S),v.push({dapId:S,pid1Id:x.breakpointId,line:k&&k.line||x.line,verified:!!(null==k?void 0:k.verified),logMessage:x.logMessage||void 0})}}}catch(e){m=!0,y=e}finally{try{g||null==w.return||w.return()}finally{if(m)throw y}}e.set(p,v)}}}catch(e){o=!0,l=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw l}}var E=!0,T=!1,C=void 0;try{for(var R,Z=r.entries()[Symbol.iterator]();!(E=(R=Z.next()).done);E=!0){var D=(0,u._)(R.value,2),P=D[0],_=D[1];if(!n.has(P)){var I=(0,d.IT)((null===(G=_.source)||void 0===G?void 0:G.path)||(null===(F=_.source)||void 0===F?void 0:F.name)||""),A=_.line;if(I&&A){var L=e.get(I);L||(L=[],e.set(I,L));var N=!1,O=!0,M=!1,B=void 0;try{for(var G,F,q,z=L[Symbol.iterator]();!(O=(q=z.next()).done);O=!0){var U=q.value;if(U.line===_.line){U.dapId=P,U.verified=_.verified,N=!0;break}}}catch(e){M=!0,B=e}finally{try{O||null==z.return||z.return()}finally{if(M)throw B}}N||L.push({dapId:P,line:A,verified:_.verified})}}}}catch(e){T=!0,C=e}finally{try{E||null==Z.return||Z.return()}finally{if(T)throw C}}return e}return{findPathByBreakpointId:function(e){var n=!0,r=!1,i=void 0;try{for(var o,a=t.entries()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,u._)(o.value,2),c=l[0];if(l[1].some(function(n){return n.breakpointId===e}))return c}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null},getBreakpoints:s,flush:function(e){return l.apply(this,arguments)},handleDAPBreakpointEvent:function(e){var t=e.body,i=t.reason,a=t.breakpoint,u=a.id;if(null!=u){switch(i){case"changed":case"new":r.set(u,(0,o._)({},r.get(u),a));break;case"removed":r.delete(u);break;default:return}n(s())}},handlePID1BreakpointEvent:function(e){var r=e.absolutePath?(0,d.IT)(e.absolutePath):null;r&&(t.set(r,e.breakpoints||[]),n(s()))},handleDebugSessionEnded:function(){r.clear(),a.clear();var e=!0,i=!1,o=void 0;try{for(var l,c=t.entries()[Symbol.iterator]();!(e=(l=c.next()).done);e=!0){var f=(0,u._)(l.value,2),d=f[0],p=f[1];0===p.length&&t.delete(d)}}catch(e){i=!0,o=e}finally{try{e||null==c.return||c.return()}finally{if(i)throw o}}n(s())}}}(P,function(e){b.current=e}),k=(0,r.u)(!1),E=[],T=new p.s(function(e){if(E.push({time:Date.now(),direction:"in",data:e}),"event"===e.type)switch(e.event){case"continued":g.current="running";break;case"stopped":var n;g.current="paused",w.current=null!==(n=e.body.threadId)&&void 0!==n?n:null,x.emit("paused",e.body.reason),function(){L.apply(this,arguments)}();break;case"breakpoint":S.handleDAPBreakpointEvent(e)}else if("response"===e.type){var t=C.get(e.request_seq);t&&(C.delete(e.request_seq),t(e))}}),C=new Map,R=100;function Z(){g.current="terminated",m.current=[],y.current=[],w.current=null,S.handleDebugSessionEnded(),k.current=!1}var D=!1;function P(e){return _.apply(this,arguments)}function _(){return(_=(0,i._)(function(e){return(0,c.Jh)(this,function(n){return[2,new Promise(function(n){var r,i=R++;C.set(i,n);var u=(0,a._)((0,o._)({},e),{type:"request",seq:i});E.push({time:Date.now(),direction:"out",data:u});var l={debugInput:{session:"main",adapterInput:(r=JSON.stringify(u),"Content-Length: ".concat(h.byteLength(r),"\r\n\r\n").concat(r))}};E.push({time:Date.now(),direction:"out",data:l}),t.send(l)})]})})).apply(this,arguments)}function I(e){return A.apply(this,arguments)}function A(){return(A=(0,i._)(function(e){var n;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return E.push({time:Date.now(),direction:"out",data:e}),[4,t.request(e)];case 1:if(n=r.sent(),E.push({time:Date.now(),direction:"in",data:n}),n.error)throw n.error;return[2,n]}})})).apply(this,arguments)}function L(){return(L=(0,i._)(function(){var e,n,t;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return m.current=[],y.current=[],[4,P({command:"stackTrace",arguments:{threadId:w.current}})];case 1:if(!(e=r.sent()).success||(m.current=e.body.stackFrames,0===m.current.length))return[2];return[4,P({command:"scopes",arguments:{frameId:m.current[0].id}})];case 2:if(!(n=r.sent()).success)return[2];return[4,Promise.all(n.body.scopes.map(function(e){return P({command:"variables",arguments:{variablesReference:e.variablesReference}}).then(function(n){return{response:n,parentVariableReference:e.variablesReference}})}))];case 3:return t=r.sent(),y.current=t.filter(function(e){return e.response.success}).reduce(function(e,n){var t=n.response,r=n.parentVariableReference;return e.concat(t.body.variables.map(function(e){return(0,a._)((0,o._)({},e),{parentVariableReference:r})}))},[]),[2]}})})).apply(this,arguments)}function N(e){return O.apply(this,arguments)}function O(){return(O=(0,i._)(function(e){var n,r,i,o,a,u,l;return(0,c.Jh)(this,function(c){switch(c.label){case 0:if("terminated"!==g.current)throw Error("Cant start while debugger is already running");return g.current="preinitializing",m.current=[],[4,v()];case 1:if(c.sent(),"stopping"===g.current)return g.current="terminated",[2];return D=!0,g.current="initializing",i={session:"main",readOnly:!1},e&&(i.debuggerId=e.debuggerOption.id,e.filePath&&(i.filePath=e.filePath)),o={debugMain:i},E.push({time:Date.now(),direction:"out",data:o}),[4,t.request(o)];case 2:if(a=c.sent(),E.push({time:Date.now(),direction:"in",data:a}),a.error)return x.emit("output",a.error),g.current="terminated",[2];return[4,P({command:"initialize",arguments:{clientID:"replit",clientName:"replit.com",adapterID:"cppdbg",pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0,supportsEvaluateForHovers:!0,supportsVariableType:!0,supportsVariablePaging:!0,supportsRunInTerminalRequest:!1,locale:"en-us",supportsProgressReporting:!0,supportsInvalidatedEvent:!0}})];case 3:if(!(u=c.sent()).success)return g.current="terminated",[2];return k.current=!!(null===(n=u.body)||void 0===n?void 0:n.supportsStepBack),l=!(null===(r=u.body)||void 0===r?void 0:r.supportsConfigurationDoneRequest),[4,S.flush()];case 4:if(c.sent(),l)return[3,6];return[4,P({command:"configurationDone"})];case 5:c.sent(),c.label=6;case 6:return"initializing"===g.current&&(g.current="running"),x.emit("started",l),[2]}})})).apply(this,arguments)}function M(e,n){return B.apply(this,arguments)}function B(){return(B=(0,i._)(function(e,n){var t,r,i,o;return(0,c.Jh)(this,function(a){switch(a.label){case 0:return t=n.line,r=n.otIndex,i=n.otVersion,o=n.logMessage,[4,I({debugAddBreakpointRequest:{path:(0,d.om)(e)||e,line:t,otIndex:r,otVersion:i,logMessage:o}})];case 1:if(a.sent(),!("terminated"!==g.current))return[3,3];return[4,S.flush(e)];case 2:a.sent(),a.label=3;case 3:return x.emit("breakpoint","added"),[2]}})})).apply(this,arguments)}function G(e){return F.apply(this,arguments)}function F(){return(F=(0,i._)(function(e){var n;return(0,c.Jh)(this,function(t){switch(t.label){case 0:return n=S.findPathByBreakpointId(e),[4,I({debugRemoveBreakpointRequest:{breakpointId:e}})];case 1:if(t.sent(),!("terminated"!==g.current&&n))return[3,3];return[4,S.flush(n)];case 2:t.sent(),t.label=3;case 3:return x.emit("breakpoint","removed"),[2]}})})).apply(this,arguments)}function q(){return(q=(0,i._)(function(e,n){var t;return(0,c.Jh)(this,function(r){switch(r.label){case 0:if(!(t=S.findPathByBreakpointId(e)))return[2];return[4,I({debugUpdateBreakpointRequest:{breakpointId:e,logMessage:n.logMessage}})];case 1:if(r.sent(),!("terminated"!==g.current))return[3,3];return[4,S.flush(t)];case 2:r.sent(),r.label=3;case 3:return x.emit("breakpoint","updated"),[2]}})})).apply(this,arguments)}function z(){return(z=(0,i._)(function(e,n){var t,r,i;return(0,c.Jh)(this,function(o){switch(o.label){case 0:if(!(i=null===(r=b.current.get(e))||void 0===r?void 0:null===(t=r.find(function(e){return e.line===n.line&&void 0!==e.pid1Id}))||void 0===t?void 0:t.pid1Id))return[3,2];return[4,G(i)];case 1:return o.sent(),[3,4];case 2:return[4,M(e,n)];case 3:o.sent(),o.label=4;case 4:return[2]}})})).apply(this,arguments)}function U(e){return x.on("started",e),function(){x.removeListener("started",e)}}return t.onCommand(function(e){E.push({time:Date.now(),direction:"in",data:e});var n,t,r=e.debugOutput,i=e.debugState,o=e.debugBreakpointEvent,a=e.debugSessions;if(r){if("main"!==r.session)return;r.adapterOutput&&T.read(r.adapterOutput),r.output&&x.emit("output",r.output)}if(o&&S.handlePID1BreakpointEvent(o),i&&i.state===s.api.State.Stopped&&Z(),((null==a?void 0:null===(n=a.sessions)||void 0===n?void 0:n.main)===s.api.State.Running||(null==i?void 0:i.state)===s.api.State.Running)&&"terminated"===g.current&&N(),(null==a?void 0:null===(t=a.sessions)||void 0===t?void 0:t.main)===s.api.State.Stopped||(null==i?void 0:i.state)===s.api.State.Stopped){if(D){D=!1;return}Z()}}),{state:g,stackFrames:m,variables:y,breakpoints:b,supportsStepBack:k,onOutput:function(e){return x.on("output",e),function(){x.removeListener("output",e)}},onStarted:U,onPaused:function(e){return x.on("paused",e),function(){x.removeListener("paused",e)}},onBreakpoint:function(e){return x.on("breakpoint",e),function(){x.removeListener("breakpoint",e)}},sendInput:function(e){return(0,i._)(function(){var n,r;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return n={debugInput:{session:"main",input:e}},E.push({time:Date.now(),direction:"out",data:n}),[4,t.request(n)];case 1:if(r=i.sent(),E.push({time:Date.now(),direction:"in",data:r}),r.error)throw r.error;return[2]}})})()},fetchVariables:function(e){return(0,i._)(function(){var n;return(0,c.Jh)(this,function(t){switch(t.label){case 0:return[4,P({command:"variables",arguments:{variablesReference:e}})];case 1:if((n=t.sent()).success)return[2,n.body.variables.map(function(n){return(0,a._)((0,o._)({},n),{parentVariableReference:e})})];throw Error(n.message)}})})()},evaluate:function(e){var t=e.frameId,r=void 0===t?null===(n=m.current[0])||void 0===n?void 0:n.id:t,o=e.expression,a=e.context;return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return[4,P({command:"evaluate",arguments:{frameId:r,expression:o,context:a}})];case 1:return[2,e.sent()]}})})()},addBreakpoint:M,removeBreakpoint:G,updateBreakpoint:function(e,n){return q.apply(this,arguments)},toggleBreakpoint:function(e,n){return z.apply(this,arguments)},start:N,continue:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return m.current=[],g.current="running",[4,P({command:"continue",arguments:{threadId:w.current}})];case 1:return e.sent(),[2]}})})()},reverseContinue:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return m.current=[],g.current="running",[4,P({command:"reverseContinue",arguments:{threadId:w.current}})];case 1:return e.sent(),[2]}})})()},back:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return g.current="running",[4,P({command:"stepBack",arguments:{threadId:w.current}})];case 1:return e.sent(),[2]}})})()},next:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return g.current="running",[4,P({command:"stepIn",arguments:{threadId:w.current}})];case 1:return e.sent(),[2]}})})()},skip:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return g.current="running",[4,P({command:"next",arguments:{threadId:w.current,granularity:"line"}})];case 1:return e.sent(),[2]}})})()},stepOut:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return g.current="running",[4,P({command:"stepOut",arguments:{threadId:w.current}})];case 1:return e.sent(),[2]}})})()},stop:function(){return(0,i._)(function(){var e,n,r,i;return(0,c.Jh)(this,function(o){switch(o.label){case 0:if("terminated"===g.current)throw Error("Debugger already terminated");if(e=g.current,g.current="stopping","preinitializing"===e)return[2];if("initializing"!==e)return[3,2];return n=[],[4,Promise.race([new Promise(function(e){n.push(g.subscribe(function(){return e()}))}),new Promise(function(e){n.push(U(function(){return e()}))})])];case 1:if(o.sent(),n.forEach(function(e){return e()}),"terminated"===g.current)return[2];o.label=2;case 2:return r={debugStop:{session:"main"}},E.push({time:Date.now(),direction:"out",data:r}),[4,t.request(r)];case 3:if(i=o.sent(),E.push({time:Date.now(),direction:"in",data:i}),i.error)throw Error("Failed to stop debugger "+i.error);return[2]}})})()},getSource:function(e){return(0,i._)(function(){var n;return(0,c.Jh)(this,function(t){switch(t.label){case 0:return[4,P({command:"source",arguments:{source:{path:e}}})];case 1:if(!(n=t.sent()).success)throw Error(n.message);return[2,n.body.content]}})})()},getDebugLogs:function(){return Object.entries({state:g,stackFrames:m,variables:y,breakpoints:b,threadId:w}).map(function(e){var n=(0,u._)(e,2),t=n[0],r=n[1];return"".concat(t," = ").concat(JSON.stringify(r.current instanceof Map?(0,l._)(r.current):r.current,void 0,2))}).join("\n")+"\n\n"+E.map(function(e){return[new Date(e.time).toLocaleString(),"in"===e.direction?"->":"<-",JSON.stringify(e.data)].join(" ")}).join("\n")}}}({channel:n.channel,beforeRun:t}),e(null),function(){v.current=null}})})}}}},43891:function(e,n,t){t.d(n,{P:function(){return y},n:function(){return m}});var r=t(32477),i=t(92809),o=t(36617),a=t(43429),u=t(59808),l=t(1574),c=t(12834),s=t(50199),f=t(50782),d=t(11516),p=t(25425),h=i.Type.Array(i.Type.String()),v=function(e){return"repl:hiddenFiles:"+e},g={get:function(e){var n=d.Z.get(v(e));return o.B4.Check(h,n)?n:null},set:function(e,n){d.Z.set(v(e),n)}},m=function(e){var n=(0,p.P5)({controlName:"flag-filetree-local-cache",logFlagToAnalytics:!1}),t=(0,f.Z)(),i=(0,c.Z)(),o=(0,r._)(a.useState(function(){return n?g.get(t):null}),2),l=o[0],s=o[1];return a.useEffect(function(){return e.watch(function(e){var r=function(e){n&&g.set(t,e),s(e)};if(i.current){if(e.error){e.error===u.Yt.NotFound&&r([]);return}if(!e.config.hidden){r([]);return}r(e.config.hidden)}})},[e,t,i,n]),l},y=function(e){var n=m(e);return(0,s.Z)(function(){return null===n?null:n.map(function(e){return(0,l.Z)(e)||e})},[n])}},50431:function(e,n,t){t.d(n,{C:function(){return u},Gw:function(){return a},Tg:function(){return l},so:function(){return i},ss:function(){return c},tc:function(){return o}});var r=t(95025);function i(e,n){for(var t=[],r=e.split(n),i=0;i<r.length;i++){var o=r[i].trim();""!==o&&t.push(o)}return t}function o(e){return e.replace(/^<|>$/g,"")}function a(e){return"'".concat(e.replace(/'/g,"'\\''"),"'")}function u(e){return e.replace(/^refs\/(?:heads|remotes)\//,"")}function l(e){if(-1===e.indexOf("/")||e.startsWith("refs/heads/"))return[null,null];if(e.startsWith("refs/remotes/")){var n=(0,r._)(e.split("/"));return[n[2],n.slice(3).join("/")]}var t=(0,r._)(e.split("/"));return[t[0],t.slice(1).join("/")]}function c(e){return e.replace(/^refs\/remotes\//,"")}},55103:function(e,n,t){t.d(n,{Z:function(){return w},h:function(){return a}});var r,i,o,a,u=t(34142),l=t(32477),c=t(87682),s=t(50431),f="# branch.oid ",d="# branch.head ",p="# branch.upstream ",h="# branch.ab ",v="# stash ",g=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,m=/^([RC])([0-9]+) (.+?)\t(.+)$/,y=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,b=/([RC][0-9]+ .+?)\0(.+?(?:\0|$))/g;function w(e){return x.apply(this,arguments)}function x(){return(x=(0,u._)(function(e){var n,t,r,i,o,a,u,w,x,k,E,T,C,R,Z,D,P,_,I,A,L,N;return(0,c.Jh)(this,function(c){switch(c.label){case 0:return n=null,t=null,r=null,i=0,o=[],a=["-z","--porcelain=v2","--branch","--show-stash","--untracked-files=all"],[4,e("git status ".concat(a.join(" ")),{serviceMethod:"git-status"})];case 1:if((u=c.sent()).error)return[2,u];w=u.output.replaceAll(b,"$1	$2"),x=(0,s.so)(w,"\x00"),k=!0,E=!1,T=void 0;try{for(C=x[Symbol.iterator]();!(k=(R=C.next()).done);k=!0)(Z=R.value).startsWith("#")?Z.startsWith(f)?(D=Z.substring(f.length),"(initial)"!==D&&(n=D)):Z.startsWith(d)?(P=Z.substring(d.length),"(detached)"!==P&&(t=P)):Z.startsWith(p)?(_=Z.substring(p.length),"(not queried)"!==_&&(r={branch:_,ahead:0,behind:0})):Z.startsWith(h)?r&&(A=(I=(0,l._)(Z.substring(h.length).split(" ").map(function(e){return Math.abs(parseInt(e,10))}),2))[0],L=I[1],r.ahead=A,r.behind=L):Z.startsWith(v)&&(i=parseInt(Z.substring(v.length),10)):(N=function(e){var n=e[0];switch(e=e.substring(2),n){case"!":default:return null;case"?":return{type:{index:"UNTRACKED",worktree:"UNTRACKED"},path:e,staged:!1,unmerged:!1};case"u":var t=e.match(y);if(!t)return null;var r=(0,l._)(t,12),i=r[1],o=r[2],a=r[11],u=S(i),c=S(o);return{type:{index:u,worktree:c},path:a,staged:"UNMODIFIED"!==u,unmerged:!0};case"1":case"2":var s=e.match(g);if(!s)return null;var f=(0,l._)(s,10),d=f[1],p=f[2],h=f[9],v=S(d),b=S(p),w="UNMODIFIED"!==v;if("1"===n)return{type:{index:v,worktree:b},path:h,staged:w,unmerged:!1};if("2"===n){var x=h.match(m);if(!x)return null;var k=(0,l._)(x,5),E=k[1],T=k[2],C=k[3],R=k[4];return{type:{index:v,worktree:b},path:C,staged:w,unmerged:!1,source:{type:function(e){switch(e){case"R":default:return"RENAMED";case"C":return"COPIED"}}(E),score:parseInt(T,10),path:R}}}return null}}(Z),null!==N&&o.push(N))}catch(e){E=!0,T=e}finally{try{k||null==C.return||C.return()}finally{if(E)throw T}}return[2,{commit:n,branch:t,upstream:r,stashes:i,changes:o,error:null}]}})})).apply(this,arguments)}function S(e){switch(e){case".":default:return"UNMODIFIED";case"M":return"MODIFIED";case"T":return"TYPE_CHANGED";case"A":return"ADDED";case"D":return"DELETED";case"R":return"RENAMED";case"C":return"COPIED";case"U":return"UNMERGED"}}(r=o||(o={})).ORDINARY="1",r.RENAMED_OR_COPIED="2",r.UNMERGED="u",r.UNTRACKED="?",r.IGNORED="!",(i=a||(a={})).UNTRACKED="UNTRACKED",i.UNMODIFIED="UNMODIFIED",i.MODIFIED="MODIFIED",i.TYPE_CHANGED="TYPE_CHANGED",i.ADDED="ADDED",i.DELETED="DELETED",i.RENAMED="RENAMED",i.COPIED="COPIED",i.UNMERGED="UNMERGED"},20298:function(e,n,t){t.d(n,{s:function(){return f}});var r,i=t(23026),o=t(48900),a=t(47507),u=t(88422).lW,l=new TextEncoder,c=new TextDecoder,s=(r=/[a-z\d_-]+: [a-z\d_ :;.,/"'?!(){}[\]@<>=+*#$&`|~^%-]+/.source,RegExp("(".concat(r,"\\r\\n)*(").concat(r,")$"),"i")),f=function(){"use strict";function e(n){(0,i._)(this,e),this.onMessage=n,this.buffer=new Uint8Array,this.read=this.read.bind(this)}var n=e.prototype;return n.consumeHeaders=function(){var e=function(e){var n=e.findIndex(function(n,t){return 13===n&&10===e[t+1]&&13===e[t+2]&&10===e[t+3]});if(-1!==n){var t=c.decode(e.slice(0,n)),r=t.match(s);if(!r)throw a.kg.error("Failed to parse LSP header, no matches",{fragment:t}),Error("Unable to match header, text: ".concat(t));var i=Object.create(null),o=r[0].split("\r\n"),u=!0,l=!1,f=void 0;try{for(var d,p=o[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var h=d.value,v=h.indexOf(":");if(-1===v)throw a.kg.error("Failed to parse LSP header, missing colon",{fragment:t}),Error('Message header must separate key and value using ":"');var g=h.substr(0,v),m=h.substr(v+1).trim();if("Content-Length"===g){var y=parseInt(m,10);if(isNaN(y))throw a.kg.error("Failed to parse LSP header, NaN content length",{fragment:t}),Error("Content-Length value must be a number.");i[g]=parseInt(m,10)}else i[g]=m}}catch(e){l=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(l)throw f}}if(null==i["Content-Length"])throw a.kg.error("Failed to parse LSP header, no Content-Length",{fragment:t}),Error("Header must provide a Content-Length property.");return{headerLength:n,value:i}}}(this.buffer);if(e)return this.buffer=this.buffer.slice(e.headerLength+4),e},n.read=function(e){for(this.buffer=(n=this.buffer,t=l.encode(e),(r=new Uint8Array(n.length+t.length)).set(n),r.set(t,n.length),r);null!==(i=this.headers)&&void 0!==i?i:this.headers=this.consumeHeaders();){var n,t,r,i,s=this.headers.value["Content-Length"];if(this.buffer.length<s)return;var f=function(e,n,t){var r=c.decode(e.slice(0,n));try{return{json:JSON.parse(r),buffer:e.slice(n)}}catch(f){var i=u.from(e).toString();if(f instanceof SyntaxError&&"Unexpected end of JSON input"===f.message){a.kg.info("Failed to parse LSP message, falling back to json parsing",{buffer:i,length:n,rpcContent:r,attempt:"original-length",headers:JSON.stringify(t)});var o=function(e,n){for(var t=0,r=0,i=!1,o=n;o<e.length+1;o++){if(o!==n&&!t&&!r&&!i)return o;var a=e[o];switch(a){case 92:o++;continue;case 34:i=!i;continue}if(!i)switch(a){case 123:t++;break;case 125:t--;break;case 91:r++;break;case 93:r--}}return -1}(e,0);if(-1!==o){var l=e.slice(0,o),s=c.decode(l);try{return{json:JSON.parse(s),buffer:e.slice(o)}}catch(e){a.kg.error("Failed to parse LSP message",{givenError:e,buffer:i,length:n,rpcContent:r,attempt:"recomputed-length"})}}}else a.kg.error("Failed to parse LSP message",{givenError:f,buffer:i,length:n,rpcContent:r,attempt:"content-length"});return{json:void 0,buffer:e.slice(n)}}}(this.buffer,s,this.headers),d=f.json,p=f.buffer;if(this.headers=void 0,this.buffer=p,void 0!==d)try{this.onMessage(d)}catch(e){o.Tb(e)}}},e}()},35375:function(e,n,t){t.d(n,{DL:function(){return i},OD:function(){return b},TE:function(){return S},UK:function(){return m},wy:function(){return g}});var r,i,o=t(34142),a=t(45903),u=t(25e3),l=t(21289),c=t(87682),s=t(48900),f=t(92153),d=t(69451),p=t.n(d),h=t(40028),v=t(59173),g=new Set([80,8099,9e3]),m=new Set([3e3,3001,3002,3003,4200,5e3,5173,6e3,6800,80,8e3,8008,8080,8081,8099,9e3]);function y(e,n){return new Set(Array.from(e).filter(function(e){return!n.has(e)}))}function b(e){var n=e.type;switch(n){case"FORWARDED":case"MISCONFIGURED":return e.externalPort;case"INTERNAL_ONLY":case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return;default:(0,h.Z)(n)}}function w(e,n){return n?y(e,new Set(n.map(function(e){return b(e.configuration)}))):e}function x(){return(x=(0,o._)(function(e){var n,t,r,i,o,a,u,l;return(0,c.Jh)(this,function(c){if(n=e.forwardableExternalPorts,t=e.portsState,r=e.writeDotReplitPortsConfig,i=e.portInfo,null===t.current)throw Error("processOpenedPort can only assign ports if dotReplit config was read");if(o=t.current.find(function(e){return e.configuration.localPort===i.port}),a={pid:i.pid,cgroup:i.cgroup,address:i.address,cmdline:i.cmdline},void 0!==o)return[2,{isOpen:!0,processInfo:a,configuration:o.configuration}];if(0===(u=w(n,t.current)).size)return[2,{isOpen:!0,processInfo:a,configuration:{type:"NO_MORE_EXTERNAL_PORTS_AVAILABLE",localPort:i.port}}];if(void 0===(l=u.has(i.port)?i.port:Array.from(u).sort()[0]))throw Error("this is impossible, we already confirmed that `unamppedExternalPorts.size` *is not* 0, but Typescript doesn't get it");return r(),[2,{isOpen:!0,processInfo:a,configuration:{type:"FORWARDED",localPort:i.port,externalPort:l}}]})})).apply(this,arguments)}function S(e){var n=e.container,t=e.dotReplit,r=e.dotdevUrlEnabled,i=e.enableBetterPortHandling,d=void 0!==i&&i,S=(0,v.u)([]),k=(0,v.u)(null),E=(0,v.u)(!1),T=p()(function(){if(k.current){var e=k.current.map(function(e){var n=e.configuration.type;switch(n){case"FORWARDED":case"MISCONFIGURED":return{localPort:e.configuration.localPort,externalPort:e.configuration.externalPort};case"INTERNAL_ONLY":return{localPort:e.configuration.localPort};case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return!1;default:(0,h.Z)(n)}}).filter(Boolean).sort(function(e,n){return e.localPort-n.localPort});t.updateDotReplit([{op:"add",path:"ports",value:JSON.stringify(e)}])}},1e3,{leading:!1,trailing:!0});function C(){E.set(!0),T()}function R(){return(R=(0,o._)(function(e,n){return(0,c.Jh)(this,function(t){if(!d)throw Error("updating .replit ports mapping is only available when we auto-udpate .replit");return k.update((0,f.ZP)(function(t){var r=null==t?void 0:t.find(function(n){return n.configuration.localPort===e}),i=void 0!==n?{type:"FORWARDED",localPort:e,externalPort:n}:{type:"INTERNAL_ONLY",localPort:e};r?r.configuration=i:(t||(t=[]),t.push({isOpen:!1,configuration:i}))})),C(),[2]})})).apply(this,arguments)}return d?function(e){var n=e.container,t=e.dotReplit,r=e.portsState,i=e.writeDotReplitPortsConfig,o=e.isThisServiceUpdatingDotReplit,c=e.forwardableExternalPorts;function f(e){return e.sort(function(e,n){var t,r;return(null!==(t=e.configuration.localPort)&&void 0!==t?t:0)-(null!==(r=n.configuration.localPort)&&void 0!==r?r:0)})}var d=[];function p(e){if(e.isForwarded)try{(function(e){return x.apply(this,arguments)})({forwardableExternalPorts:c,portsState:r,writeDotReplitPortsConfig:i,portInfo:e}).then(function(n){r.update(function(t){if(!t)throw Error("processOpenedPort can only execute if we red .replit first");var r=t.findIndex(function(n){return n.configuration.localPort===e.port});-1===r&&(r=t.length);var i=t.slice();return i[r]=n,f(i)})})}catch(e){throw s.$e(function(n){n.setTag("service","ports"),s.Tb(e)}),e}}function h(e){try{r.update(function(n){if(!n)throw Error("onPortClosed can only execute if we red .replit first");var t=n.findIndex(function(n){return n.configuration.localPort===e.port});if(-1===t)return n;var r=n[t],i=n.slice();return i[t]={isOpen:!1,configuration:r.configuration},i})}catch(e){throw s.$e(function(n){n.setTag("service","ports"),s.Tb(e)}),e}}n.onPortOpened(function(e){null===r.current?d.push({type:"portOpen",portInfo:e}):p(e)}),n.onPortClosed(function(e){null===r.current?d.push({type:"portClose",portInfo:e}):h(e)}),t.watch(function(e){var n,t=e.config,i=null!==(n=null==t?void 0:t.ports)&&void 0!==n?n:[];if(!0===o.current){var s=r.current;if(!s||i.length!==s.length)return;i.every(function(e,n){var t,r=s[n];return e.localPort===r.configuration.localPort&&e.externalPort===(null!==(t=b(r.configuration))&&void 0!==t?t:0)})&&o.set(!1);return}r.update(function(e){e||(e=[]);var n=new Set(i.map(function(e){return e.localPort}).filter(function(e){return null!=e})),t=new Set(e.map(function(e){return e.configuration.localPort})),r=new Set(e.filter(function(e){return e.isOpen}).map(function(e){return e.configuration.localPort})),o=y(n,t),s=(g=new Set((0,l._)(Array.from(n)).concat((0,l._)(Array.from(r)))),new Set(Array.from(t).filter(function(e){return g.has(e)}))),d=[],p=!0,h=!1,v=void 0;try{for(var g,m,b=s[Symbol.iterator]();!(p=(m=b.next()).done);p=!0)!function(){var n=m.value,t=e.find(function(e){return e.configuration.localPort===n}),r=i.find(function(e){return e.localPort===n});if(!t)throw Error("couldn't find match for local port: ".concat(n));if(!r)return d.push((0,u._)((0,a._)({},t),{configuration:{type:"CONFIG_MISSING",localPort:t.configuration.localPort}}));var o=t.configuration;o=null!=r.externalPort&&0!==r.externalPort?{type:w(c,d).has(r.externalPort)?"FORWARDED":"MISCONFIGURED",localPort:t.configuration.localPort,externalPort:r.externalPort}:{type:"INTERNAL_ONLY",localPort:t.configuration.localPort},d.push((0,u._)((0,a._)({},t),{configuration:o}))}()}catch(e){h=!0,v=e}finally{try{p||null==b.return||b.return()}finally{if(h)throw v}}var x=!0,S=!1,k=void 0;try{for(var E,T=o[Symbol.iterator]();!(x=(E=T.next()).done);x=!0)!function(){var e=E.value,n=i.find(function(n){return n.localPort===e});if(!n)throw Error("couldn't find match for local port: ".concat(e));var t=null!=n.externalPort&&0!==n.externalPort?n.externalPort:void 0;if(void 0!==t){var r=w(c,d).has(t);d.push({isOpen:!1,configuration:{type:r?"FORWARDED":"MISCONFIGURED",localPort:e,externalPort:t}})}else d.push({isOpen:!1,configuration:{type:"INTERNAL_ONLY",localPort:e}})}()}catch(e){S=!0,k=e}finally{try{x||null==T.return||T.return()}finally{if(S)throw k}}return f(d)}),d.length>0&&(d.forEach(function(e){var n=e.type,t=e.portInfo;"portOpen"===n?p(t):"portClose"===n&&h(t)}),d=[])})}({container:n,dotReplit:t,portsState:k,writeDotReplitPortsConfig:C,isThisServiceUpdatingDotReplit:E,forwardableExternalPorts:void 0!==r&&r?m:g}):function(e){var n=e.container,t=e.openedPorts;function r(e){return e.sort(function(e,n){return e.localPort-n.localPort})}n.onPortOpened(function(e){e.isForwarded&&t.update(function(n){var t=n.findIndex(function(n){return n.localPort===e.port});-1===t&&(t=n.length);var i=n.slice();return i[t]={localPort:e.port,externalPort:e.externalPort},r(i)})}),n.onPortClosed(function(e){t.update(function(n){return r(n.filter(function(n){return n.localPort!==e.port}))})})}({container:n,openedPorts:S}),{openedPorts:S,updateDotReplitPortsMapping:function(e,n){return R.apply(this,arguments)},portsState:k}}(r=i||(i={})).FORWARDED="FORWARDED",r.INTERNAL_ONLY="INTERNAL_ONLY",r.NO_MORE_EXTERNAL_PORTS_AVAILABLE="NO_MORE_EXTERNAL_PORTS_AVAILABLE",r.MISCONFIGURED="MISCONFIGURED",r.CONFIG_MISSING="CONFIG_MISSING"},37463:function(e,n,t){t.d(n,{bg:function(){return u},dF:function(){return l},r4:function(){return c}});var r=t(16643),i=t(54916),o=t(35375),a=t(43429);function u(){var e=(0,i.Z)().ports,n=(0,r.Z)(e.portsState);return(0,a.useMemo)(function(){return n?n.filter(function(e){return e.isOpen&&e.configuration.type===o.DL.FORWARDED}):[]},[n])}function l(e){return c((0,i.Z)().ports,e)}function c(e,n){var t=(0,r.Z)(e.portsState);return(0,a.useMemo)(function(){return n&&t?t.filter(function(e){var t;return null!==(t=e.isOpen&&(null==n?void 0:n.endsWith(e.processInfo.cgroup)))&&void 0!==t&&t}):[]},[t,n])}},85492:function(e,n,t){t.d(n,{Z:function(){return T}});var r,i,o,a=t(34142),u=t(87682),l=t(18107),c=t(83493),s=t(47001),f=t(47507),d=t(45903),p=t(58962),h=t(12130),v=t(73926),g=t.n(v),m=t(92153),y=t(23026);(i||(i={})).MESSAGE="MESSAGE";var b=function(){"use strict";function e(n){(0,y._)(this,e),this.buffer=Array(n).fill(null),this.start=0,this.end=0,this.isFull=!1}var n=e.prototype;return n.write=function(e){this.buffer[this.end]=e,this.end=(this.end+1)%this.buffer.length,this.isFull&&(this.start=(this.start+1)%this.buffer.length),this.end===this.start&&(this.isFull=!0)},n.readAll=function(){return this.start!==this.end||this.isFull?this.start<this.end?this.buffer.slice(this.start,this.end).join(""):this.buffer.slice(this.start).concat(this.buffer.slice(0,this.end)).join(""):""},e}();function w(e){var n=new b(e.maxHistorySize),t=(0,c.ZP)();return{emitMessage:function(e){n.write(e),t.emit("MESSAGE",e)},onMessage:function(e){return t.on("MESSAGE",e),Promise.resolve().then(function(){return e(n.readAll())}),function(){return t.removeListener("MESSAGE",e)}}}}var x=t(59868),S=t(30671);function k(e){return 1e3*e.seconds+e.nanos/1e6}var E="\x1b[?25l";function T(e){var n;if("outputs"===e.mode?n=function(e){var n,t,r,i,o,s,v,y,b,T,C,R,Z,D,P,_,I,A=e.container,L=e.toolchain,N=e.beforeRun,O=e.packager,M=e.debuggest,B=(0,c.ZP)(),G=null,F={runId:g()(),runState:l.Ah.OFFLINE,runningStage:"NONE",outputBlocks:[]};function q(e){F=(0,m.ZP)(F,e)}function z(e){var n=F.outputBlocks.find(function(n){return n.id===e});if(!n)throw Error("can't find block for id: ".concat(e));B.emit(l.zW.BLOCK_CHANGED,n)}function U(){B.emit(l.zW.ALL_BLOCKS_CHANGED,F.outputBlocks)}function W(e){F.runState!==e&&(q(function(n){n.runState=e}),B.emit(l.zW.STATE_CHANGE,e))}function H(){if(!G){W(l.Ah.OFFLINE);return}if("BEFORE_RUN"===F.runningStage){W(l.Ah.BEFORE_RUN);return}if("STOPPING"===F.runningStage){W(l.Ah.STOPPING);return}if("NONE"!==F.runningStage){W(l.Ah.RUNNING);return}W(l.Ah.IDLE)}function X(e,n){var t=(null!=n?n:F).outputBlocks.filter(function(n){return n.type===e}),r=t[t.length-1];if(r)return r}function V(e,n){var t;q(function(r){var i=X(e,r);i&&(t=i.id,n(i))}),t&&z(t)}function j(){return(j=(0,a._)(function(e){return(0,u.Jh)(this,function(n){var t;return[2,(0,S.GK)("outputs.run",(t=(0,a._)(function(n){var t,r,i,o,c,s,p,v,m,y;return(0,u.Jh)(this,function(b){switch(b.label){case 0:if(F.runState!==l.Ah.IDLE&&F.runState!==l.Ah.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+F.runState);return i=F.outputBlocks.length>1&&F.outputBlocks[F.outputBlocks.length-1],(0,x.j)(x.U3.WS_CONSOLE_OUTPUT_STARTED,{replId:null===(t=A.getContext())||void 0===t?void 0:t.repl.id,runId:F.runId,lastBlock:i?(0,d._)({type:i.type,isDone:i.isDone,endTime:i.endTime,startTime:i.startTime},i.type===l.kH.EXECUTION?{executionMode:i.data.executionMode,exitCode:i.data.exitCode,stderr:i.data.stderr}:{},i.type===l.kH.DEBUGGER?{debugState:i.data.debugState}:{}):void 0,previousBlockNumber:F.outputBlocks.length,previousBlocksAvgTimeMs:F.outputBlocks.length>1?Math.floor(F.outputBlocks.reduce(function(e,n){return n.endTime&&n.startTime?e+(n.endTime-n.startTime):e},0)):void 0}),o=g()(),q(function(e){e.runId=o,e.runningStage="BEFORE_RUN"}),B.emit(l.zW.LOCAL_RUN),H(),!e&&(s=(0,h.Z)(L.configs.current,[],null,(null===(c=L.configs.current)||void 0===c?void 0:c.entrypoint)||null)).length>0&&(e=s[0]),[4,N(p=f.kg.timeStart({runnerId:null==e?void 0:e.runner.id,filePath:null==e?void 0:e.filePath,isInterpreter:null==e?void 0:e.runner.interpreter,replLanguage:null===(r=A.getContext())||void 0===r?void 0:r.repl.language}),{runId:o,channelId:null==G?void 0:G.id,type:"outputs",runConfig:e,ctx:n})];case 1:if(b.sent(),F.runId!==o||"NONE"===F.runningStage||"SERVER"===F.runningStage)return[2];if(!G)throw Error("State is RUNNING but outputs is null?");if("open"!==G.status)return[2];return(v=K()).isStopped||v.stop(),m={},e&&(m.runnerId=e.runner.id,m.filePath=e.filePath),y=G,[4,(0,S.nO)(n,"timeToRunning",(0,a._)(function(){var e,n;return(0,u.Jh)(this,function(t){switch(t.label){case 0:return e=performance.now(),y.send({runMain:m}),[4,new Promise(function(e){var n=y.onCommand(function(t){"state"===t.body&&(n(),e())})})];case 1:return t.sent(),n=performance.now()-e,p("run finished",{timeToRunningMs:n}),[2]}})}))];case 2:return b.sent(),[2]}})}),function(e){return t.apply(this,arguments)}))]})})).apply(this,arguments)}function K(){var e=M.mainClient.current,n=null==e?void 0:e.state.current;return{client:e,state:n,sendInput:function(n){return null==e?void 0:e.sendInput(n)},stop:function(){return null==e?void 0:e.stop()},isRunning:"running"===n,isStopped:null==n||"terminated"===n}}function J(){return(J=(0,a._)(function(e){var n,t;return(0,u.Jh)(this,function(r){if(F.runState===l.Ah.OFFLINE)return[2];if(n=K(),t=F.outputBlocks[F.outputBlocks.length-1].type===l.kH.DEBUGGER,n.isRunning&&t&&n.sendInput(e),F.runState!==l.Ah.IDLE&&F.runState!==l.Ah.RUNNING)throw Error("Can only send input when running or idle");if(!G)throw Error("State is not OFFLINE but outputs is null?");return"open"!==G.status||G.send({input:e}),[2]})})).apply(this,arguments)}return t=(n={packager:O,updateState:q,getRunningBlockOfType:X,updateRunningBlockOfType:V,emitBlockUpdate:z}).packager,r=n.updateState,i=n.getRunningBlockOfType,o=n.updateRunningBlockOfType,s=n.emitBlockUpdate,(v=[]).push(t.onOutput(function(e){var n=i(l.kH.PACKAGER);null==n||n.data.emitMessage(e.replace(/\n/g,"\n\r"))})),v.push(t.onError(function(e){o(l.kH.PACKAGER,function(n){n.error?n.error+="\n"+e:n.error=e})})),v.push(t.onStateChanged(function(e){if(e){var n=g()();r(function(e){e.outputBlocks.push({id:n,localStartTime:Date.now(),isDone:!1,visualState:l.MZ.EXPANDED,type:l.kH.PACKAGER,data:(0,d._)({},w({maxHistorySize:4e3}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),s(n)}else o(l.kH.PACKAGER,function(e){e.data.emitMessage(E),e.localEndTime=Date.now(),e.isDone=!0})})),C=(y={debuggest:M,updateState:q,updateRunningBlockOfType:V,getRunningBlockOfType:X,emitRunState:W,emitBlockUpdate:z,stopCurrentRun:function(){q(function(e){e.runningStage="BEFORE_RUN"}),null==G||G.send({clear:{}})}}).debuggest,R=y.updateState,Z=y.updateRunningBlockOfType,D=y.getRunningBlockOfType,P=y.emitBlockUpdate,_=y.emitRunState,I=y.stopCurrentRun,C.mainClient.subscribe(function(e){e&&(null==T||T(),null==b||b(),T=e.state.subscribe(function(e){if("initializing"===e){I();var n=g()();R(function(e){e.outputBlocks.push({id:n,localStartTime:Date.now(),isDone:!1,type:l.kH.DEBUGGER,visualState:l.MZ.EXPANDED,data:(0,d._)({debugState:"paused"},w({maxHistorySize:4e3}))})}),P(n),_(l.Ah.RUNNING)}"paused"===e&&Z(l.kH.DEBUGGER,function(e){e.data.debugState="paused"}),"running"===e&&Z(l.kH.DEBUGGER,function(e){e.data.debugState="running"}),"stopping"===e&&_(l.Ah.STOPPING),"terminated"===e&&(Z(l.kH.DEBUGGER,function(e){e.localEndTime=Date.now(),e.data.emitMessage(E),e.isDone=!0}),_(l.Ah.IDLE))}),b=e.onOutput(function(e){var n=D(l.kH.DEBUGGER);null==n||n.data.emitMessage(e)}))}),A.openChannel({name:"output",service:"output"},function(e){var n=e.channel;return G=n,H(),n.onCommand(function(e){if(null!=e.state){var n=e.state===p.api.State.Stopped;"STOPPING"===F.runningStage&&n&&q(function(e){e.runningStage="NONE"}),n?"SERVER"===F.runningStage&&q(function(e){e.runningStage="NONE"}):q(function(e){e.runningStage="SERVER"}),H();return}if(null!=e.outputBlockStartEvent&&null!=e.outputBlockStartEvent.measureStartTime){if(void 0!==F.outputBlocks.find(function(e){return e.type===l.kH.EXECUTION&&!e.isDone}))return;var t=e.outputBlockStartEvent,r=t.cgroup,i=t.executionMode,o=k(t.measureStartTime),a=g()();q(function(e){e.outputBlocks.push({id:a,localStartTime:Date.now(),startTime:o,isDone:!1,type:l.kH.EXECUTION,visualState:l.MZ.EXPANDED,data:(0,d._)({cgroup:r,executionMode:i===p.api.OutputBlockStartEvent.ExecutionMode.Run?"run":"interpret"},w({maxHistorySize:4e3}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),z(a)}if(null!=e.output){var u=X(l.kH.EXECUTION);null==u||u.data.emitMessage(e.output)}if(null!=e.hint){var c=X(l.kH.EXECUTION);null==c||c.data.emitMessage("\r\n\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n"))}if(null!=e.stderr&&V(l.kH.EXECUTION,function(n){n.data.stderr=(n.data.stderr||"")+e.stderr}),null!=e.error){var s=e.error;V(l.kH.EXECUTION,function(e){e.error?e.error+="\n"+s:e.error=s})}if(null!=e.outputBlockEndEvent&&null!=e.outputBlockEndEvent.measureEndTime){var f,h=e.outputBlockEndEvent.exitCode;(0,x.j)(x.U3.WS_CONSOLE_OUTPUT_RAN,{exitCode:h,replId:null===(f=A.getContext())||void 0===f?void 0:f.repl.id,runId:F.runId});var v=k(e.outputBlockEndEvent.measureEndTime);V(l.kH.EXECUTION,function(e){e.data.emitMessage(E),e.data.exitCode=h,e.localEndTime=Date.now(),e.endTime=v,e.isDone=!0})}}),function(){G=null,q(function(e){e.runId=g()(),e.runState=l.Ah.OFFLINE,e.runningStage="NONE",e.outputBlocks.forEach(function(e){if(!e.isDone){e.data.emitMessage(E),e.localEndTime=Date.now(),e.isDone=!0;var n="Connection was lost";e.error?e.error+="\n"+n:e.error=n}})}),H(),U()}}),{mode:"outputs",run:function(e){return j.apply(this,arguments)},stopRun:function(){if(F.runState===l.Ah.RUNNING){var e=K();if(!e.isStopped){e.stop(),q(function(e){e.runningStage="STOPPING"}),H();return}if("BEFORE_RUN"===F.runningStage){q(function(e){e.runningStage="NONE"}),H();return}q(function(e){e.runningStage="STOPPING"}),H(),null==G||G.send({clear:{}})}},sendInput:function(e){return J.apply(this,arguments)},onLocalRun:function(e){return B.on(l.zW.LOCAL_RUN,e),function(){B.removeListener(l.zW.LOCAL_RUN,e)}},onStateChanged:function(e){return B.on(l.zW.STATE_CHANGE,e),function(){return B.removeListener(l.zW.STATE_CHANGE,e)}},getRunState:function(){return F.runState},getOutputBlocks:function(){return F.outputBlocks},clearBlockHistory:function(){q(function(e){e.outputBlocks=e.outputBlocks.filter(function(e){return!e.isDone})}),U()},onBlockChanged:function(e){return B.on(l.zW.BLOCK_CHANGED,e),function(){return B.removeListener(l.zW.BLOCK_CHANGED,e)}},onAllBlocksChanged:function(e){return B.on(l.zW.ALL_BLOCKS_CHANGED,e),function(){return B.removeListener(l.zW.ALL_BLOCKS_CHANGED,e)}},resizeTerminalForBlock:function(e,n){if(G&&"open"===G.status){var t=F.outputBlocks.find(function(n){return n.id===e});if(!t)throw Error("tried to resize terminal of non-existing block");t.isDone||G.send({resizeTerm:n})}},startBlock:function(e){var n=g()();return q(function(t){t.outputBlocks.push({id:n,localStartTime:Date.now(),isDone:!1,visualState:l.MZ.EXPANDED,type:e,data:(0,d._)({},w({maxHistorySize:4e3}))})}),z(n),{id:n}},endBlock:function(e){q(function(n){var t=n.outputBlocks.find(function(n){return n.id===e});if(!t)throw Error("couldn't find a block");t.data.emitMessage(E),t.localEndTime=Date.now(),t.isDone=!0}),z(e)},writeOutputToBlock:function(e,n){var t=F.outputBlocks.find(function(n){return n.id===e});t&&t.data.emitMessage(n)},writeErrorToBlock:function(e,n){q(function(t){var r=t.outputBlocks.find(function(n){return n.id===e});if(!r)throw Error("couldn't find a block");r.error?r.error+="\n"+n:r.error=n}),z(e)},setBlockVisualState:function(e,n){q(function(t){var r=t.outputBlocks.find(function(n){return n.id===e});if(!r)throw Error("couldn't find a block");r.visualState=n}),z(e)}}}({container:e.container,toolchain:e.toolchain,beforeRun:e.beforeRun,packager:e.packager,debuggest:e.debuggest}):"html"===e.mode&&(n=function(e){var n=e.beforeRun,t=e.container,r=(0,c.ZP)(),i=l.Ah.OFFLINE,o="none",d=Math.random();function p(){var e=function(e){i!==e&&(i=e,r.emit(l.zW.STATE_CHANGE,i))};if("none"!==o){e(l.Ah.RUNNING);return}e(l.Ah.IDLE)}function h(){return(h=(0,a._)(function(){var e;return(0,u.Jh)(this,function(t){switch(t.label){case 0:if(i!==l.Ah.IDLE&&i!==l.Ah.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+i);return d=e=Math.random(),r.emit(l.zW.LOCAL_RUN),o="before-run",p(),[4,n(f.kg.timeStart({replLanguage:"html"}),{runId:e.toString(),type:"html"})];case 1:if(t.sent(),d!==e||"none"===o)return[2];return o="running",p(),o="none",p(),[2]}})})).apply(this,arguments)}return t.onConnectionStateChanged(function(e){e===s.em.CONNECTED&&(o="none",p())}),{mode:"html",run:function(){return h.apply(this,arguments)},stopRun:function(){if(i!==l.Ah.RUNNING)throw Error("stopRun must be called when running but got ".concat(i));o="none",p()},onStateChanged:function(e){return r.on(l.zW.STATE_CHANGE,e),function(){r.removeListener(l.zW.STATE_CHANGE,e)}},onLocalRun:function(e){return r.on(l.zW.LOCAL_RUN,e),function(){r.removeListener(l.zW.LOCAL_RUN,e)}},getRunState:function(){return i}}}({beforeRun:e.beforeRun,container:e.container})),!n)throw Error("mode not supported: "+e.mode);return n}(r=o||(o={})).BEFORE_RUN="BEFORE_RUN",r.SERVER="SERVER",r.NONE="NONE",r.STOPPING="STOPPING"},17789:function(e,n,t){t.d(n,{Z:function(){return p},w:function(){return d}});var r=t(34142),i=t(39698),o=t(45903),a=t(25e3),u=t(32477),l=t(87682),c=t(28268),s=t(39756),f=t(30084),d=".env";function p(e){var n=e.fs,t={id:0,ops:[],requests:[]};function p(){return(p=(0,r._)(function(e){var n;return(0,l.Jh)(this,function(t){switch(t.label){case 0:return[4,g()];case 1:return[2,(n=t.sent()[e])?{key:e,value:n}:void 0]}})})).apply(this,arguments)}function h(){return v.apply(this,arguments)}function v(){return(v=(0,r._)(function(){var e;return(0,l.Jh)(this,function(n){switch(n.label){case 0:return e=Object.entries,[4,g()];case 1:return[2,e.apply(Object,[n.sent()]).map(function(e){var n=(0,u._)(e,2);return{key:n[0],value:n[1]}})]}})})).apply(this,arguments)}function g(){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:return[4,n.readFile(d)];case 1:if((e=t.sent()).error===f.Df.NotFound)return[2,{}];if(e.error)throw e.error;return[2,c.Z.parse(e.content.toString())]}})})).apply(this,arguments)}function y(){return(y=(0,r._)(function(e){return(0,l.Jh)(this,function(n){switch(n.label){case 0:return[4,b([e])];case 1:return n.sent(),[2]}})})).apply(this,arguments)}function b(e,n){return w.apply(this,arguments)}function w(){return(w=(0,r._)(function(e,n){return(0,l.Jh)(this,function(r){switch(r.label){case 0:return Array.isArray(e)||(e=Object.entries(e).map(function(e){var n=(0,u._)(e,2);return{key:n[0],value:n[1]}})),(null==n?void 0:n.removeMissing)&&t.ops.push({op:"clear"}),e.forEach(function(e){return t.ops.push({op:"upsert",secret:e})}),[4,E()];case 1:return r.sent(),[2]}})})).apply(this,arguments)}function x(){return(x=(0,r._)(function(e){return(0,l.Jh)(this,function(n){switch(n.label){case 0:return[4,S([e])];case 1:return[2,n.sent()]}})})).apply(this,arguments)}function S(e){return k.apply(this,arguments)}function k(){return(k=(0,r._)(function(e){return(0,l.Jh)(this,function(n){switch(n.label){case 0:return e.forEach(function(e){return t.ops.push({op:"remove",key:e})}),[4,E()];case 1:return n.sent(),[2]}})})).apply(this,arguments)}function E(){return T.apply(this,arguments)}function T(){return(T=(0,r._)(function(){var e,u,s,f,p,v,g,m,y,b,w,x,S,k,E;return(0,l.Jh)(this,function(T){switch(T.label){case 0:return e=t.id+=1,[4,h()];case 1:var C;if(u=T.sent(),e!==t.id)return[2,new Promise(function(e){t.requests.push(e)})];s=u.reduce(function(e,n){return(0,a._)((0,o._)({},e),(0,i._)({},n.key,n.value))},{}),f=!0,p=!1,v=void 0;try{for(g=t.ops[Symbol.iterator]();!(f=(m=g.next()).done);f=!0)switch((y=m.value).op){case"upsert":s[y.secret.key]=y.secret.value;break;case"remove":delete s[y.key];break;case"clear":b=!0,w=!1,x=void 0;try{for(S=Object.keys(s)[Symbol.iterator]();!(b=(k=S.next()).done);b=!0)E=k.value,delete s[E]}catch(e){w=!0,x=e}finally{try{b||null==S.return||S.return()}finally{if(w)throw x}}}}catch(e){p=!0,v=e}finally{try{f||null==g.return||g.return()}finally{if(p)throw v}}return t.ops=[],[4,new Promise((C=(0,r._)(function(e){return(0,l.Jh)(this,function(r){switch(r.label){case 0:return[4,n.writeFile(d,c.Z.serialize(s)).finally(function(){t.requests.forEach(function(e){return e()}),t.requests=[]})];case 1:return r.sent(),e(),[2]}})}),function(e){return C.apply(this,arguments)}))];case 2:return[2,T.sent()]}})})).apply(this,arguments)}return{readSecret:function(e){return p.apply(this,arguments)},readSecrets:h,writeSecret:function(e){return y.apply(this,arguments)},writeSecrets:b,removeSecret:function(e){return x.apply(this,arguments)},removeSecrets:S,watchSecrets:function(e){var t,r=n.watchDir(s.Ql,{onChange:function(r){var i=r.find(function(e){return e.filename===d});i&&!t&&(t=n.watchFile(d,{onChange:function(n){e.onChange(Object.entries(c.Z.parse(n.toString())).map(function(e){var n=(0,u._)(e,2);return{key:n[0],value:n[1]}}))},onError:function(n){var r;t=void 0,null===(r=e.onError)||void 0===r||r.call(e,n)}})),!i&&t&&(t(),t=void 0)},onError:function(){t&&(t(),t=void 0)}});return function(){t&&(t(),t=void 0),r()}}}}},12130:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(73164),i=t(40728);function o(e,n,t,o){if(!(null==e?void 0:e.runs))return[];var u=[];if(n=n.slice(),t){var l=n.indexOf(t);-1!==l&&(n.splice(l,1),n.splice(0,0,t))}if(o){var c=n.indexOf(o);-1!==c&&n.splice(c,1),n.splice(0,0,o)}var s=!0,f=!1,d=void 0;try{for(var p,h=n[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v=p.value;if(v.match(/(\.[a-z0-9]+)$/)){var g=!0,m=!1,y=void 0;try{for(var b,w=e.runs[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var x=b.value;if(x.fileParam||x.optionalFileParam){var S=(0,r.rF)(x.fileTypeAttrs);null===S&&x.language&&(S=r.$R.from(x.language)),S&&(0,i.JW)(v,S)&&u.push({runner:x,filePath:v})}}}catch(e){m=!0,y=e}finally{try{g||null==w.return||w.return()}finally{if(m)throw y}}}}}catch(e){f=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(f)throw d}}var k=!0,E=!1,T=void 0;try{for(var C,R=e.runs[Symbol.iterator]();!(k=(C=R.next()).done);k=!0){var Z=C.value;Z.fileParam||u.push({runner:Z})}}catch(e){E=!0,T=e}finally{try{k||null==R.return||R.return()}finally{if(E)throw T}}return function(e){e.sort(function(e,n){var t=a(e),r=a(n);return t!==r?t-r:e.runner.interpreter===n.runner.interpreter?0:e.runner.interpreter?-1:1})}(u),u}function a(e){var n,t,r;return(null===(n=e.runner.id)||void 0===n?void 0:n.startsWith(".replit/"))?0:(null===(t=e.runner.id)||void 0===t?void 0:t.startsWith("module:"))?1:(null===(r=e.runner.id)||void 0===r?void 0:r.startsWith("language:"))?2:3}},14818:function(e,n,t){t.d(n,{X:function(){return o},z:function(){return a}});var r=t(43429),i=r.createContext(null);function o(){return r.useContext(i)}var a=i.Provider},41084:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(89783),i=function(){};function o(e){var n=(0,r.e)(e);return n?n.delegateTooltip:i}},89783:function(e,n,t){t.d(n,{e:function(){return o}});var r=t(43429),i=t(14818);function o(e){var n=(0,i.X)(),t=(0,r.useCallback)(function(t){null==n||n.setStepTargetElement(e,t)},[e,null==n?void 0:n.setStepTargetElement]);return n&&n.steps.some(function(n){return n.id===e})?{delegateTooltip:t,isActive:!n.isLoading&&!n.isDone&&n.activeStep.id===e,activeStep:n.activeStep,done:n.done,goto:n.goto,id:n.id,isDone:n.isDone,isLoading:n.isLoading,next:n.next,prev:n.prev,restart:n.restart,steps:n.steps}:null}},30376:function(e,n,t){t.d(n,{Z:function(){return g}});var r=t(23026),i=t(3194),o=t(45903),a=t(25e3),u=t(2543),l=t(8182),c=t(48900),s=t(56596),f=t(29287),d=t(43429),p=t(63009),h=t(33212),v=function(e){"use strict";(0,i._)(t,e);var n=(0,u._)(t);function t(){var e;return(0,r._)(this,t),e=n.apply(this,arguments),e.state={hasErrored:!1,error:null,errorInfo:null},e}var o=t.prototype;return o.componentDidCatch=function(e,n){this.setState({hasErrored:!0,error:e,errorInfo:n}),this.props.handleError(e,n),h.error(e)},o.render=function(){if(this.state.hasErrored){var e,n,t;return(0,l.tZ)(s.G,{css:[f.l0.font.code,f.l0.p(16),{whiteSpace:"pre",overflow:"hidden",color:"white"},f.l0.backgroundColor.blurpleDefault,f.l0.height("100%")],children:(0,l.tZ)(s.G,{children:null!==(t=null===(n=this.state)||void 0===n?void 0:null===(e=n.error)||void 0===e?void 0:e.stack)&&void 0!==t?t:"An unknown error occurred."})})}return this.props.children},t}(d.Component);function g(e){var n=e.bsod,t=void 0!==n&&n,r=e.sentry,i=void 0===r||r,u=e.handleError,s=e.children,f=e.origin,d=void 0===f?"ErrorBoundary: (no origin provided)":f,h=e.tags,g=void 0===h?{}:h,m=e.extras,y=void 0===m?{}:m,b=(0,p.uV)();return(0,l.tZ)(v,{handleError:function(e,n){t?b({error:e,extras:(0,a._)((0,o._)({},y),{errorInfo:n}),tags:(0,a._)((0,o._)({},g),{errorBoundary:!0}),origin:d}):i&&c.$e(function(t){t.setTag("errorBoundary",!0),t.setTags(g),t.setExtra("errorInfo",n),t.setExtras(y),c.Tb(e)}),u&&u(e,n)},children:s})}},80259:function(e,n,t){t.d(n,{fA:function(){return i},pl:function(){return a},zf:function(){return o}});var r=t(43208);function i(e,n){var t=n.commands;return{data:e,match:n.match,commands:t}}function o(e){var n=e.defaultScore,t=void 0===n?1:n;return function(e){var n=e.search,i=e.data,o=e.active;if("group"===i.type)return null;if(!n&&o||!n)return{score:t};var a=r.Z.match(n,i.label);return a?{score:a.score,render:{ranges:a.ranges}}:null}}var a=o({defaultScore:1})},31384:function(e,n,t){t.d(n,{xV:function(){return J},du:function(){return C},av:function(){return V}});var r=t(39698),i=t(45903),o=t(8182),a=t(79530),u=t(38003),l=t(62624),c=t(31950),s=t(93918),f=t(1415),d=t(38080),p=t(29287),h=t(43429),v=t(92153),g=t(90234),m=t(15859),y=t(32477),b=t(71999),w=t(66368),x=(0,h.createContext)(null);function S(){var e=(0,h.useContext)(x);if(!e)throw Error("Expected store in context");return e}function k(e){return(0,b.Dv)(e,{store:S()})}function E(e){return(0,w.b)(e,S())}var T=function(e){return(0,b.b9)(e,{store:S()})};function C(e){var n=(0,y._)((0,h.useState)(function(){return(0,g.MT)()}),1)[0];return(0,o.tZ)(x.Provider,{value:n,children:e.children})}var R=(0,t(91608).$)(["display","visibility","transform","maxHeight","width"]),Z=R.cssVars,D=R.styleTokens,P=(0,g.cn)(null),_=(0,g.cn)("default"),I=(0,g.cn)({command:null,offset:{x:0,y:0},visible:!1}),A=(0,m.kv)(I,function(e){return e.offset}),L=(0,m.kv)(I,function(e){return e.command}),N=(0,m.kv)(I,function(e){return e.visible}),O=(0,m.kv)(P,function(e){var n;return null!==(n=null==e?void 0:e.initial)&&void 0!==n?n:null}),M=(0,g.cn)(function(e){var n=e(A);if(!n)return null;var t=n.y,r=window.innerHeight-t,i=e(O),o=null!==i?i-r:0;return o>0&&(t=Math.max(16,t-Math.min(200,o))),t}),B=(0,g.cn)(function(e){var n=e(A);if(!n)return null;var t=n.x,r=window.innerWidth,i=e(F),o=t+(null!=i?i:q)-r+16;return o>0&&(t=Math.max(16,t-o)),t}),G=(0,g.cn)(function(e){var n=e(B),t=e(M);return null==n||null===t?null:(0,r._)({},Z.transform,"translate(".concat(n,"px, ").concat(t,"px)"))}),F=(0,g.cn)(null),q=180,z=(0,g.cn)(function(e){var n=e(F);return(0,r._)({},Z.width,(null===n?q:n)+"px")}),U=(0,g.cn)(function(e){var n=e(M);return null===n?null:(0,r._)({},Z.maxHeight,"calc(100vh - ".concat(p.TV.space16," - ").concat(n,"px)"))}),W=(0,g.cn)(null,function(e,n){n(P,null),n(F,null),n(H,null),n(I,function(e){return(0,v.ZP)(e,function(e){e.visible=!1,e.command=null})})}),H=(0,g.cn)(null),X=(0,g.cn)(null,function(e,n,t){if(n(_,t.background),t.width&&n(F,t.width),t.target){var r=t.target.getBoundingClientRect(),i={x:r.x,y:r.y+r.height+8};n(H,r),n(I,function(e){return(0,v.ZP)(e,function(e){e.command=t.command,e.offset=i,e.visible=!0})});return}n(I,function(e){return(0,v.ZP)(e,function(e){e.command=t.command,e.offset=t.offset,e.visible=!0})})});function V(){var e=T(X),n=(0,d.nZ)({elevated:!0});return{openContextMenu:(0,h.useCallback)(function(t){e(t.target instanceof HTMLElement?{command:t.command,target:t.target,width:t.width,background:n}:{command:t.command,offset:t.target,target:null,width:t.width,background:n})},[e,n]),onContextMenu:(0,h.useCallback)(function(t,r){var i=r.command,o=r.width;t.preventDefault(),e({command:i,offset:{x:t.clientX,y:t.clientY},target:null,width:o,background:n})},[e,n])}}var j=(0,s.X)({surface:[p.l0.shadow(3),p.l0.borderRadius(8),p.l0.position.absolute,{top:0,left:0,border:"1px solid",borderColor:p.TV.outlineDefault,maxWidth:"min(500px, calc(100vw - ".concat(p.TV.space16,"))"),minWidth:"min(100px, calc(100vw - ".concat(p.TV.space16,"))"),maxHeight:D.maxHeight,width:D.width,transform:D.transform,visibility:D.visibility,display:D.display}]});function K(){var e=k(H);return e?(0,o.tZ)("div",{style:{position:"fixed",width:e.width,height:e.height,top:e.y,left:e.x}}):null}var J=(0,h.memo)(function(e){var n=e.fontSize,t=T(W),s=k(L),p=E(N),v=(0,h.useRef)(function(){});(0,h.useEffect)(function(){var e=function(e){if(e){var n;null===(n=v.current)||void 0===n||n.call(v);return}};return e(p.current),p.subscribe(e)},[p]);var g=T(P),m=(0,h.useRef)(null);(0,h.useEffect)(function(){var e=function(e){var n;e.target instanceof HTMLElement&&(null===(n=m.current)||void 0===n?void 0:n.contains(e.target))||t()},n=function(){t()},r=function(t){t?(window.addEventListener("blur",n),document.addEventListener("pointerdown",e)):(window.removeEventListener("blur",n),document.removeEventListener("pointerdown",e))},i=p.subscribe(r);return function(){i(),r(!1)}},[p,t]);var y=E(G);(0,c.j)(m,y),(0,c.j)(m,E(U)),(0,c.j)(m,p,function(e){var n;return n={},(0,r._)(n,Z.visibility,e?"visible":"hidden"),(0,r._)(n,Z.display,e?"flex":"none"),n});var b=E(z);(0,c.j)(m,b);var w=(0,l.Z)(),x=k(N)&&!w,S=k(_),C=(0,i._)({},y.current,b.current);return s?(0,o.BX)(f.h,{children:[(0,o.tZ)(K,{}),(0,o.tZ)(a.MT,{autoFocus:x,restoreFocus:!0,contain:!0,children:(0,o.tZ)(d.Tg,{onKeyDown:function(e){"Escape"===e.key&&t()},innerRef:m,css:j.surface,style:C,background:S,children:(0,o.tZ)(u.X,{iconBreadcrumbs:!0,command:s,onAction:t,onSelect:t,onTotalHeightChange:g,focusRef:v,fontSize:void 0===n?14:n,compact:!0})})})]}):null})},30965:function(e,n,t){t.d(n,{Z:function(){return h}});var r=t(8182),i=t(51384),o=t(47507),a=t(29287),u=t(56596),l=t(39756),c=t(43429),s=t(96179),f=t(49932),d=(0,i.iv)([a.l0.justify.center,a.l0.pl(8),{overflow:"hidden",height:"100%",width:"100%","> svg":{opacity:.5,width:250,display:"flex"}}]);function p(e){var n=e.index,t=32*n+8;return(0,r.BX)(r.HY,{children:[(0,r.tZ)("rect",{x:0,y:t,rx:"3",ry:"3",width:16,height:16}),(0,r.tZ)("rect",{x:28,y:t,rx:"3",ry:"3",width:"".concat(100+(n%2!=0?-10*n:10*n)),height:16})]})}function h(e){var n=e.path,t=n===l.Ql,i=t?5:1;c.useEffect(function(){var e=o.kg.timeStart({isRootPath:t});return function(){e("time to load filetree folder")}},[t,n]);var a="fileTreeLoader-"+Math.random().toString();return(0,r.tZ)(u.G,{css:d,children:(0,r.tZ)(s.Z,{speed:2,backgroundColor:f.TV.backgroundHighest,foregroundColor:f.TV.backgroundHigher,height:32*i,width:250,viewBox:"0 0 250 ".concat(32*i),uniqueKey:a,children:Array(i).fill(null).map(function(e,n){return(0,r.tZ)(p,{index:n},n)})})})}},6033:function(e,n,t){t.d(n,{st:function(){return y}});var r,i,o=t(45903),a=t(25e3),u=t(8182),l=t(43429),c=t(13900),s=t(63130),f=t(95891),d=t(56596),p=t(74833),h=t(29287),v=t(93496);t(51384),t(13090),t(76588);var g=t(25425),m=t(38080);(r=i||(i={})).AddFile="AddFile",r.AddFolder="AddFolder",r.UploadFile="UploadFile",r.UploadFolder="UploadFolder",r.DownloadZip="DownloadZip",r.Duplicate="Duplicate",r.ShowHiddenFiles="ShowHiddenFiles",r.HideHiddenFiles="HideHiddenFiles",r.OpenTab="OpenTab",r.OpenPane="OpenPane",r.CopyLink="CopyLink",r.CopyFilePath="CopyFilePath",r.CopyFolderPath="CopyFolderPath",r.OpenShellHere="OpenShellHere",r.Rename="Rename",r.Download="Download",r.Delete="Delete",r.OpenWith="OpenWith";var y={AddFile:{type:"AddFile",text:"Add file"},AddFolder:{type:"AddFolder",text:"Add folder"},UploadFile:{type:"UploadFile",text:"Upload file"},UploadFolder:{type:"UploadFolder",text:"Upload folder"},DownloadZip:{type:"DownloadZip",text:"Download as zip"},Duplicate:{type:"Duplicate",text:"Duplicate file"},ShowHiddenFiles:{type:"ShowHiddenFiles",text:"Show hidden files"},HideHiddenFiles:{type:"HideHiddenFiles",text:"Hide hidden files"},OpenTab:{type:"OpenTab",text:"Open tab"},OpenPane:{type:"OpenPane",text:"Open pane"},CopyFilePath:{type:"CopyFilePath",text:"Copy file path"},CopyFolderPath:{type:"CopyFolderPath",text:"Copy folder path"},CopyLink:{type:"CopyLink",text:"Copy link"},OpenShellHere:{type:"OpenShellHere",text:"Open shell here"},Rename:{type:"Rename",text:"Rename"},Download:{type:"Download",text:"Download"},Delete:{type:"Delete",text:"Delete"}};h.l0.position.relative,h.l0.width(16),h.l0.height(16);var b={self:[h.l0.position.relative,h.l0.width(20),h.l0.height("100%"),h.l0.justify.center,{"& span":{height:"100%"}}],self2:[h.l0.position.relative,h.l0.width(16),h.l0.height("100%"),h.l0.justify.center,h.l0.pr(1)],button:[h.l0.display.flex,h.l0.align.center,h.l0.justify.center,h.l0.py(2),h.l0.top(0),h.l0.width("100%"),h.l0.border({width:0,color:"none"}),h.l0.cursor.pointer,h.l0.color.foregroundDimmest,h.l0.borderRadius(4),v.gU.filled,h.l0.position.relative,{top:-1,right:-1,height:"calc(100% + 2px)",backgroundColor:"transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}],button2:[h.l0.display.flex,h.l0.align.center,h.l0.py(2),h.l0.width("100%"),h.l0.height("100%"),h.l0.cursor.pointer,h.l0.color.foregroundDimmest,h.l0.focusRing,h.l0.borderRadius(4),{backgroundColor:"transparent",":hover":{color:h.TV.foregroundDefault}}],list:[h.l0.flex.column,h.l0.justify.center,h.l0.borderRadius(8),h.l0.zIndex(1),h.l0.backgroundColor.backgroundDefault,{listStyle:"none"},{":focus":{outline:"none"}}],option:function(e,n){return[h.l0.color.foregroundDefault,h.l0.p(8),h.l0.fontWeight.normal,h.l0.cursor.pointer,{whiteSpace:"nowrap"},n&&[h.l0.backgroundColor.backgroundHigher],e&&[{":hover":{backgroundColor:h.TV.accentNegativeDefault},":hover .option-label":{color:h.TV.white}}]]},optionLabel:function(e){return e?[h.l0.color.accentNegativeStronger]:[]}};function w(e){var n=e.isNegative,t=e.isHighlighted,r=e.children;return(0,u.tZ)(d.G,{css:b.option(n,t),children:(0,u.tZ)(p.xv,{className:"option-label",css:b.optionLabel(n),multiline:!1,children:r})})}var x=d.K.ul,S=d.K.li,k=d.K.button,E=d.K.div,T=l.forwardRef(function(e,n){var t=e.isActive,r=e.actions,i=e.onAction,v=e.onOpenChange,T=l.useRef(!1),C=(0,s.L7)({items:r,onSelectedItemChange:function(e){var n=e.selectedItem;n&&(T.current||i(n),A())}}),R=C.isOpen,Z=C.getToggleButtonProps,D=C.getMenuProps,P=C.highlightedIndex,_=C.getItemProps,I=C.openMenu,A=C.reset;l.useImperativeHandle(n,function(){return{open:I}}),l.useEffect(function(){v&&v(R)},[R,v]);var L=Z(),N=(0,g.P5)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1});return(0,u.tZ)(d.G,{css:N?b.self2:b.self,children:(0,u.BX)(f.Z,{elevated:!0,showArrow:!0,isOpen:R,placement:"right-start",padding:0,onClickOutside:A,children:[(0,u.tZ)(m.Tg,{background:t?"default":"root",css:[h.l0.height("100%"),{background:t?h.TV.backgroundHigher:"transparent",borderTopRightRadius:8,borderBottomRightRadius:8}],children:(0,u.tZ)(k,(0,a._)((0,o._)({},L),{css:N?b.button2:b.button,size:20,onClick:function(e){e.stopPropagation(),L.onClick(e)},children:(0,u.tZ)(c.Z,{})}))}),(0,u.tZ)(E,(0,a._)((0,o._)({},D({},{suppressRefError:!0})),{children:R?(0,u.tZ)(x,{css:b.list,children:r.map(function(e,n){return(0,u.tZ)(S,(0,a._)((0,o._)({"data-cy":"filetree-node-action-".concat(e.type)},_({item:e,index:n,onClick:function(n){T.current=!0,setTimeout(function(){T.current=!1}),i(e),n.stopPropagation()}})),{children:(0,u.tZ)(w,{isHighlighted:P===n,isNegative:e.type===y.Delete.type,children:(0,u.BX)(d.G,{css:[h.l0.rowWithGap(8),h.l0.align.center],children:[(0,u.tZ)(p.xv,{multiline:!1,children:e.text}),"icon"in e?e.icon:null]})})}),e.text)})}):null}))]})})});T.displayName="NodeActionsMenu",n.ZP=T},72676:function(e,n,t){t.d(n,{s:function(){return ra},p:function(){return ro}});var r,i,o,a,u,l,c,s,f,d=t(39698),p=t(21289),h=t(8182),v=t(43429),g=t(71999),m=t(28999),y=t(66368),b=(0,v.createContext)(null);function w(e){return(0,h.tZ)(b.Provider,{value:e.store,children:e.children})}function x(){var e=(0,v.useContext)(b);if(!e)throw Error("Expected store in context");return e}function S(e){return(0,g.Dv)(e,{store:x()})}function k(e){return(0,y.b)(e,x())}var E=function(e){return(0,g.b9)(e,{store:x()})};function T(e){return(0,m.lV)((0,v.useCallback)(function(n){return n(e)},[e]),{store:x()})}var C=t(45903),R=t(25e3),Z=t(32477),D=t(90234),P=t(34142),_=t(87682),I=t(30084),A=t(92153),L=t(39756),N=t(29559),O=t(43778),M=t(37491),B="No files",G="Loading...",F=t(97778);function q(e,n){var t=n.fromIndex;if("next"===n.dir){for(var r=t+1;r<e.length;r++){var i=e[r];if(i&&("dir"===i.type||"file"===i.type))return i}return null}for(var o=t-1;o>=0;o--){var a=e[o];if(a&&("dir"===a.type||"file"===a.type))return a}return null}function z(e,n){return O.nh.includes(n.filename)&&!O.nh.includes(e.filename)?-1:!O.nh.includes(n.filename)&&O.nh.includes(e.filename)?1:O.uP.includes(n.filename)&&!O.uP.includes(e.filename)?-1:!O.uP.includes(n.filename)&&O.uP.includes(e.filename)?1:n.type===I.Tv.Directory&&e.type!==I.Tv.Directory?1:e.type===I.Tv.Directory&&n.type!==I.Tv.Directory?-1:(0,N.IV)(e.filename,n.filename)}function U(e){var n=e.row,t=e.baseDepth;return"dir"===n.type||"file"===n.type||"uploadFile"===n.type?n.path===L.Ql?0:(0,N.U$)(n.path)-1-t:n.dir===L.Ql?0:(0,N.U$)(n.dir)-t}var W=function(e,n){return e===L.Ql?n:e+"/"+n},H=function(e,n){return e===L.Ql&&1===(0,N.U$)(n)||(0,F.pC)(e,n)},X=t(15859),V=(0,D.cn)(new Map),j=(0,D.cn)({width:0,height:0}),K=(0,D.cn)(0),J=(0,D.cn)(null),Y=(0,D.cn)(new Map),Q=(0,D.cn)(function(e){var n;return null!==(n=e(eu).root)&&void 0!==n?n:L.Ql}),$=(0,D.cn)(null),ee=(0,D.cn)(null),en=(0,D.cn)(void 0),et=(0,D.cn)(null,function(e,n,t){e(ec)||n(ee,t)}),er=(0,D.cn)(function(e){var n=e(eu).root,t=void 0===n?L.Ql:n;return t===L.Ql?0:(0,N.U$)(t)}),ei=(0,D.cn)(function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=[],r=0,i=!0,o=!1,a=void 0;try{for(var u,l=(0,p._)(e.values()).sort(function(e,n){return e.index-n.index})[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value,s={height:c.height,y:c.y,cols:[]};if(t.push(s),0!==c.depth){var f=c.depth+n;f>r&&(r=f);for(var d="divider"===c.row.type||"error"===c.row.type||"create"===c.row.type||"emptyDir"===c.row.type?c.row.dir:(0,N.Il)(c.row.path),h=d.split("/"),v=0;v<(0,N.U$)(d);v++){var g=h.slice(0,Number(v+1)).join("/");s.cols.push(g)}}}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}for(var m=new Map,y=n;y<r;y++){var b=[];m.set(y,b);var w=!0,x=!1,S=void 0;try{for(var k,E=t[Symbol.iterator]();!(w=(k=E.next()).done);w=!0){var T=k.value,C=T.cols[y],R=T.y;if(C){var D=b[b.length-1];D&&D.y+D.height===R?D.height+=T.height:b.push({y:R,height:T.height,dir:C,depth:y-n})}}}catch(e){x=!0,S=e}finally{try{w||null==E.return||E.return()}finally{if(x)throw S}}}var P=[],_=!0,I=!1,A=void 0;try{for(var L,O=m[Symbol.iterator]();!(_=(L=O.next()).done);_=!0){var M=(0,Z._)(L.value,2),B=(M[0],M[1]);P.push.apply(P,(0,p._)(B))}}catch(e){I=!0,A=e}finally{try{_||null==O.return||O.return()}finally{if(I)throw A}}return P}(e(Y),e(er))}),eo=(0,D.cn)(!1),ea=(0,D.cn)(null,function(e,n,t){var r=new Map,i=e(eZ),o=e(er),a=!0,u=!1,l=void 0;try{for(var c,s=t.rows[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var f=c.value,d=f.key.toString(),p=i[f.index];if(p){var h=Math.max(0,U({row:p,baseDepth:o}));r.set(f.index,{y:f.start,height:f.size,index:f.index,key:d,depth:h,row:p})}}}catch(e){u=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(u)throw l}}n(Y,r),n(K,t.scrollHeight)}),eu=(0,D.cn)({}),el=(0,X.kv)(eu,function(e){var n;return null!==(n=e.onContextMenu)&&void 0!==n?n:null}),ec=(0,D.cn)(function(e){return!!e(eu).readOnly||!e(eo)}),es=(0,D.cn)(function(e){var n;return null!==(n=e(eu).fontSize)&&void 0!==n?n:14}),ef=function(e,n){if("divider"===n)switch(e){case 10:return 28;case 12:case 13:case 14:return 38;case 18:return 44;default:return 48}switch(e){case 10:return 18;case 12:case 13:return 24;case 14:return 32;case 18:return 38;default:return 40}},ed=(0,D.cn)(function(e){return ef(e(es),"file")}),ep=function(e){switch(e){case 10:case 12:return 12;case 13:case 14:return 16;case 18:return 20;default:return 24}},eh=(0,D.cn)(function(e){return ep(e(es))}),ev=(0,D.cn)(function(e){return 14>e(es)?4:8}),eg=(0,D.cn)(function(e){return 14>=e(es)?4:8}),em=(0,D.cn)(function(e){return 13===e(es)?6:16>e(es)?4:8}),ey=function(e){switch(e){case 10:return 10;case 12:case 13:case 14:return 12;case 18:return 14;default:return 18}},eb=function(e){switch(e){case 10:return 12;case 12:case 13:return 16;case 14:return 24;case 18:return 32;default:return 40}},ew=(0,D.cn)(function(e){return eb(e(es))}),ex=(0,D.cn)(function(e){return ey(e(es))}),eS=function(e){switch(e){case 10:case 12:case 13:return 10;case 14:case 18:return 16;default:return 20}},ek=(0,D.cn)(function(e){return eS(e(es))}),eE=(0,D.cn)(new Map);function eT(e){var n=e.filename;return O.nh.includes(n)?"Config files":O.uP.includes(n)?"Packager files":null}var eC=(0,D.cn)([]),eR=(0,D.cn)([]),eZ=(0,D.cn)(function(e){var n,t,r=e(eu),i=r.filter,o=r.alwaysShowCreateRow,a=r.root,u=void 0===a?L.Ql:a,l=r.sort,c=r.readOnly;return function(e){var n=e.root,t=void 0===n?L.Ql:n,r=e.dirInfo,i=e.filter,o=e.sort,a=e.getSection,u=e.readOnly,l=e.pendingUploads,c=e.pendingMoves,s=e.pathBeingRenamed,f=e.alwaysShowCreateRow,d=[],h=(null==l?void 0:l.length)?function(e){var n=new Map,t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var u=o.value,l=(0,N.Il)(u.targetPath)||L.Ql,c=n.get(l),s={filename:(0,N.UO)(u.targetPath),progress:u.progress};c?c.push(s):n.set(l,[s])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}(l):null,v=new Map,g=new Map;if(null==c?void 0:c.length){var m=!0,y=!1,b=void 0;try{for(var w,x=c[Symbol.iterator]();!(m=(w=x.next()).done);m=!0){var S=w.value,k=S.from,E=S.to;v.set(k.path,k.type),g.set(E,k.type)}}catch(e){y=!0,b=e}finally{try{m||null==x.return||x.return()}finally{if(y)throw b}}}return!function e(n){var l=r.get(n);if(!(!l||v.has(n))&&l.expanded){if(n===t&&l.loading&&!l.children){d.push({type:"dir",path:n});return}if(l.error){d.push({type:"error",message:l.error.message,dir:n});return}var c=l.children?(0,p._)(l.children):void 0;c&&v.size>0&&(c=c.filter(function(e){return!v.has(W(n,e.filename))}));var m=!0,y=!1,b=void 0;try{for(var w,x=g[Symbol.iterator]();!(m=(w=x.next()).done);m=!0)!function(){var e=(0,Z._)(w.value,2),t=e[0],r=e[1];if(H(n,t)){var i=(0,N.UO)(t);(null==c||!c.some(function(e){return e.filename===i}))&&(c||(c=[]),c.push({filename:i,type:r}))}}()}catch(e){y=!0,b=e}finally{try{m||null==x.return||x.return()}finally{if(y)throw b}}var S=null==h?void 0:h.get(n);if(S){c||(c=[]);var k=!0,E=!1,T=void 0;try{for(var C,R=S[Symbol.iterator]();!(k=(C=R.next()).done);k=!0){var D=C.value,P=D.filename,_=D.progress;c.push({filename:P,type:I.Tv.File,progress:_})}}catch(e){E=!0,T=e}finally{try{k||null==R.return||R.return()}finally{if(E)throw T}}}if(c){if(!l.create&&!S&&c&&0===c.length){d.push({type:u?"emptyDir":"create",dir:n});return}var A=function(e,n){var t=n.getSection,r=[],i=new Map,o=!0,a=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value,f=t(s),d=s.progress?{type:"upload",progress:s.progress,filename:s.filename}:{type:s.type===I.Tv.File?"file":"dir",filename:s.filename};if(!f){r.push(d);continue}var p=i.get(f);if(p){p.push(d);continue}i.set(f,[d])}}catch(e){a=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw u}}var h=!0,v=!1,g=void 0;try{for(var m,y=i[Symbol.iterator]();!(h=(m=y.next()).done);h=!0){var b=(0,Z._)(m.value,2),w=b[0],x=b[1];r.push({type:"divider",label:w}),(0,M.fN)(r,x)}}catch(e){v=!0,g=e}finally{try{h||null==y.return||y.return()}finally{if(v)throw g}}return r}(c.filter(i).sort(o),{getSection:n===L.Ql?a:function(){return null}}),O=-1,B=!0,G=!1,F=void 0;try{for(var q,z=A[Symbol.iterator]();!(B=(q=z.next()).done);B=!0)!function(){var t=q.value;if("error"===t.type||"emptyDir"===t.type)throw Error("Expected dir, file, or divider row");if("divider"===t.type)return -1===O&&(O=d.length),d.push({type:"divider",dir:n,label:t.label});var i=W(n,t.filename);if("dir"===t.type){var o={type:"dir",path:i};s===i&&(o.rename=!0),g.has(i)&&(o.pending=!0);var a=null==h?void 0:h.get(i);if(a&&(o.uploadProgress=a.map(function(e){return e.progress})),d.push(o),!r.get(i))return;e(i)}else if("upload"===t.type)d.push({type:"uploadFile",path:i,progress:t.progress});else if(!S||!S.some(function(e){return e.filename===t.filename})){var u={type:"file",path:i};s===i&&(u.rename=!0),g.has(i)&&(u.pending=!0),d.push(u)}}()}catch(e){G=!0,F=e}finally{try{B||null==z.return||z.return()}finally{if(G)throw F}}if(l.create||f){var U={type:"create",dir:n,fileType:l.create?l.create:void 0};-1===O?d.push(U):d.splice(O,0,U)}}}}(t),d}({root:u,dirInfo:e(eE),filter:i,sort:void 0===l?z:l,readOnly:void 0!==c&&c,getSection:eT,pendingUploads:e(eC),pathBeingRenamed:null!==(n=e(ee))&&void 0!==n?n:void 0,pendingMoves:null!==(t=e(eR))&&void 0!==t?t:void 0,alwaysShowCreateRow:o})}),eD=(0,D.cn)(function(e){var n=e(J);if(!n)return null;var t=e(eZ).findIndex(function(e){return("file"===e.type||"dir"===e.type)&&e.path===n});return -1!==t?t:null}),eP=(0,D.cn)(null,function(e,n,t){var r,i=e(eD),o=e(J);if((null===(r=document.activeElement)||void 0===r?void 0:r.tagName)!=="INPUT"&&null!==i&&null!==o){var a=e(eZ);switch(t.key){case"ArrowDown":t.preventDefault();var u=q(a,{dir:"next",fromIndex:i});((null==u?void 0:u.type)==="dir"||(null==u?void 0:u.type)==="file")&&n(J,u.path);return;case"ArrowUp":t.preventDefault();var l=q(a,{dir:"previous",fromIndex:i});((null==l?void 0:l.type)==="dir"||(null==l?void 0:l.type)==="file")&&n(J,l.path);return;case"ArrowLeft":case"ArrowRight":t.preventDefault();var c=e(eE).get(o);if(!c)return;"ArrowLeft"===t.key&&c.expanded?n(eA,o):"ArrowRight"!==t.key||c.expanded||n(eN,o);return;case"Enter":case" ":if("Enter"===t.key&&!e(ec))return;if(e(eE).has(o)){n(eO,o);return}e(eu).onFileSelect({event:t,path:o,type:"keydown"});return}}}),e_=(0,D.cn)(null,function(e,n,t){var r;t.path===(null!==(r=e(eu).root)&&void 0!==r?r:L.Ql)&&n(eo,!0),n(eE,function(e){return(0,A.ZP)(e,function(e){var n=t.path===L.Ql?null:t.path+"/",r=!0,i=!1,o=void 0;try{for(var a,u=t.children[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l,c=a.value,s=n?n+c.filename:c.filename,f=e.get(s);if(c.type!==I.Tv.Directory){f&&(null===(l=f.disposeWatcher)||void 0===l||l.call(f),e.delete(s));continue}f||e.set(s,{expanded:!1})}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}var d=e.get(t.path);d&&(d.children=t.children,d.loading=!1,d.error=void 0)})})}),eI=(0,D.cn)(null,function(e,n,t){var r;t.path===(null!==(r=e(eu).root)&&void 0!==r?r:L.Ql)&&n(eo,!0),n(eE,function(e){return(0,A.ZP)(e,function(e){var n,r=e.get(t.path);r&&(r.loading=!1,r.error=t.error,null===(n=r.disposeWatcher)||void 0===n||n.call(r),r.disposeWatcher=null)})})}),eA=(0,D.cn)(null,function(e,n,t){var r=Array.isArray(t)?t:[t];n(eE,function(e){return(0,A.ZP)(e,function(e){var n=!0,t=!1,i=void 0;try{for(var o,a=r[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,l=e.get(u);l&&(l.expanded=!1,l.loading=!1,l.disposeWatcher&&(l.disposeWatcher(),l.disposeWatcher=null))}}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}})})}),eL=(0,D.cn)(null,function(e,n,t){n(eE,function(e){return(0,A.ZP)(e,function(e){var n,r=e.get(t);r&&(null===(n=r.disposeWatcher)||void 0===n||n.call(r),e.delete(t))})})}),eN=(0,D.cn)(null,function(e,n,t){var r=Array.isArray(t)?t:[t],i=e(eu).fs;n(eE,function(e){return(0,A.ZP)(e,function(e){var t=!0,o=!1,a=void 0;try{for(var u,l=r[Symbol.iterator]();!(t=(u=l.next()).done);t=!0)!function(){var t,r=u.value,o=null!==(t=e.get(r))&&void 0!==t?t:{expanded:!0};e.has(r)?o.expanded=!0:e.set(r,o),o.disposeWatcher?o.disposeWatcher():o.loading=!0,o.disposeWatcher=i.watchDir(r,{onError:function(e){return n(eI,{path:r,error:e})},onChange:function(e){return n(e_,{path:r,children:e})},onMoveOrDelete:function(){return n(eL,r)}})}()}catch(e){o=!0,a=e}finally{try{t||null==l.return||l.return()}finally{if(o)throw a}}})})}),eO=(0,D.cn)(null,function(e,n,t){var r=e(eE).get(t);if(!r){n(eE,function(e){return(0,A.ZP)(e,function(e){e.set(t,{expanded:!1})})}),n(eN,t);return}n(r.expanded?eA:eN,t)}),eM=(0,D.cn)(function(e){return e(eu).manageWidth?e(eo)?function(e){var n=e.rows,t=e.baseDepth,r=[],i=new Map,o=!0,a=!1,u=void 0;try{for(var l,c=n[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value,f=function(e){var n=e.row,t=U({row:n,baseDepth:e.baseDepth});switch(n.type){case"file":case"dir":case"uploadFile":return{text:(0,N.UO)(n.path),depth:t};case"error":return{text:n.message,depth:t};case"divider":return{text:n.label,depth:t};case"create":case"emptyDir":return{text:B,depth:t}}}({row:s,baseDepth:t}),d=f.depth,p=f.text,h=i.get(d);if(!h){i.set(d,new Map([[s.type,p]]));continue}var v=h.get(s.type);v&&(null==v?void 0:v.length)>p.length||h.set(s.type,p)}}catch(e){a=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw u}}var g=!0,m=!1,y=void 0;try{for(var b,w=i[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var x=(0,Z._)(b.value,2),S=x[0],k=x[1],E=!0,T=!1,C=void 0;try{for(var R,D=k[Symbol.iterator]();!(E=(R=D.next()).done);E=!0){var P=(0,Z._)(R.value,2),_=P[0],I=P[1];r.push({depth:S,type:_,text:I})}}catch(e){T=!0,C=e}finally{try{E||null==D.return||D.return()}finally{if(T)throw C}}}}catch(e){m=!0,y=e}finally{try{g||null==w.return||w.return()}finally{if(m)throw y}}return r}({rows:e(eZ),baseDepth:e(er)}):[{type:"dir",text:G,depth:1}]:null}),eB=(0,D.cn)(null,function(e,n,t){var r=e(eu).onCreateStart;if(r){r({parentPath:t.parentPath,fileType:t.fileType});return}n(eN,t.parentPath),n(eE,function(e){return(0,A.ZP)(e,function(e){var n=e.get(t.parentPath);n&&(n.create=t.fileType)})}),n(J,null)}),eG=(0,D.cn)(null,function(e,n,t){n(eE,function(e){return(0,A.ZP)(e,function(e){var n=e.get(t);n&&(n.create=void 0)})})}),eF=(0,D.cn)(null,function(e,n,t){var r={path:t.path,type:t.fileType};n(J,r.path),n(eW,{node:r}),n(eE,function(e){return(0,A.ZP)(e,function(e){var n=e.get(t.parentPath);n&&(n.create=void 0)})}),r.type===I.Tv.Directory&&n(eN,r.path)}),eq=(0,D.cn)(new Map),ez=(0,D.cn)(null),eU=(0,D.cn)(!0),eW=(0,D.cn)(null,function(e,n,t){var r=t.node,i=t.mode,o=e(eZ),a=e(ez);n(eU,!i),n(eq,function(e){return(0,A.ZP)(e,function(e){!function(e,n){var t=n.node,r=n.rows,i=n.mode,o=n.anchor;if(!i){e.clear(),e.set(t.path,t.type);return}if("multi"===i&&e.has(t.path)){e.delete(t.path);return}if("multi"===i){e.set(t.path,t.type);return}var a=t.type===I.Tv.Directory?"dir":"file",u=r.findIndex(function(e){return e.type===a&&e.path===t.path});if(-1!==u){var l=(null==o?void 0:o.type)===I.Tv.Directory?"dir":"file",c=o?r.findIndex(function(e){return e.type===l&&e.path===o.path}):-1;if(-1!==c){var s=c<u?r.slice(c,u+1):r.slice(u,c+1),f=!0,d=!1,p=void 0;try{for(var h,v=r[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){var g=h.value;("file"===g.type||"dir"===g.type)&&(s.includes(g)?e.set(g.path,"file"===g.type?I.Tv.File:I.Tv.Directory):e.delete(g.path))}}catch(e){d=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(d)throw p}}}}}(e,{node:r,rows:o,mode:i,anchor:a})})});var u=e(eq);if(!(u.size>1)){var l=!0,c=!1,s=void 0;try{for(var f,d=u[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var p=(0,Z._)(f.value,2),h=p[0],v=p[1];n(ez,{path:h,type:v})}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}),eH=(0,D.cn)(null,function(e,n){n(eq,new Map),n(eU,!0),n(ez,null)}),eX=(0,D.cn)(null,(r=(0,P._)(function(e,n,t){var r,i,o;return(0,_.Jh)(this,function(a){switch(a.label){case 0:var u;return r=e(eu).fs,[4,Promise.all(t.map((u=(0,P._)(function(e){var n;return(0,_.Jh)(this,function(t){switch(t.label){case 0:return[4,r.readDir(e)];case 1:return[2,(n=t.sent()).error?n:{path:e,children:n.children,error:null}]}})}),function(e){return u.apply(this,arguments)})))];case 1:if((o=(i=a.sent()).filter(function(e){return null!==e.error})).length)return[2,{errors:o}];return n(eE,function(e){return(0,A.ZP)(e,function(e){var n=!0,t=!1,r=void 0;try{for(var o,a=i[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if(u.error)throw Error("Unexpected error");var l=e.get(u.path);if(!l){e.set(u.path,{loading:!1,expanded:!0,children:u.children,error:void 0});continue}l.loading=!1,l.expanded=!0,l.children=u.children,l.error=void 0}}catch(e){t=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}})}),[2,{errors:null}]}})}),function(e,n,t){return r.apply(this,arguments)})),eV=(0,D.cn)(null,(i=(0,P._)(function(e,n,t){var r,i,o,a,u,l,c,s,f;return(0,_.Jh)(this,function(d){switch(d.label){case 0:r=e(eE),i=[],o=!0,a=!1,u=void 0;try{var h;for(l=((h=t.path.split("/")).pop(),[L.Ql].concat((0,p._)(h.map(function(e,n){return h.slice(0,n+1).join("/")}))))[Symbol.iterator]();!(o=(c=l.next()).done);o=!0)s=c.value,null!=(f=r.get(s))&&f.expanded||i.push(s)}catch(e){a=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}if(!i.length)return[3,2];return[4,n(eX,i)];case 1:d.sent(),d.label=2;case 2:return n(eW,{node:t}),[2]}})}),function(e,n,t){return i.apply(this,arguments)})),ej=(0,D.cn)(null),eK=(0,D.cn)(null,function(e,n,t){var r=e(ej);if(r)for(var i=e(eZ),o=0;o<i.length;o++){var a=i[o];if(("file"===a.type||"dir"===a.type)&&a.path===t&&r.getVirtualItems()[o]){r.scrollToIndex(o);break}}});function eJ(e,n){if(n===e.path)return!1;var t=n+"/"+(0,N.UO)(e.path);return!(t===e.path||(0,F.yr)(e.path,n)||(0,F.yr)(t,e.path))}var eY=(0,D.cn)(null,(o=(0,P._)(function(e,n,t){var r,i,o,a,u,l,c,s;return(0,_.Jh)(this,function(f){var d,p,h,v,g,m,y,b;switch(f.label){case 0:if(i=null==(r=e(eE).get(t.to))?void 0:r.children)return[3,2];return[4,e(eu).fs.readDir(t.to)];case 1:if((o=f.sent()).error)return[2];i=o.children,f.label=2;case 2:if(!i)throw Error("Expected children");if(d=t.nodes,p=t.to,h=i,a=d.reduce(function(e,n){var t=(0,N.UO)(n.path),r=(0,N.Il)(n.path),i=null==h?void 0:h.find(function(e){return e.filename===t});return i&&(""===r?L.Ql:r)!==p&&e.push({type:i.type,path:p===L.Ql?i.filename:p+"/"+i.filename}),e},[]),v=t.nodes,g=t.to,!(u=(m=(0,N.RQ)(v)).every(function(e){return eJ(e,g)})?m.map(function(e){var n=(0,N.UO)(e.path);return{from:e,to:g===L.Ql?n:g+"/"+n}}):null))return[2];if(l=e(eu).fs,!a.length)return[3,4];if(a.some(function(e){return u.some(function(n){var t=n.from;return(0,F.yr)(e.path,t.path)})}))return[2];if(!t.overwrite)return null==(c=e(eu).onConflicts)||c({type:"move",nodes:t.nodes,to:t.to,conflicts:a}),[2];return[4,Promise.all(a.map((y=(0,P._)(function(e){var n;return(0,_.Jh)(this,function(t){switch(t.label){case 0:return[4,e.type===I.Tv.Directory?l.deleteDir(e.path):l.deleteFile(e.path)];case 1:return[2,(n=t.sent()).error?{error:n.error,node:e}:null]}})}),function(e){return y.apply(this,arguments)})))];case 3:if(f.sent().filter(Boolean).length)return[2];f.label=4;case 4:return n(eR,u),[4,Promise.all(u.map((b=(0,P._)(function(e){var n,t,r;return(0,_.Jh)(this,function(i){switch(i.label){case 0:return n=e.from,t=e.to,[4,n.type===I.Tv.Directory?l.moveDir(n.path,t):l.moveFile(n.path,t)];case 1:return[2,(r=i.sent()).error?{error:r.error,from:n,to:t}:null]}})}),function(e){return b.apply(this,arguments)})))];case 5:if(s=f.sent(),n(eR,[]),s.filter(Boolean).length)return[2];return n(eq,new Map(u.map(function(e){return[e.to,e.from.type]}))),[2]}})}),function(e,n,t){return o.apply(this,arguments)})),eQ=t(41500),e$=t(59173),e0=t(89446);function e1(){return(e1=(0,P._)(function(e){var n,t,r,i,o,a,u,l,c,s,f;return(0,_.Jh)(this,function(d){switch(d.label){case 0:var h;if(n=e.parentPath,t=e.overwrite,r=e.fs,i=e.files,o=e.onStart,a=e.onUpload,u=e.onError,l=e.onDone,i.length>1e6)throw Error("Trying to upload too many files at once.");if(i.reduce(function(e,n){return n.size+e},0)>104857600)throw Error("Total file upload size exceeds maximum limit.");return h=(0,P._)(function(e){var n,i,o,l,c,s,f;return(0,_.Jh)(this,function(d){switch(d.label){case 0:if(n=e.targetPath,i=e.file,o=e.progress,t)return[3,2];return[4,r.stat(n)];case 1:if(d.sent().exists)return u(l={file:i,path:n,error:"ALREADY_EXIST"}),[2,l];d.label=2;case 2:c=null,d.label=3;case 3:return d.trys.push([3,5,,6]),[4,(0,e0.pV)(i)];case 4:return c=d.sent(),[3,6];case 5:return d.sent(),u(s={file:i,path:n,error:"FILE_READ"}),[2,s];case 6:return f=eQ.Z.from(c),[4,r.transferFile(n,f,function(e,n){o.current=n/e})];case 7:return d.sent(),a({file:i,path:n}),[2,{path:n,file:i}]}})}),c=function(e){return h.apply(this,arguments)},o(s=i.map(function(e){var t=e.dirPath||e.webkitRelativePath||e.name;return{targetPath:n?n+"/"+t:t,progress:(0,e$.u)(0),file:e}})),[4,Promise.all(s.map(c))];case 1:return f=d.sent(),l({parentPath:n,uploads:f.filter(function(e){return!("error"in e)}),errors:f.reduce(function(e,n){return"error"in n?(0,p._)(e).concat([n]):e},[])}),[2]}})})).apply(this,arguments)}(a=l||(l={})).AlreadyExists="ALREADY_EXIST",a.FileRead="FILE_READ",a.Network="NETWORK";var e2=t(47507),e4=(0,D.cn)(null,(u=(0,P._)(function(e,n,t){var r,i,o,a,u,l,c,s,f;return(0,_.Jh)(this,function(d){switch(d.label){case 0:if(r=e(eu).fs,i=t.parentPath||L.Ql,a=null==(o=e(eE).get(i))?void 0:o.children,t.files.length>1e6)return t.onError("Trying to upload too many files at once. Please try again with fewer files."),[2];if(a)return[3,2];return[4,r.readDir(i)];case 1:if((u=d.sent()).error)return[2];a=u.children,d.label=2;case 2:var h;if(!a)throw Error("Expected children");if(l=(0,p._)(new Set(t.files.map(function(e){return e.dirPath?e.dirPath.split("/")[0]:e.name}))),(s=(c=a.filter(function(e){return l.some(function(n){return n===e.filename})})).length?c.map(function(e){return{path:i===L.Ql?e.filename:i+"/"+e.filename,type:e.type}}):null)&&!t.overwrite)return null==(f=e(eu).onConflicts)||f({type:"upload",files:t.files,to:i,conflicts:c.map(function(e){return{path:i===L.Ql?e.filename:i+"/"+e.filename,type:e.type}})}),[2];if(!s)return[3,4];return[4,Promise.all(s.map((h=(0,P._)(function(e){var n;return(0,_.Jh)(this,function(t){switch(t.label){case 0:return[4,e.type===I.Tv.Directory?r.deleteDir(e.path):r.deleteFile(e.path)];case 1:return[2,(n=t.sent()).error?{error:n.error,node:e}:null]}})}),function(e){return h.apply(this,arguments)})))];case 3:if(d.sent().filter(Boolean).length)return[2];d.label=4;case 4:return function(e){e1.apply(this,arguments)}({parentPath:t.parentPath,files:t.files,fs:r,onStart:function(e){n(eC,function(n){return(0,A.ZP)(n,function(n){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var u=o.value;n.push(u)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}})})},onUpload:function(e){n(eC,function(n){return(0,A.ZP)(n,function(n){var t=n.findIndex(function(n){return n.targetPath===e.path});-1!==t&&n.splice(t,1)})})},onError:function(e){n(eC,function(n){return(0,A.ZP)(n,function(n){var t=n.findIndex(function(n){return n.targetPath===e.path});-1!==t&&n.splice(t,1)})})},onDone:function(e){var n=e.errors,t=e.parentPath;if(!n.length){e2.kg.info("Successfully uploaded files",{uploadSource:"filetree",parentPath:t});return}}}),[2]}})}),function(e,n,t){return u.apply(this,arguments)})),e3=t(7444),e9=t(55534),e8=t(92809),e5=t(11516),e6=t(69451),e7=t.n(e6),ne=t(36617),nn=e8.Type.Enum(I.Tv),nt=e8.Type.Object({filename:e8.Type.String({minLength:1}),type:nn}),nr=e8.Type.Object({scrollOffset:e8.Type.Number({minimum:0}),dirInfo:e8.Type.Record(e8.Type.String(),e8.Type.Object({expanded:e8.Type.Boolean(),children:e8.Type.Array(nt)}))});function ni(e){return"repl:workspace:filetree:"+e}var no=e8.Type.Array(e8.Type.String()),na="repl:workspace:filetree:savedKeys",nu=(0,X.kv)(eu,function(e){return e.localCacheKey?ni(e.localCacheKey):null}),nl=(0,D.cn)(null,function(e){var n=e(eu),t=n.localCacheKey,r=n.filter;if(t){var i=null!==(f=null===(s=e(ej))||void 0===s?void 0:s.scrollOffset)&&void 0!==f?f:0,o=e(eE),a=!1,u=!0,l=!1,c=void 0;try{for(var s,f,d,p=o[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var h=(0,Z._)(d.value,2)[1].children;if(a=!!(null==h?void 0:h.length))break}}catch(e){l=!0,c=e}finally{try{u||null==p.return||p.return()}finally{if(l)throw c}}if(a){var v=function(e,n){var t={dirInfo:Object.create(null),scrollOffset:e.scrollOffset},r=!0,i=!1,o=void 0;try{for(var a,u=e.dirInfo[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=(0,Z._)(a.value,2),c=l[0],s=l[1],f=s.expanded,d=s.children;if(d){var p=d.filter(n);p.length&&(t.dirInfo[c]={expanded:f,children:p})}}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return t}({dirInfo:o,scrollOffset:i},r),g=ni(t),m=(k=e5.Z.get(na),ne.B4.Check(no,k)?k:null);if(m){var y=m.filter(function(e){return e!==g});y.unshift(g);var b=y.splice(20),w=!0,x=!1,S=void 0;try{for(var k,E,T=b[Symbol.iterator]();!(w=(E=T.next()).done);w=!0){var C=E.value;e5.Z.remove(C)}}catch(e){x=!0,S=e}finally{try{w||null==T.return||T.return()}finally{if(x)throw S}}e5.Z.set(na,y)}else e5.Z.set(na,[g]);return e5.Z.set(ni(t),v)}}}),nc=(0,D.cn)(null),ns=(0,D.cn)(null,function(e,n,t){var r=[t];if(!e(eU)){var i=!0,o=!1,a=void 0;try{for(var u,l=e(eq)[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=(0,Z._)(u.value,2),s=c[0],f=c[1];t.path!==s&&r.push({path:s,type:f})}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}}n(nc,(0,N.RQ)(r))});function nf(){return(nf=(0,P._)(function(e,n){return(0,_.Jh)(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(n){return n.type===I.Tv.Directory?e.deleteDir(n.path):e.deleteFile(n.path)}))];case 1:return[2,{error:t.sent().filter(function(e){return e.error}).length?"Something went wrong deleting files":null}]}})})).apply(this,arguments)}var nd=t(29287),np=t(93918),nh=t(56596),nv=t(31950),ng=t(7730),nm=t.n(ng),ny=t(47357),nb=t(58474),nw=t(50199),nx=(0,t(91608).$)(["scrollHeight","fontSize","fontSizeSmall","iconSize","horizontalPadding","borderRadius","gutterWidth","minHeight","iconTextGap","rowWidth","rowHeight","rowLeftIndent","rowY","dropPreviewDepth","dropPreviewHeight","dropPreviewY","dropPreviewOpacity","strokeDashoffset","statusColor","statusBackgroundColor","dirStatusIconSize","nodeBackgroundColor","dragPreviewX","dragPreviewY","contextMenuButtonDisplay"]),nS=nx.cssVars,nk=nx.styleTokens,nE={paddingLeft:nk.horizontalPadding,paddingRight:nk.horizontalPadding},nT={"&& svg":{minWidth:nk.iconSize,minHeight:nk.iconSize,width:nk.iconSize,height:nk.iconSize}},nC=[nd.l0.truncate,{fontSize:nk.fontSize}],nR=t(86533),nZ=t(95571);function nD(e){var n=e.fileName,t=e.parentPath,r=t===L.Ql?"":t+"/",i=r+n,o=i.split("/");return{pathPrefix:r,newFilePath:i,segments:o}}function nP(e){return n_.apply(this,arguments)}function n_(){return(n_=(0,P._)(function(e){var n,t,r,i,o,a,u,l,c,s,f,d,p,h,v,g,m,y,b;return(0,_.Jh)(this,function(w){switch(w.label){case 0:if(n=e.fileName,t=e.parentPath,r=e.fs,n.startsWith("/"))return[2,"File names cannot include forward slashes"];o=(i=nD({fileName:n,parentPath:t})).pathPrefix,a=i.newFilePath,u=i.segments,l=!0,c=!1,s=void 0,w.label=1;case 1:w.trys.push([1,7,8,9]),f=Object.entries(u)[Symbol.iterator](),w.label=2;case 2:if(l=(d=f.next()).done)return[3,6];if(h=(p=(0,Z._)(d.value,2))[0],v=p[1],g=Number(h),m=[],g!==u.length-1)return[3,4];return[4,r.stat(a)];case 3:w.sent().exists&&m.push((0,N.UO)(a)),w.label=4;case 4:if(!(y=(0,nR.z)({fileName:v,siblingNames:m,parentPath:o+u.slice(0,g).join("/")})))return[3,5];return[2,y];case 5:return l=!0,[3,2];case 6:return[3,9];case 7:return b=w.sent(),c=!0,s=b,[3,9];case 8:try{l||null==f.return||f.return()}finally{if(c)throw s}return[7];case 9:return[2,null]}})})).apply(this,arguments)}function nI(e){var n=nD({fileName:e.fileName,parentPath:e.parentPath}),t=n.pathPrefix,r=n.segments,i=!0,o=!1,a=void 0;try{for(var u,l=Object.entries(r)[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=(0,Z._)(u.value,2),s=c[0],f=c[1],d=Number(s),p=(0,nR.z)({fileName:f,siblingNames:[],parentPath:t+r.slice(0,d).join("/")});if(p)return p}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return null}function nA(e,n){return e.shiftKey?"bulk":"altKey"===n&&e.altKey||"cmdOrCtrlKey"===n&&(0,nZ.j)(e)?"multi":void 0}var nL=(0,D.cn)(null,function(e,n,t){var r=t.event,i=t.path;n(J,i);var o=e(eu).multiselectModifierKey;n(eW,{node:{path:i,type:I.Tv.Directory},mode:o?nA(r,o):void 0}),n(J,i),r.shiftKey||r.altKey||(0,nZ.j)(r)||n(eO,i)});function nN(){return{fontSize:k(es),fontSizeSmall:k(ex),iconSize:k(eh),scrollHeight:k(K),horizontalPadding:k(ev),borderRadius:k(eg),gutterWidth:k(ek),minHeight:k(ed),iconTextGap:k(em)}}function nO(e){return S((0,nw.Z)(function(){return(0,X.kv)(J,function(n){return n===e?0:-1})},[e]))}function nM(e){return S((0,nw.Z)(function(){return(0,X.kv)(Y,function(n){var t,r=n.get(e);return r?{style:(t={},(0,d._)(t,nS.rowHeight,r.height+"px"),(0,d._)(t,nS.rowY,r.y+"px"),(0,d._)(t,nS.rowLeftIndent,"calc(".concat(r.depth," * ").concat(nk.gutterWidth,")")),t),depth:r.depth}:void 0},nm())},[e]))}function nB(e){var n=e.index,t=e.path,r=(0,v.useRef)(null),i=k(J);return(0,v.useEffect)(function(){var e=function(e){var n;null===(n=r.current)||void 0===n||n.setAttribute("tabIndex",e.toString())},o=function(r){if(!r){e(0===n?0:-1);return}e(r===t?0:-1)};return o(i.current),i.subscribe(o)},[i,t,n]),(0,v.useEffect)(function(){var e=function(e){null!==n&&clearTimeout(n),e===t&&document.activeElement!==r.current&&(n=setTimeout(function(){var e;null===(e=r.current)||void 0===e||e.focus()},50))},n=null;e(i.current);var o=i.subscribe(e);return function(){null!==n&&clearTimeout(n),o()}},[i,t]),[r,E(J)]}var nG=t(57468),nF=t(50451),nq=t(39028),nz=t(88936),nU=t(75296),nW=t(20573),nH=t(93496),nX=t(74833),nV=t(93049),nj=t(22487),nK=t(27592),nJ={name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var n=e.state;n.styles.popper.width="".concat(n.rects.reference.width,"px")},effect:function(e){var n=e.state;n.elements.reference instanceof HTMLElement&&(n.elements.popper.style.width="".concat(n.elements.reference.offsetWidth,"px"))}},nY=t(8279),nQ=t(1415),n$=t(38080),n0=t(2581),n1=t(69119),n2=(0,X.kv)(eu,function(e){return e.autocomplete}),n4=(0,np.X)({icon:[nT,{marginRight:nk.iconTextGap}],item:[nE,nd.l0.flex.row,nd.l0.align.center,nH.gU.listItem,{height:nk.rowHeight}],text:[nC,nd.l0.flex.growAndShrink(1)]});function n3(e){var n=e.id,t=e.items,r=e.activeIndex,i=e.onSuggestion,o=e.fileType,a=e.innerRef;return(0,h.tZ)(nh.G,{tag:"ul",id:n,"aria-label":"Suggestions",innerRef:a,children:t.map(function(e,n){var t=n===r;return(0,h.BX)(nh.G,{id:e.value,tag:"li",role:"option","aria-selected":t,style:{backgroundColor:t?nH.vb.interactiveBackground:void 0,color:t?nd.TV.foregroundDefault:nd.TV.foregroundDimmer},onClick:function(){return i(e.value)},css:n4.item,children:[(0,h.tZ)(nh.G,{css:n4.icon,children:o===I.Tv.Directory?(0,h.tZ)(nF.Z,{}):(0,h.tZ)(nG.Z,{path:e.value})}),(0,h.tZ)(n1.x,{css:n4.text,text:e.value,highlight:e.highlight,dimmed:!t})]},e.value)})})}var n9=[nk.horizontalPadding,nk.iconSize,nk.iconTextGap].join(" + "),n8=[nH.gU.filled,{height:"100%",width:"100%",paddingLeft:"calc(".concat(n9,")"),paddingRight:nk.horizontalPadding,fontSize:nk.fontSize}],n5=(0,np.X)({root:[nd.l0.flex.row,nE,{padding:nk.horizontalPadding}],icon:[nT,nd.l0.color.accentNegativeDefault,{marginRight:nk.iconTextGap}],text:[{fontSize:nk.fontSize},nd.l0.color.foregroundDimmer,nd.l0.flex.growAndShrink(1)]});function n6(e){return(0,h.BX)(nh.G,{css:n5.root,children:[(0,h.tZ)(nh.G,{css:n5.icon,children:(0,h.tZ)(nW.Z,{})}),(0,h.tZ)(nh.G,{css:n5.text,children:e.message})]})}var n7=(0,np.X)({root:[nd.l0.position.relative,nd.l0.flex.growAndShrink(1),{height:"100%"}],icon:[nT,nd.l0.position.absolute,nd.l0.left(nk.horizontalPadding),nd.l0.top("50%"),{transform:"translateY(-50%)"}],input:n8,inputLoading:[n8,nY.p.backgroundPulse()],menu:[nd.l0.overflow("hidden"),{borderRadius:nk.borderRadius,border:"1px solid",borderColor:nd.TV.outlineDefault}],label:[nd.l0.visuallyHidden]});function te(e){var n,t,r,i,o,a,u,l,c,s,f,p=(0,v.useId)(),g=(0,v.useId)(),m=(n=(0,v.useRef)(null),t=nN(),(0,nv.j)(n,t.fontSize,function(e){return(0,d._)({},nS.fontSize,e+"px")}),(0,nv.j)(n,t.iconTextGap,function(e){return(0,d._)({},nS.iconTextGap,e+"px")}),(0,nv.j)(n,t.borderRadius,function(e){return(0,d._)({},nS.borderRadius,e+"px")}),(0,nv.j)(n,t.horizontalPadding,function(e){return(0,d._)({},nS.horizontalPadding,e+"px")}),(0,nv.j)(n,t.iconSize,function(e){return(0,d._)({},nS.iconSize,e+"px")}),(0,nv.j)(n,t.fontSize,function(e){return(0,d._)({},nS.rowHeight,ef(e,"file")+"px")}),(0,nv.j)(n,t.iconTextGap,function(e){return(0,d._)({},nS.iconTextGap,e+"px")}),i=(r=(0,Z._)((0,v.useState)(null),2))[0],o=r[1],u=(a=(0,Z._)((0,v.useState)(null),2))[0],l=a[1],s=(c=(0,n0.D)(i,u,{modifiers:[{name:"offset",options:{offset:[0,4]}},nJ],placement:"bottom-start"})).styles,f=c.attributes,{menuRef:(0,nV.l)(n,l),menuAnchorRef:o,styles:s.popper,attributes:f.popper}),y=function(e){var n=e.onSuggestion,t=e.siblings,r=e.value,i=S(n2),o=(0,Z._)((0,v.useState)({items:[],activeIndex:null}),2),a=o[0],u=o[1],l=(0,e3.Z)(t),c=(0,e3.Z)(r),s=(0,Z._)((0,v.useTransition)(),2)[1],f=i?function(e){s(function(){var n=i(e);u(function(e){return(0,A.ZP)(e,function(e){e.items=n.filter(function(e){return e.value!==c.current&&!l.current.some(function(n){return n.filename===e.value})})})})})}:null;function d(){u({items:[],activeIndex:null})}return{items:a.items.length?a.items:null,activeIndex:a.activeIndex,query:f,onKeyDown:function(e){if("Enter"===e.key){var t=null!==a.activeIndex?a.items[a.activeIndex]:null;if(!t)return;return e.preventDefault(),n(t.value),d(),!0}return"ArrowDown"===e.key?(e.preventDefault(),u(function(e){return(0,A.ZP)(e,function(e){if(null===e.activeIndex||e.activeIndex>e.items.length-1){e.activeIndex=0;return}e.activeIndex++})}),!0):"ArrowUp"===e.key?(e.preventDefault(),u(function(e){return(0,A.ZP)(e,function(e){if(null===e.activeIndex){e.activeIndex=e.items.length-1;return}if(0===e.activeIndex){e.activeIndex=null;return}e.activeIndex--})}),!0):void 0},clear:d}}({onSuggestion:e.onSuggestion,siblings:e.siblings,value:e.value}),b=T(ej),w=(0,Z._)((0,v.useState)(!0),2),x=w[0],k=w[1],E=(0,v.useRef)(null);(0,v.useEffect)(function(){if(E.current){var e,n=null===(e=b())||void 0===e?void 0:e.scrollElement;if(n)return(0,nK.j)(E.current,function(){return k(!0),function(){return k(!1)}},{root:n})}},[b]);var D=x&&!!(e.error||y.items),P=y.items&&y.activeIndex?y.items[y.activeIndex]:void 0,_=!e.error&&y.items?y.items:null,L=(0,v.useRef)(null),N=y.clear,O=(0,nj.Z)(function(e){var n;null!==(n=L.current)&&void 0!==n&&n.contains(e.target)||N()},[N]);return(0,h.BX)(h.HY,{children:[(0,h.tZ)("label",{css:n7.label,htmlFor:p,children:"file name"}),(0,h.BX)(nh.G,{css:n7.root,innerRef:(0,nV.l)(L,m.menuAnchorRef),children:[(0,h.tZ)(nh.G,{css:n7.icon,children:e.fileType===I.Tv.Directory?(0,h.tZ)(nF.Z,{}):(0,h.tZ)(nG.Z,{path:e.value})}),(0,h.tZ)("input",{spellCheck:!1,"aria-controls":y.query?g:void 0,"aria-expanded":y.items?"true":"false","aria-activedescendant":null==P?void 0:P.value,role:y.query?"combobox":void 0,id:p,ref:(0,nV.l)(e.inputRef,E),css:e.loading?n7.inputLoading:n7.input,value:e.value,onChange:e.loading?void 0:function(n){var t;e.onChange(n),null===(t=y.query)||void 0===t||t.call(y,{input:n.currentTarget.value,fileType:e.fileType,type:e.type,siblings:e.siblings})},onKeyDown:function(n){y.onKeyDown(n)||e.onKeyDown(n)},onBlur:e.onBlur})]}),(0,h.tZ)(nQ.h,{children:(0,h.BX)(n$.Tg,(0,R._)((0,C._)({css:n7.menu,elevated:!0,innerRef:m.menuRef,style:(0,R._)((0,C._)({},m.styles),{display:D?"block":"none"})},m.attributes),{children:[e.error?(0,h.tZ)(n6,{message:e.error}):null,_?(0,h.tZ)(n3,{id:g,innerRef:O,items:_,activeIndex:y.activeIndex,onSuggestion:function(n){e.onSuggestion(n),N()},fileType:e.fileType}):null]}))})]})}var tn=(0,np.X)({createFilePicker:[nd.l0.align.center,nd.l0.rowWithGap(4),{fontSize:nk.fontSize,paddingRight:nk.horizontalPadding,paddingLeft:nk.horizontalPadding}],button:[nd.l0.reset.button,nd.l0.p(2),nH.gU.filled,nd.l0.color.foregroundDimmer,{fontSize:"inherit"}],text:[nC,nd.l0.color.foregroundDimmest],label:[nd.l0.visuallyHidden]});function tt(e){var n,t,r,i,o,a,u,l,c,s,f,d,p,g,m,y,b,w,x,k,C,R=(n=e.dir,r=E(eB),i=E(eG),o=E(eF),u=(a=(0,Z._)((0,v.useState)(""),2))[0],l=a[1],c=T(eu),f=(s=(0,Z._)((0,v.useState)(!1),2))[0],d=s[1],g=(p=(0,Z._)((0,v.useState)(null),2))[0],m=p[1],y=(0,nw.Z)(function(){return(0,X.kv)(eE,function(e){return e.get(n)})},[n]),b=(0,nw.Z)(function(){return(0,X.kv)(y,function(e){var n;return null!==(n=null==e?void 0:e.create)&&void 0!==n?n:null})},[y]),w=S((0,nw.Z)(function(){return(0,X.kv)(y,function(e){var n;return null!==(n=null==e?void 0:e.children)&&void 0!==n?n:null})},[y])),x=S(b),k=(0,P._)(function(e){var t,r,i,a,u,s,f,p;return(0,_.Jh)(this,function(h){switch(h.label){case 0:if(!x)return[2];if(i=c().fs,a=null,0!==e.length)return[3,1];return a="File names cannot be empty",[3,4];case 1:if(!e.includes("/"))return[3,3];return[4,nP({fileName:e,parentPath:n,fs:i})];case 2:return a=h.sent(),[3,4];case 3:a=(0,nR.z)({fileName:e,siblingNames:null!==(u=null==w?void 0:w.map(function(e){return e.filename}))&&void 0!==u?u:[],parentPath:n}),h.label=4;case 4:if(a)return m(a),[2];if(f=(s=n===L.Ql?null:n+"/")?s+e:e,d(!0),x!==I.Tv.Directory)return[3,6];return[4,i.createDir(f)];case 5:return p=h.sent(),[3,8];case 6:return[4,i.writeFile(f,new eQ.Z(""))];case 7:p=h.sent(),h.label=8;case 8:if(p.error)return m("Something went wrong"),[2];return d(!1),l(""),o({parentPath:n,path:f,fileType:x}),null===(t=(r=c()).onCreate)||void 0===t||t.call(r,{path:f,type:x}),[2]}})}),!(C=g)&&u.includes("/")?C=nI({fileName:u,parentPath:n}):C||(C=(0,nR.z)({fileName:u,siblingNames:null!==(t=null==w?void 0:w.map(function(e){return e.filename}))&&void 0!==t?t:[],parentPath:n})),{value:u,setValue:l,fileType:x,create:function(e){return k.apply(this,arguments)},creating:f,error:C,cancel:(0,nw.Z)(function(){return function(){return i(n)}},[n,i]),start:(0,nw.Z)(function(){return function(e){return r({parentPath:n,fileType:e})}},[n,r]),siblings:w}),D=(0,v.useRef)(null);return((0,v.useEffect)(function(){var e;R.fileType&&(null===(e=D.current)||void 0===e||e.focus())},[R.fileType]),R.fileType)?(0,h.tZ)(te,{siblings:R.siblings||[],type:"create",inputRef:D,loading:R.creating,error:R.error,value:R.value,fileType:R.fileType,onBlur:function(e){if(""===e.currentTarget.value){R.cancel();return}R.create(e.currentTarget.value)},onChange:function(e){R.setValue(e.currentTarget.value)},onKeyDown:function(e){if("Escape"===e.key){R.cancel();return}"Enter"===e.key&&R.create(e.currentTarget.value)},onSuggestion:function(e){R.setValue(e),R.create(e)}}):(0,h.tZ)(tr,{create:R.start})}function tr(e){return(0,h.BX)(nh.G,{css:tn.createFilePicker,children:[(0,h.tZ)(nh.G,{css:tn.text,children:"Add a"}),(0,h.tZ)(nh.G,{tag:"button",css:tn.button,onClick:function(){return e.create(I.Tv.File)},children:"file"}),(0,h.tZ)(nh.G,{css:tn.text,children:"or "}),(0,h.tZ)(nh.G,{tag:"button",css:tn.button,onClick:function(){return e.create(I.Tv.Directory)},children:"folder"})]})}var ti=t(77510),to=t(96606),ta=t(24725),tu=t(83311),tl=t(72282),tc=t.n(tl),ts=t(73097),tf=t(38927),td=t(48796),tp=t(54888),th=t.n(tp);function tv(e,n,t){return Math.floor(Math.min(n,Math.max(e,t)))}var tg=(0,D.cn)(0),tm=(0,D.cn)(null),ty=(0,D.cn)(function(e){var n=e(tm);if(null===n)return null;var t=e(Y),r=-1!==n?t.get(n):null;return r&&r.depth>0||(null==r?void 0:r.row.type)==="dir"?function(e,n){var t=e.get(n);if(!t)return null;var r=0,i=t.height,o="dir"===t.row.type?t.depth+1:t.depth;if("dir"===t.row.type)o=t.depth+1,r=t.y;else{o=t.depth;for(var a=n-1;a>=0;a--){var u=e.get(a);if(!u)break;if("dir"===u.row.type&&("file"===t.row.type||"uploadFile"===t.row.type?H(u.row.path,t.row.path):u.row.path===t.row.dir)){i+=u.height,r=u.y;break}u.depth>=t.depth&&(i+=u.height)}}for(var l=n+1;l<e.size;l++){var c=e.get(l);if(!c||c.depth<=("dir"===t.row.type?t.depth:t.depth-1))break;i+=c.height}return{y:r,height:i,depth:o}}(t,n):{y:e(tg),depth:1,height:e(j).height-8}}),tb="(".concat(nk.dropPreviewDepth," - 1) * ").concat(nk.gutterWidth),tw=(0,np.X)({root:[nd.l0.position.absolute,nd.l0.top(0),nd.l0.left(0),nd.l0.borderRadius(8),{pointerEvents:"none",transform:"translate(calc(".concat(tb,"), ").concat(nk.dropPreviewY,")"),width:"calc(100% - ".concat(tb,")"),height:nk.dropPreviewHeight,opacity:nk.dropPreviewOpacity,outline:"1px dashed ".concat(nk.statusColor),outlineOffset:-1}]}),tx=(0,v.memo)(function(){var e=k(ty),n=k(tP),t=k(tD),r=(0,v.useRef)(null);(0,nv.j)(r,e,function(e){var n,t,r,i;return i={},(0,d._)(i,nS.dropPreviewY,(null!==(n=null==e?void 0:e.y)&&void 0!==n?n:0)+"px"),(0,d._)(i,nS.dropPreviewHeight,(null!==(t=null==e?void 0:e.height)&&void 0!==t?t:0)+"px"),(0,d._)(i,nS.dropPreviewDepth,null!==(r=null==e?void 0:e.depth.toString())&&void 0!==r?r:"0"),i}),(0,nv.j)(r,t,function(e){return(0,d._)({},nS.dropPreviewOpacity,e?"1":"0")}),(0,nv.j)(r,n,function(e){return(0,d._)({},nS.statusColor,e?nd.TV.accentPrimaryDefault:nd.TV.accentNegativeDefault)});var i=(0,td.T)();return(0,h.tZ)(nh.G,{style:{transition:i?void 0:"transform 140ms, width 140ms, height 140ms, opacity 140ms ease-out 60ms"},innerRef:r,css:tw.root})}),tS=(0,D.cn)(null,function(e,n,t){if(null!==t){var r=!0,i=!1,o=void 0;try{for(var a,u=e(Y)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=(0,Z._)(a.value,2),c=l[0],s=l[1];if(!(t.y<s.y)&&!(t.y>s.y+s.height))return n(tm,c),s}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}n(tm,-1)}}),tk=e8.Type.Object({type:e8.Type.Literal("nodes"),width:e8.Type.Number(),height:e8.Type.Number(),nodes:e8.Type.Array(e8.Type.Object({path:e8.Type.String(),type:e8.Type.Enum(I.Tv)}))}),tE=(0,D.cn)(null,function(e,n,t){n(eq,function(e){return(0,A.ZP)(e,function(e){e.set(t.path,t.type)})});var r=[t];if(e(eU))return r;var i=!0,o=!1,a=void 0;try{for(var u,l=e(eq)[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=(0,Z._)(u.value,2),s=c[0],f=c[1];s!==t.path&&r.push({path:s,type:f})}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return r});function tT(e){var n=E(tm),t=E(tE),r=S(ec),i=(0,v.useRef)(null),o=(0,Z._)((0,to.c)({type:e.type,item:function(){var n,r,o=t(e),a=null!==(r=null===(n=i.current)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==r?r:{width:160,height:32};return{nodes:o,type:"nodes",width:a.width,height:a.height}},collect:function(n){var t=n.getItem();return{isDragging:!!((null==t?void 0:t.type)==="nodes"&&t.nodes.some(function(n){return n.path===e.path}))}},end:function(){n(null)}}),3),a=o[0],u=o[1],l=o[2],c=a.isDragging;return(0,ts.K)(l),{isDragging:c,dragRef:r?void 0:u,sizeRef:i}}var tC=(0,np.X)({root:[nd.l0.position.absolute,{left:0,top:0,transform:"translate(".concat(nk.dragPreviewX,", ").concat(nk.dragPreviewY,")"),pointerEvents:"none"}],item:[nd.l0.backgroundColor.backgroundHighest,nd.l0.flex.row,nd.l0.align.center,nd.l0.shadow(3),nE,{height:nk.rowHeight,borderRadius:nk.borderRadius}],icon:[nT,{marginRight:nk.iconTextGap}],text:[nC,nd.l0.flex.growAndShrink(1),{color:nk.statusColor}],count:[nC,nd.l0.backgroundColor.accentPrimaryDimmest,nd.l0.color.accentPrimaryStrongest,nd.l0.fontWeight.medium,nd.l0.position.absolute,nd.l0.left("calc(50% - 4px)"),nd.l0.top("calc(100% - 4px)"),nd.l0.borderRadius("full"),nd.l0.px(4),nd.l0.center,{fontSize:nk.fontSizeSmall}]}),tR=(0,v.memo)(function(e){var n=(0,v.useRef)(null),t=nN(),r=k(tZ);return(0,nv.j)(n,r,function(e){var n;return n={},(0,d._)(n,nS.dragPreviewX,(e?e.x:0)+"px"),(0,d._)(n,nS.dragPreviewY,(e?e.y:0)+"px"),n}),(0,nv.j)(n,t.horizontalPadding,function(e){return(0,d._)({},nS.horizontalPadding,e+"px")}),(0,nv.j)(n,t.fontSize,function(e){return(0,d._)({},nS.fontSize,e+"px")}),(0,nv.j)(n,t.fontSizeSmall,function(e){return(0,d._)({},nS.fontSizeSmall,e+"px")}),(0,nv.j)(n,t.iconSize,function(e){return(0,d._)({},nS.iconSize,e+"px")}),(0,nv.j)(n,t.iconTextGap,function(e){return(0,d._)({},nS.iconTextGap,e+"px")}),(0,nv.j)(n,t.borderRadius,function(e){return(0,d._)({},nS.borderRadius,e+"px")}),(0,nv.j)(n,t.gutterWidth,function(e){return(0,d._)({},nS.gutterWidth,e+"px")}),(0,h.tZ)(nh.G,{innerRef:n,css:tC.root,children:(0,h.BX)(nh.G,{css:tC.item,style:{width:e.width,height:e.height},children:[(0,h.tZ)(nh.G,{css:tC.icon,children:e.type===I.Tv.File?(0,h.tZ)(nG.Z,{path:e.path}):(0,h.tZ)(nF.Z,{})}),(0,h.tZ)(nh.G,{css:tC.text,children:(0,N.UO)(e.path)}),e.count>1?(0,h.tZ)(nh.G,{css:tC.count,children:e.count}):null]})})}),tZ=(0,D.cn)(null);(0,D.cn)(function(e){return null!==e(tZ)});var tD=(0,D.cn)(!1),tP=(0,D.cn)(!1);function t_(){var e=(0,ta.f)(function(e){return{item:e.getItem(),isDragging:e.isDragging(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset()}}),n=e.isDragging,t=e.item,r=e.currentOffset,i=E(tZ);if((0,v.useEffect)(function(){i(r?{x:r.x,y:r.y}:null)},[i,r]),!n||!ne.B4.Check(tk,t))return null;var o=t.nodes,a=t.width,u=t.height,l=(0,Z._)(o,1)[0];return l?(0,tf.createPortal)((0,h.tZ)(tR,{type:l.type,path:l.path,count:o.length,width:a,height:u}),document.body):null}var tI=(0,np.X)({root:[{marginLeft:"auto",paddingLeft:nk.horizontalPadding}],svg:[{transform:"rotate(-90deg)",transformOrigin:"center center","& .inner-circle":{strokeDashoffset:nk.strokeDashoffset}}]});function tA(e){var n=S(es)/2,t=n/2,r=2*t*Math.PI,i=(0,v.useRef)(null);return(0,nv.j)(i,e.progress,function(e){return(0,d._)({},nS.strokeDashoffset,(r-e*r).toString())}),(0,h.tZ)(nh.G,{innerRef:i,css:tI.root,children:(0,h.BX)("svg",{css:tI.svg,height:2*n,width:2*n,children:[(0,h.tZ)("circle",{fill:nd.TV.backgroundHigher,r:n,cx:n,cy:n}),(0,h.tZ)("circle",{className:"inner-circle",stroke:nd.TV.foregroundDimmest,fill:"transparent",strokeWidth:n,strokeDasharray:r+" "+r,r:t,cx:n,cy:n})]})})}var tL=function(e){return e.reduce(function(e,n){return e+n.current},0)/e.length};function tN(e){var n,t,r,i,o=S(es)/2,a=o/2,u=2*a*Math.PI,l=(n=e.uploadProgress,r=(t=(0,Z._)((0,v.useState)(tL(n)),2))[0],i=t[1],(0,v.useEffect)(function(){var e=[],t=!0,r=!1,o=void 0;try{for(var a,u=n[Symbol.iterator]();!(t=(a=u.next()).done);t=!0){var l=a.value;e.push(l.subscribe(function(){i(tL(n))}))}}catch(e){r=!0,o=e}finally{try{t||null==u.return||u.return()}finally{if(r)throw o}}return function(){e.map(function(e){return e()})}},[n]),r),c=(0,v.useRef)(null);return(0,h.tZ)(nh.G,{innerRef:c,css:tI.root,children:(0,h.BX)("svg",{css:tI.svg,height:2*o,width:2*o,children:[(0,h.tZ)("circle",{fill:nd.TV.backgroundHigher,r:o,cx:o,cy:o}),(0,h.tZ)("circle",{className:"inner-circle",style:(0,d._)({},nS.strokeDashoffset,(u-l*u).toString()),stroke:nd.TV.foregroundDimmest,fill:"transparent",strokeWidth:o,strokeDasharray:u+" "+u,r:a,cx:o,cy:o})]})})}var tO=t(55103),tM=(c={},(0,d._)(c,tO.h.ADDED,"A"),(0,d._)(c,tO.h.UNTRACKED,"A"),(0,d._)(c,tO.h.MODIFIED,"M"),(0,d._)(c,tO.h.DELETED,"D"),(0,d._)(c,tO.h.RENAMED,"R"),(0,d._)(c,tO.h.COPIED,"C"),c),tB=(s={},(0,d._)(s,tO.h.ADDED,nd.TV.greenDimmest),(0,d._)(s,tO.h.UNTRACKED,nd.TV.greenDimmest),(0,d._)(s,tO.h.MODIFIED,nd.TV.yellowDimmest),(0,d._)(s,tO.h.DELETED,nd.TV.redDimmest),(0,d._)(s,tO.h.RENAMED,nd.TV.tealDimmest),(0,d._)(s,tO.h.COPIED,nd.TV.limeDimmest),s),tG=(f={},(0,d._)(f,tO.h.ADDED,nd.TV.greenStrongest),(0,d._)(f,tO.h.UNTRACKED,nd.TV.greenStrongest),(0,d._)(f,tO.h.MODIFIED,nd.TV.yellowStrongest),(0,d._)(f,tO.h.DELETED,nd.TV.redStrongest),(0,d._)(f,tO.h.RENAMED,nd.TV.tealStrongest),(0,d._)(f,tO.h.COPIED,nd.TV.limeStrongest),f);function tF(e){return e===tO.h.ADDED||e===tO.h.UNTRACKED||e===tO.h.MODIFIED||e===tO.h.DELETED||e===tO.h.RENAMED||e===tO.h.COPIED}var tq={color:nk.statusColor,fontSize:nk.fontSizeSmall,minWidth:nk.dirStatusIconSize,height:nk.dirStatusIconSize},tz=(0,np.X)({fileIcon:[nd.l0.fontWeight.bold,nd.l0.px(2),nd.l0.center,tq],directoryCountIcon:[nd.l0.fontWeight.medium,nd.l0.borderRadius(4),nd.l0.px(2),nd.l0.center,tq,{backgroundColor:nk.statusBackgroundColor}]});function tU(e){return(0,h.tZ)(nh.G,{css:tz.fileIcon,children:(0,h.tZ)(nh.G,{children:e.text})})}function tW(e){return(0,h.tZ)(nh.G,{css:tz.directoryCountIcon,children:(0,h.tZ)(nh.G,{children:e.count})})}function tH(e){var n,t,r,i,o,a,u,l,c,s,f,d,p,g,m,y,b,w,x,k,C,R=(0,Z._)((n={path:e.path,type:e.fileType},r=T(eu),o=(i=(0,Z._)((0,v.useState)(null),2))[0],a=i[1],u=(0,N.Il)(n.path)||L.Ql,l=(0,N.UO)(n.path),c=E(ee),s=E(J),d=(f=(0,Z._)((0,v.useState)(l),2))[0],p=f[1],m=(g=(0,Z._)((0,v.useState)(!1),2))[0],y=g[1],b=(0,nw.Z)(function(){return(0,X.kv)(eE,function(e){var n;return null===(n=e.get(u))||void 0===n?void 0:n.children})},[u]),w=d!==l,x=S(b),k=null,w&&d.includes("/")?k=nI({fileName:d,parentPath:u}):w&&(k=(0,nR.z)({fileName:d,siblingNames:null!==(t=null==x?void 0:x.map(function(e){return e.filename}))&&void 0!==t?t:[],parentPath:u})),C=(0,P._)(function(e){var t,i,o,f,d,p,h;return(0,_.Jh)(this,function(v){switch(v.label){case 0:if(k||!e||e===l)return[2];if(t=r().fs,i=null,!e.includes("/"))return[3,2];return[4,nP({fileName:e,parentPath:u,fs:t})];case 1:return i=v.sent(),[3,3];case 2:i=(0,nR.z)({fileName:e,siblingNames:null!==(o=null==x?void 0:x.map(function(e){return e.filename}))&&void 0!==o?o:[],parentPath:u}),v.label=3;case 3:if(i)return a(i),[2];if(y(!0),d=(f=u===L.Ql?null:u+"/")?f+e:e,!((p=(0,N.Il)(d)||L.Ql)!==L.Ql))return[3,6];return[4,t.stat(p)];case 4:if(v.sent().exists)return[3,6];return[4,t.createDir(p)];case 5:v.sent(),v.label=6;case 6:if(n.type!==I.Tv.Directory)return[3,8];return[4,t.moveDir(n.path,d)];case 7:return h=v.sent(),[3,10];case 8:return[4,t.moveFile(n.path,d)];case 9:h=v.sent(),v.label=10;case 10:if(h.error)return a("Something went wrong"),y(!1),[2];return c(null),s(d),[2]}})}),[{canRename:!!d&&w&&!k,value:d,renaming:m,error:o||k,siblings:x},{setValue:p,rename:function(e){return C.apply(this,arguments)},cancel:function(){c(null),s(n.path)}}]),2),D=R[0],A=R[1],O=A.setValue,M=A.rename,B=A.cancel,G=(0,v.useRef)(null),F=(0,v.useRef)(D.value);return(0,v.useEffect)(function(){if(G.current){var e=F.current;if(e){var n=e.lastIndexOf(".");-1===n&&(n=e.length),G.current.focus(),G.current.setSelectionRange(0,n)}}},[]),(0,h.tZ)(te,{siblings:D.siblings?D.siblings.filter(function(n){return n.filename!==(0,N.UO)(e.path)}):[],type:"rename",inputRef:G,loading:D.renaming,error:D.error,value:D.value,fileType:e.fileType,onBlur:function(e){D.canRename?M(e.currentTarget.value):D.error||B()},onChange:function(e){O(e.currentTarget.value)},onKeyDown:function(e){if("Escape"===e.key){B();return}"Enter"!==e.key||(D.canRename?M(e.currentTarget.value):D.error||B())},onSuggestion:function(e){O(e),M(e)}})}var tX=t(13900),tV=[nd.l0.position.absolute,nd.l0.top(0),nd.l0.left(0),{width:"calc(100% - ".concat(nk.rowLeftIndent,")"),height:nk.rowHeight,transform:"translateY(".concat(nk.rowY,")"),marginLeft:nk.rowLeftIndent}],tj=(0,np.X)({divider:(0,p._)(tV).concat([nE,nd.l0.flex.growAndShrink(1),nd.l0.justify.center]),dividerInner:[{borderTop:"1px dashed",borderColor:nd.TV.outlineDimmest,height:"70%",justifyContent:"end"}],dividerText:[nd.l0.truncate,nd.l0.color.foregroundDimmer,{fontSize:nk.fontSizeSmall}],error:(0,p._)(tV).concat([nd.l0.rowWithGap(4),nd.l0.align.center,nE]),emptyDir:(0,p._)(tV).concat([nE,nd.l0.color.foregroundDimmest,nd.l0.justify.center,{paddingLeft:nk.iconSize,paddingRight:nk.horizontalPadding}]),row:(0,p._)(tV).concat([nd.l0.flex.growAndShrink(1),nd.l0.flex.row,nd.l0.align.center,nH.gU.nofill,{backgroundColor:nk.nodeBackgroundColor,borderRadius:nk.borderRadius,cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px "+nd.TV.accentPrimaryDefault,zIndex:1},"@media (hover: hover)":(0,d._)({},nS.contextMenuButtonDisplay,"none"),"&:hover, &:active, &:focus":(0,d._)({},nS.contextMenuButtonDisplay,"flex"),transitionDuration:"0ms"}]),rowContent:[nd.l0.flex.row,nd.l0.align.center,nd.l0.flex.growAndShrink(1),nE],uploadRow:(0,p._)(tV).concat([nd.l0.flex.growAndShrink(1),nd.l0.align.center,nd.l0.flex.row,nd.l0.align.center,nE,nd.l0.border({color:"transparent"}),(0,d._)({backgroundColor:nk.nodeBackgroundColor,borderRadius:nk.borderRadius},nS.statusColor,nd.TV.foregroundDimmer)]),createRow:(0,p._)(tV).concat([nd.l0.justify.center]),icon:[nT,{marginRight:nk.iconTextGap}],fileInput:[nd.l0.flex.row,nd.l0.align.center],text:[nC,nd.l0.flex.growAndShrink(1),{color:nk.statusColor}],emptyDirText:[nC,nd.l0.display.flex,nd.l0.justify.center,nd.l0.flex.growAndShrink(1),{color:nk.statusColor}],contextMenuButton:[nd.l0.reset.button,nd.l0.height("100%"),nd.l0.center,nd.l0.cursor.pointer,nH.gU.filled,nT,{display:nk.contextMenuButtonDisplay,borderRadius:"0 ".concat(nk.borderRadius," ").concat(nk.borderRadius," 0"),transitionDuration:"0ms"}]});function tK(e){var n,t=(n=e.path,S((0,nw.Z)(function(){return(0,D.cn)(function(e){var t;return null!==(t=e(V).get(n))&&void 0!==t?t:null})},[n]))),r=S(ew);return(null==t?void 0:t.length)?(0,h.tZ)(nU.Z,{size:r,activeUsers:t}):null}function tJ(e){var n,t=(n=e.path,S((0,nw.Z)(function(){return(0,D.cn)(function(e){var t=[],r=!0,i=!1,o=void 0;try{for(var a,u=e(V)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=(0,Z._)(a.value,2),c=l[0],s=l[1];if(!(0,F.yr)(n,c))return;t.push.apply(t,(0,p._)(s))}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return t.length?t:null})},[n])));return(null==t?void 0:t.length)?(0,h.tZ)(nU.Z,{activeUsers:t}):null}function tY(e){return(0,h.tZ)(nh.G,{title:"menu",tag:"button",css:tj.contextMenuButton,onClick:e.onClick,children:(0,h.tZ)(tX.Z,{})})}function tQ(e,n){var t=k((0,nw.Z)(function(){return(0,X.kv)(eq,function(e){return e.has(n)})},[n]));(0,nv.j)(e,t,function(e){return(0,d._)({},nS.nodeBackgroundColor,e?nd.TV.backgroundHigher:"transparent")}),(0,v.useEffect)(function(){var n=function(n){e.current&&e.current.setAttribute("aria-selected",n?"true":"false")};return n(t.current),t.subscribe(n)},[e,t,n])}var t$=(0,v.memo)(function(e){var n,t,r,i,o,a,u,l,c,s,f,p=(0,v.useRef)(null),g=nM(e.index),m=S((n=e.path,(0,nw.Z)(function(){return(0,X.kv)(eE,function(e){var t;return!!(null===(t=e.get(n))||void 0===t?void 0:t.expanded)})},[n]))),y=S((t=e.path,(0,nw.Z)(function(){return(0,X.kv)(eE,function(e){var n;return!!(null===(n=e.get(t))||void 0===n?void 0:n.loading)})},[t]))),b=(i=(r=(0,Z._)((0,v.useState)(y),2))[0],o=r[1],(0,v.useEffect)(function(){if(!y){o(!1);return}var e=setTimeout(function(){return o(!0)},500);return function(){clearTimeout(e)}},[y]),i),w=E(et),x=S(Q),k=nO(e.path),T=(a=e.path,u=E(nL),(0,nw.Z)(function(){return function(e){u({event:e,path:a})}},[u,a])),D=(0,Z._)(nB({path:e.path,index:e.index}),2),P=D[0],_=D[1],A=e.path===x&&y,L=A?G:(0,N.UO)(e.path),O=tT({path:e.path,type:I.Tv.Directory}),M=O.dragRef,B=O.sizeRef,q=O.isDragging;tQ(p,e.path);var z=(l=e.path,S((0,nw.Z)(function(){return(0,X.kv)($,function(e){return e?function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=(0,Z._)(a.value,2),c=l[0],s=l[1],f=s.index,d=s.worktree;(0,F.yr)(n,c)&&t.push({path:c,index:f,worktree:d})}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}if(0===t.length)return null;var p=t.every(function(e){return e.index===tO.h.ADDED||e.worktree===tO.h.UNTRACKED})?tO.h.ADDED:tO.h.MODIFIED;if(!tF(p))return null;var h=t.length;return{color:tG[p],backgroundColor:tB[p],count:h}}(e,l):null},nm())},[l]))),U=S(el);return(0,h.BX)(nh.G,{style:(0,R._)((0,C._)({},null==g?void 0:g.style),(f={},(0,d._)(f,nS.statusColor,null!==(c=null==z?void 0:z.color)&&void 0!==c?c:nd.TV.foregroundDimmer),(0,d._)(f,nS.statusBackgroundColor,null==z?void 0:z.backgroundColor),(0,d._)(f,"opacity",q?.1:void 0),f)),tabIndex:k,role:"treeitem","aria-label":L,dataCy:"filetree-entity","aria-expanded":m,"aria-level":(null!==(s=null==g?void 0:g.depth)&&void 0!==s?s:0)+1,css:tj.row,onFocus:function(){return _(e.path)},innerRef:(0,nV.l)(p,P,B,e.pending?void 0:M),onContextMenu:U?function(n){U(n,{path:e.path,type:I.Tv.Directory})}:void 0,onKeyDown:e.pending?void 0:function(n){"Enter"===n.key&&w(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&T(e)},children:[(0,h.BX)(nh.G,{title:e.path,css:tj.rowContent,onClick:e.pending?void 0:T,children:[(0,h.tZ)(nh.G,{css:tj.icon,children:A||b&&!m?(0,h.tZ)(nz.Z,{}):(0,h.tZ)(h.HY,{children:m?(0,h.tZ)(nq.Z,{color:nd.TV.foregroundDimmer}):(0,h.tZ)(nF.Z,{color:nd.TV.foregroundDimmer})})}),(0,h.tZ)(nh.G,{css:tj.text,children:L}),e.uploadProgress?(0,h.tZ)(tN,{uploadProgress:e.uploadProgress}):null,z?(0,h.tZ)(tW,{count:z.count}):null,m?null:(0,h.tZ)(tJ,{path:e.path})]}),U?(0,h.tZ)(tY,{onClick:function(n){U(n,{path:e.path,type:I.Tv.Directory})}}):null]})}),t0=(0,v.memo)(function(e){var n,t,r,i,o,a,u,l,c=(0,v.useRef)(null),s=nM(e.index),f=(n=e.path,t=T(eu),r=E(eW),i=E(J),(0,nw.Z)(function(){return{onClick:function(e){var o=t(),a=o.onFileSelect,u=o.multiselectModifierKey,l=u?nA(e,u):void 0;r({node:{path:n,type:I.Tv.File},mode:l}),i(n),l||a({path:n,event:e,type:"click"})},onDoubleClick:function(e){var r=t().onFileDoubleClick;null==r||r(e,n)}}},[n,t,i,r])),p=f.onClick,g=f.onDoubleClick,m=nO(e.path),y=E(et),b=(0,Z._)(nB({path:e.path,index:e.index}),2),w=b[0],x=b[1],k=(0,N.UO)(e.path),D=tT({path:e.path,type:I.Tv.File}),P=D.dragRef,_=D.sizeRef,A=D.isDragging;tQ(c,e.path);var L=(o=e.path,S((0,nw.Z)(function(){return(0,X.kv)($,function(e){return e?function(e,n){var t=null==e?void 0:e.get(n);if(!t)return null;var r=null;return t.worktree!==tO.h.UNMODIFIED?r=t.worktree:t.index!==tO.h.UNMODIFIED&&(r=t.index),r&&tF(r)?{color:tG[r],text:tM[r]}:null}(e,o):null},nm())},[o]))),O=S(el);return(0,h.BX)(nh.G,{style:(0,R._)((0,C._)({},null==s?void 0:s.style),(l={},(0,d._)(l,nS.statusColor,null!==(a=null==L?void 0:L.color)&&void 0!==a?a:nd.TV.foregroundDimmer),(0,d._)(l,"opacity",A?.1:void 0),l)),tabIndex:m,dataCy:"filetree-entity",css:tj.row,onFocus:function(){return x(e.path)},innerRef:(0,nV.l)(c,w,_,e.pending?void 0:P),role:"treeitem","aria-label":k,"aria-level":(null!==(u=null==s?void 0:s.depth)&&void 0!==u?u:0)+1,onDoubleClick:e.pending?void 0:g,onContextMenu:O?function(n){O(n,{path:e.path,type:I.Tv.File})}:void 0,onKeyDown:e.pending?void 0:function(n){"Enter"===n.key&&y(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&p(e)},children:[(0,h.BX)(nh.G,{title:e.path,css:tj.rowContent,onClick:e.pending?void 0:p,children:[(0,h.tZ)(nh.G,{css:tj.icon,children:(0,h.tZ)(nG.Z,{path:e.path})}),(0,h.tZ)(nh.G,{css:tj.text,children:k}),L?(0,h.tZ)(tU,{text:L.text}):null,(0,h.tZ)(tK,{path:e.path})]}),O?(0,h.tZ)(tY,{onClick:function(n){O(n,{path:e.path,type:I.Tv.File})}}):null]})}),t1=(0,v.memo)(function(e){var n=nM(e.index);return(0,h.tZ)(nh.G,{css:tj.divider,style:null==n?void 0:n.style,role:"treeitem",children:(0,h.tZ)(nh.G,{css:tj.dividerInner,children:(0,h.tZ)(nh.G,{css:tj.dividerText,children:e.label})})})}),t2=(0,v.memo)(function(e){var n=nM(e.index);return(0,h.BX)(nh.G,{css:tj.error,style:null==n?void 0:n.style,role:"treeitem",children:[(0,h.tZ)(nW.Z,{}),(0,h.tZ)(nX.xv,{multiline:!1,children:e.message})]})}),t4=(0,v.memo)(function(e){var n=nM(e.index);return(0,h.tZ)(nh.G,{css:tj.emptyDir,style:null==n?void 0:n.style,role:"treeitem",children:(0,h.tZ)(nh.G,{css:tj.emptyDirText,children:B})})}),t3=(0,v.memo)(function(e){var n=nM(e.index);return(0,h.tZ)(nh.G,{css:tj.createRow,style:null==n?void 0:n.style,role:"treeitem",children:(0,h.tZ)(tt,{dir:e.dir})})}),t9=(0,v.memo)(function(e){var n=nM(e.index),t=(0,N.UO)(e.path);return(0,h.tZ)(nh.G,{style:null==n?void 0:n.style,css:tj.createRow,role:"treeitem","aria-label":t,children:(0,h.tZ)(tH,{path:e.path,fileType:e.fileType})})}),t8=(0,v.memo)(function(e){var n=nM(e.index),t=(0,N.UO)(e.path);return(0,h.BX)(nh.G,{style:null==n?void 0:n.style,css:tj.uploadRow,role:"treeitem","aria-label":t,children:[(0,h.tZ)(nh.G,{css:tj.icon,children:(0,h.tZ)(nG.Z,{path:e.path})}),(0,h.tZ)(nh.G,{css:tj.text,children:t}),(0,h.tZ)(tA,{progress:e.progress})]})}),t5=(0,v.memo)(function(e){var n,t=S((n=e.index,(0,nw.Z)(function(){return(0,D.cn)(function(e){var t,r;return null!==(r=null===(t=e(Y).get(n))||void 0===t?void 0:t.row)&&void 0!==r?r:null})},[n])));return t?"error"===t.type?(0,h.tZ)(t2,{index:e.index,message:t.message}):"divider"===t.type?(0,h.tZ)(t1,{index:e.index,label:t.label}):"emptyDir"===t.type?(0,h.tZ)(t4,{index:e.index}):"create"===t.type?(0,h.tZ)(t3,{index:e.index,dir:t.dir}):"uploadFile"===t.type?(0,h.tZ)(t8,{index:e.index,path:t.path,progress:t.progress}):t.rename?(0,h.tZ)(t9,{index:e.index,path:t.path,fileType:"file"===t.type?I.Tv.File:I.Tv.Directory}):"file"===t.type?(0,h.tZ)(t0,{index:e.index,path:t.path,pending:!!t.pending}):(0,h.tZ)(t$,{index:e.index,path:t.path,pending:!!t.pending,uploadProgress:t.uploadProgress}):null}),t6=[nk.horizontalPadding,nk.rowLeftIndent,nk.iconSize,nk.iconTextGap].join(" + "),t7=(0,np.X)({root:[nd.l0.overflow("hidden"),nd.l0.height(0),{pointerEvents:"none"}],file:[{paddingLeft:"calc(".concat(t6,")"),paddingRight:nk.horizontalPadding}]}),re=(0,v.memo)(function(){var e=S(eM);return e?(0,h.tZ)(nh.G,{css:t7.root,children:e.map(function(e){var n=e.type,t=e.text,r=e.depth,i=(0,d._)({},nS.rowLeftIndent,"calc(".concat(r," * ").concat(nk.gutterWidth,")")),o=n+r;return"divider"===n?(0,h.tZ)(nh.G,{style:i,css:tj.dividerInner,children:(0,h.tZ)(nX.xv,{css:tj.dividerInner,multiline:!1,children:t.toUpperCase()})},o):(0,h.tZ)(nh.G,{css:t7.file,style:i,children:"create"===n?(0,h.tZ)(tr,{create:function(){}}):(0,h.tZ)(nh.G,{css:tj.text,children:t.toUpperCase()})},o)})}):null}),rn=(0,np.X)({content:[nd.l0.p(2),nd.l0.position.relative,{overflowY:"auto",height:"100%",minHeight:nk.minHeight}],scroll:[{position:"relative",height:nk.scrollHeight}],root:[nd.l0.rowWithGap(0),nd.l0.align.center],gutter:[nd.l0.position.absolute,nd.l0.top(0),nd.l0.left(0),nd.l0.reset.button,nd.l0.align.end,nd.l0.cursor.pointer,{width:nk.gutterWidth,"& > div":[nd.l0.height("100%"),nd.l0.width(1),{marginRight:"25%",opacity:.2,backgroundColor:nd.TV.foregroundDimmest}],"&:hover > div":{backgroundColor:nd.TV.accentPrimaryDefault,opacity:1}}]}),rt=(0,v.memo)(function(e){var n,t,r,i,o,a,u,l,c,s,f,g,m,y,b,w,x,k,C,R,D,P,_,A,O,M,B=S(Y),G=nN();(0,nv.j)(e.scrollRef,G.fontSize,function(e){var n;return n={},(0,d._)(n,nS.fontSize,e+"px"),(0,d._)(n,nS.dirStatusIconSize,e+"px"),n}),(0,nv.j)(e.scrollRef,G.fontSizeSmall,function(e){return(0,d._)({},nS.fontSizeSmall,e+"px")}),(0,nv.j)(e.scrollRef,G.iconSize,function(e){return(0,d._)({},nS.iconSize,e+"px")}),(0,nv.j)(e.scrollRef,G.iconTextGap,function(e){return(0,d._)({},nS.iconTextGap,e+"px")}),(0,nv.j)(e.scrollRef,G.horizontalPadding,function(e){return(0,d._)({},nS.horizontalPadding,e+"px")}),(0,nv.j)(e.scrollRef,G.borderRadius,function(e){return(0,d._)({},nS.borderRadius,e+"px")}),(0,nv.j)(e.scrollRef,G.scrollHeight,function(e){return(0,d._)({},nS.scrollHeight,e+"px")}),(0,nv.j)(e.scrollRef,G.gutterWidth,function(e){return(0,d._)({},nS.gutterWidth,e+"px")}),(0,nv.j)(e.scrollRef,G.minHeight,function(e){return(0,d._)({},nS.minHeight,e+"px")});var F=E(eP),q=(n=E(tS),t=E(tm),r=(0,v.useRef)(null),i=(0,v.useRef)(null),o=(0,v.useRef)(null),a=(0,e9.Z)().showError,u=T(tg),l=E(e4),c=E(eY),s=E(tP),f=(0,v.useRef)(null),g=T(eE),m=T(Q),y=E(j),b=E(eN),w=S(ec),k=(x=(0,Z._)((0,ti.L)(function(){return{accept:[I.Tv.File,I.Tv.Directory,tu.FILE],canDrop:function(){return!0},hover:function(e,t){var a=o.current;if(a){i.current&&function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{scrollZoneSize:{w:50,h:50},scrollVelocity:{x:50,y:50},scrollUpdateThrottle:100},r=t.scrollZoneSize,i=t.scrollVelocity,o=t.scrollUpdateThrottle,a=tc()(function(){var t=n.getClientOffset();if(!t)return[0,0];var o=t.x,a=t.y,u=e.getBoundingClientRect(),l=u.x,c=u.y,s=u.width,f=u.height,d=Math.min(s/2,r.w),p=Math.min(f/2,r.h),h=function(e,n){var t=(0,Z._)(n,2),r=t[0],i=t[1];return th()(e,r[0],r[1])?(e-r[1])/(r[1]-r[0]):th()(e,i[0],i[1])?(e-i[0])/(i[1]-i[0]):0};return[h(o,[[l,l+d],[l+s-d,l+s]])*i.x,h(a,[[c,c+p],[c+f-p,c+f]])*i.y]},o,{trailing:!1})();if(a){var u=(0,Z._)(a,2),l=u[0],c=u[1];if(0!==l||0!==c){var s=e.scrollLeft,f=e.scrollTop,d=e.scrollWidth,p=e.scrollHeight,h=e.clientWidth,v=e.clientHeight;requestAnimationFrame(function(){e.scrollTop=tv(0,d-h,s+l),e.scrollTop=tv(0,p-v,f+c)})}}}(i.current,t);var l=t.getClientOffset();if(l){var c=n({x:l.x-a.x,y:l.y-a.y+u()});c?"file"===c.row.type||"uploadFile"===c.row.type?r.current=(0,N.Il)(c.row.path)||L.Ql:"dir"===c.row.type?r.current=c.row.path:r.current=c.row.dir:r.current=m();var d="nodes"!==e.type||(0,N.RQ)(e.nodes).every(function(e){var n;return eJ(e,null!==(n=r.current)&&void 0!==n?n:m())});if(s(d),(null==c?void 0:c.row.type)!=="dir"){f.current&&(clearTimeout(f.current.timer),f.current=null);return}var p=c.row.path;if(f.current){if(f.current.dir===p)return;clearTimeout(f.current.timer),f.current=null}if(d){var h=setTimeout(function(){var e;null!==(e=g().get(p))&&void 0!==e&&e.expanded||b(p)},200);f.current={dir:p,timer:h}}}}},drop:function(e,n){var t,i=null!==(t=r.current)&&void 0!==t?t:m();if("nodes"===e.type){c({to:i,nodes:e.nodes}),r.current=null;return}e.dirContent.then(function(e){if(e.reduce(function(e,n){return n.size+e},0)>104857600){a("Total file upload size exceeds maximum limit. Please try again with smaller files.");return}l({parentPath:i===L.Ql?void 0:i,files:e.filter(Boolean),onError:a})}),r.current=null},collect:function(e){return{isOver:e.isOver()}}}},[]),2))[0].isOver,C=x[1],R=E(tD),(0,v.useEffect)(function(){if(R(k),k){var e,n=null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect();o.current=n?{x:n.x,y:n.y}:null,n&&y({width:n.width,height:n.height});return}f.current&&(clearTimeout(f.current.timer),f.current=null),r.current=null,t(null)},[R,k,t,y]),D=E(tg),(0,v.useEffect)(function(){var e=i.current;if(e){var n=tc()(function(){D(e.scrollTop)},200);return e.addEventListener("scroll",n),function(){n.cancel(),e.removeEventListener("scroll",n)}}},[D]),{dropRef:w?void 0:C,containerRef:i}),z=q.dropRef,U=q.containerRef,W=E(eH),H=S(el),X=S(Q);return _=S(Y),A=E(eK),O=null===(P=S(ez))||void 0===P?void 0:P.path,M=(0,e3.Z)(O),(0,v.useEffect)(function(){M.current=O},[O,M]),(0,v.useEffect)(function(){M.current&&(A(M.current),M.current=void 0)},[_,A,M]),(0,h.BX)(nh.G,{css:rn.content,innerRef:(0,nV.l)(e.scrollRef,z,U),onKeyDown:F,onContextMenu:H?function(e){e.target===e.currentTarget&&H(e,{type:I.Tv.Directory,path:X})}:void 0,onClick:function(e){e.target===e.currentTarget&&W()},children:[(0,h.tZ)(re,{}),(0,h.BX)(nh.G,{css:rn.scroll,role:"tree",children:[(0,p._)(B.values()).map(function(e){var n=e.key,t=e.index;return(0,h.tZ)(t5,{index:t},n)}),(0,h.tZ)(ri,{}),(0,h.tZ)(tx,{}),(0,h.tZ)(t_,{})]})]})}),rr=(0,v.memo)(function(){var e,n,t,r,i,o,a,u,l,c,s,f,d,g,m,y,b,w,x,C,R=(n=(0,v.useRef)(null),t=S(eZ),r=T(eZ),i=T(es),o=(0,nw.Z)(function(){return function(e){var n=r()[e];return n?ef(i(),n.type):0}},[r,i]),a=T(eu),u=k(eD),l=(0,v.useRef)(S(en)),c=(0,ny.MG)({count:t.length,overscan:null!==(e=a().overscan)&&void 0!==e?e:100,getScrollElement:function(){return n.current},getItemKey:function(e){var n=t[e];return n?"error"===n.type?"error:"+n.dir+n.message:"divider"===n.type?"divider:"+n.dir+n.label:"emptyDir"===n.type?"emptyDir:"+n.dir:"create"===n.type?"create:"+n.dir:n.type+":"+n.path:""},estimateSize:o,rangeExtractor:function(e){var n=(0,nb.MK)(e);return null===u.current||n.includes(u.current)||void 0===t[u.current]?n:(0,p._)(n).concat([u.current])}}),(0,v.useEffect)(function(){l.current&&c.scrollToOffset(l.current)},[c,l]),s=E(ea),f=c.getVirtualItems(),d=c.getTotalSize(),(0,v.useEffect)(function(){s({rows:f,scrollHeight:d})},[s,f,d]),g=S(eo),(0,v.useEffect)(function(){if(g){var e=function(e){null!==e&&c.getVirtualItems()[e]&&c.scrollToIndex(e,{align:"auto",behavior:"auto"})};return setTimeout(function(){return e(u.current)}),u.subscribe(e)}},[c,u,g]),m=E(ej),(0,v.useEffect)(function(){m(c)},[m,c]),{scrollRef:n,virtualizer:c}).scrollRef;return y=k(nc),b=T(eu),(0,v.useEffect)(function(){return y.subscribe(function(e){if(e){var n=b().onDeleteNodes;n&&n({nodes:e,confirm:function(){return function(e,n){return nf.apply(this,arguments)}(b().fs,e)}})}})},[b,y]),w=S(nu),x=k(eE),C=E(nl),(0,v.useEffect)(function(){if(w){var e,n,t=null,r=null!==(e=window.requestIdleCallback)&&void 0!==e?e:window.requestAnimationFrame,i=null!==(n=window.cancelIdleCallback)&&void 0!==n?n:window.cancelAnimationFrame,o=e7()(function(){t&&i(t),t=r(C)},1e3),a=x.subscribe(o);return document.addEventListener("visibilitychange",C),document.addEventListener("beforeunload",C),function(){o.cancel(),t&&i(t),document.removeEventListener("visibilitychange",C),document.removeEventListener("beforeunload",C),a(),C()}}},[w,x,C]),(0,h.tZ)(rt,{scrollRef:R})}),ri=(0,v.memo)(function(){var e=S(ei),n=E(eA);return(0,h.tZ)(h.HY,{children:e.map(function(e){return(0,h.tZ)(nh.G,{tag:"button",onClick:function(){return n(e.dir)},css:rn.gutter,style:{height:e.height,transform:"translate(calc(".concat(e.depth," * ").concat(nk.gutterWidth,"), ").concat(e.y,"px)")},children:(0,h.tZ)(nh.G,{})},"gutter"+e.dir+e.depth+e.y)})})});function ro(e){var n,t,r;return n=(0,e9.Z)().showError,t=(0,Z._)((0,v.useState)(function(){var t,r,i,o,a=(0,D.MT)();a.set(eu,e);var u=null!==(t=e.root)&&void 0!==t?t:L.Ql,l=e.localCacheKey?(i=e.localCacheKey,o=e5.Z.get(ni(i)),ne.B4.Check(nr,o)?{dirInfo:new Map(Object.entries(o.dirInfo)),scrollOffset:o.scrollOffset}:null):null;l&&a.set(en,l.scrollOffset);var c=null!==(r=null==l?void 0:l.dirInfo)&&void 0!==r?r:new Map;return c.has(u)||c.set(u,{expanded:!0}),a.set(eE,c),e.focusedPath&&a.set(J,e.focusedPath),{store:a,create:function(e,n){if(n){a.set(eB,{parentPath:n,fileType:e});return}var t=u,r=a.get(ez);(null==r?void 0:r.type)===I.Tv.File?t=(0,N.Il)(r.path)||L.Ql:(null==r?void 0:r.type)===I.Tv.Directory&&(t=r.path),a.set(eB,{parentPath:t,fileType:e})},setPresenceState:function(e){a.set(V,e)},setFileStatus:function(e){a.set($,e)},rename:function(e){a.set(et,e)},move:function(e){a.set(eY,e)},upload:function(e){a.set(e4,(0,R._)((0,C._)({},e),{onError:n}))},onLoad:function(n){var t=e.fs.watchDir(u,{onChange:function(){n({error:null}),t()},onError:function(e){n({error:e}),t()}});return t},select:function(e){return null===e?a.set(eH):a.set(eV,e)},scrollToPath:function(e){return a.set(eK,e)},hasLocalCache:!!l,getChildren:function(e){var n,t;return null!==(t=null===(n=a.get(eE).get(e))||void 0===n?void 0:n.children)&&void 0!==t?t:null},getSelectedNode:function(){return a.get(ez)},getSelectedNodes:function(){return a.get(eq)},deleteNodes:function(e){a.set(ns,e)},collapse:function(e){return a.set(eA,e)},getExpandedDirs:function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.Ql,t=new Set,r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=(0,Z._)(a.value,2),c=l[0],s=l[1];c!==n&&s.expanded&&(n===L.Ql||(0,F.yr)(n,c))&&t.add(c)}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return 0===t.size?null:t}(a.get(eE),e)}}}),1)[0],(0,v.useEffect)(function(){t.store.set(eu,e)},[t.store,e]),(0,v.useEffect)(function(){var e=!0,n=!1,r=void 0;try{for(var i,o=t.store.get(eE)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=(0,Z._)(i.value,2),u=a[0];a[1].expanded&&t.store.set(eN,u)}}catch(e){n=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return function(){var e=!0,n=!1,r=void 0;try{for(var i,o=t.store.get(eE)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a,u=(0,Z._)(i.value,2),l=(u[0],u[1]);null===(a=l.disposeWatcher)||void 0===a||a.call(l)}}catch(e){n=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},[t.store]),r=(0,e3.Z)(e.onLoad),(0,v.useEffect)(function(){return t.onLoad(function(e){var n;return null===(n=r.current)||void 0===n?void 0:n.call(r,e)})},[t,r]),t}function ra(e){return(0,h.tZ)(w,{store:e.store,children:(0,h.tZ)(rr,{})})}},44124:function(e,n,t){t.d(n,{O3:function(){return H},Lw:function(){return X},Ni:function(){return V}});var r=t(45903),i=t(25e3),o=t(32477),a=t(8182),u=t(84731),l=t(1498),c=t(93918),s=t(2454),f=t(32377),d=t(79217),p=t(93496),h=t(3630),v=t(23291),g=t(1415),m=t(38080),y=t(74833),b=t(29287),w=t(56596),x=t(72443),S=t(43429),k=t(4736),E=t(56158),T=t(90513),C=t(75582),R=t(93295),Z=t(23982),D=t(66039);function P(){var e=(0,R._)(["\n  fragment AiModelSelectorCurrenttUser on CurrentUser {\n    id\n    userSubscriptionType\n    userPowerUpsByType {\n      ... on UserPowerUpsTypes {\n        ghostwriter {\n          active\n        }\n      }\n    }\n  }\n"]);return P=function(){return e},e}function _(){var e=(0,R._)(["\n  query AiModelSelector {\n    currentUser {\n      ...AiModelSelectorCurrenttUser\n    }\n  }\n  ","\n"]);return _=function(){return e},e}var I={},A=(0,Z.Ps)(P()),L=(0,Z.Ps)(_(),A),N=t(92920),O=t(68934),M=(0,c.X)({root:[b.l0.rowWithGap(8),b.l0.align.center],left:[b.l0.rowWithGap(2),b.l0.flex.grow(1)],right:[b.l0.width("50%")],rightInline:[b.l0.minWidth(24)],bar:[b.l0.height(6)]});function B(e){var n=e.total-e.used,t=Math.max(0,Math.min(100,Math.round(n/e.total*100)));return(0,a.BX)(w.G,{css:M.root,children:[(0,a.tZ)(w.G,{css:M.left,children:e.used===e.total?(0,a.tZ)(y.xv,{variant:"small",color:"dimmest",children:"No quota left"}):(0,a.BX)(a.HY,{children:[(0,a.BX)(y.xv,{variant:"small",children:[t,"%"]}),(0,a.tZ)(y.xv,{variant:"small",color:"dimmest",children:"left"})]})}),(0,a.tZ)(w.G,{css:e.inline?M.rightInline:M.right,children:(0,a.tZ)(h.J,{css:M.bar,tooltipHidden:!0,current:n,total:e.total,color:b.TV.blurpleDefault})})]})}var G=(0,c.X)({root:[b.l0.rowWithGap(4),b.l0.align.center],title:[{fontFamily:b.TV.fontWeightMedium},b.l0.color.foregroundDefault]});function F(e){return(0,a.BX)(w.G,{css:G.root,children:[e.icon,(0,a.tZ)(y.xv,{css:G.title,variant:"small",children:e.title})]})}var q=(0,c.X)({root:[b.l0.px(8),b.l0.py(12),b.l0.colWithGap(4)],content:[b.l0.colWithGap(0)],header:[b.l0.align.center,b.l0.rowWithGap(4),b.l0.color.foregroundDimmer],headerLeft:[b.l0.rowWithGap(4),b.l0.align.center,b.l0.flex.growAndShrink(1)],proPill:[b.l0.borderRadius(4),b.l0.height(16)]});function z(e){var n=e.selected,t=e.quota,r=e.hasAccessToAdvancedModel,i=(0,u.Q)();return(0,a.BX)(w.G,{css:q.root,children:[(0,a.BX)(w.G,{css:q.content,children:[(0,a.BX)(w.G,{css:q.header,children:[(0,a.tZ)(w.G,{css:q.headerLeft,children:(0,a.tZ)(F,{icon:(0,a.tZ)(s.Z,{size:12}),title:"Basic"})}),n?(0,a.tZ)(f.Z,{}):null]}),(0,a.tZ)(y.xv,{variant:"small",color:"dimmer",children:"Faster. For common tasks like writing boilerplate code or reformatting data."})]}),r?(0,a.BX)(y.xv,{variant:"small",color:"dimmer",children:["Unlimited for ",i]}):(0,a.tZ)(B,{used:t.used,total:t.total})]})}function U(e){var n=e.hasAccessToAdvancedModel,t=e.selected,r=e.quota,i=e.onUpgrade,o=(0,u.Q)();return(0,a.BX)(w.G,{css:q.root,children:[(0,a.tZ)(w.G,{css:q.content,children:(0,a.BX)(w.G,{css:q.header,children:[(0,a.BX)(w.G,{css:q.headerLeft,children:[(0,a.tZ)(F,{icon:(0,a.tZ)(O.Z,{size:12}),title:"Advanced"}),n?null:(0,a.tZ)(v.D,{css:q.proPill,text:o,color:b.TV.foregroundDimmer})]}),t?(0,a.tZ)(f.Z,{}):null]})}),(0,a.tZ)(y.xv,{variant:"small",color:"dimmer",children:"For complex code generation, editing, and explanation. Limited amount per week."}),n?(0,a.tZ)(B,{used:r.used,total:r.total}):(0,a.tZ)(l.zx,{size:"small",text:"Upgrade to Replit ".concat(o),colorway:"blurple",onClick:function(){return i()}})]})}var W=(0,c.X)({button:[b.l0.reset.button,b.l0.rowWithGap(4),b.l0.cursor.pointer,b.l0.align.center,b.l0.px(4),b.l0.py(2),p.gU.nofill,b.l0.color.foregroundDimmest,{"&:hover":b.l0.color.foregroundDefault}],header:[b.l0.p(4)],item:[b.l0.cursor.pointer,p.gU.listItem]});function H(){var e=(0,o._)((0,S.useState)(!1),2),n=e[0],t=e[1],u=(0,k.Tt)(),l=X(),c=(0,o._)(V(),2),f=c[0],h=c[1],v=["basic","advanced"],b=(0,x.L7)({items:v,selectedItem:f,isItemDisabled:function(e){return"advanced"===e&&!l},onSelectedItemChange:function(e){e.selectedItem&&h(e.selectedItem)}}),R=(0,E.w)(),Z=R.setTriggerEl,D=R.setPopoverEl,P=R.attributes,_=R.styles;return(0,a.BX)(a.HY,{children:[(0,a.BX)(w.G,{children:[(0,a.BX)(w.G,(0,i._)((0,r._)({tag:"button",css:W.button},b.getToggleButtonProps({refKey:"innerRef",ref:Z})),{children:["basic"===b.selectedItem?(0,a.BX)(a.HY,{children:[(0,a.tZ)(s.Z,{size:12}),(0,a.tZ)(y.xv,{variant:"small",children:"Basic"})]}):(0,a.BX)(a.HY,{children:[(0,a.tZ)(O.Z,{size:12}),(0,a.tZ)(y.xv,{variant:"small",children:"Advanced"})]}),(0,a.tZ)(d.Z,{rotate:b.isOpen?180:0,size:12})]})),(0,a.tZ)(w.G,(0,i._)((0,r._)({},b.getMenuProps({refKey:"innerRef"})),{children:b.isOpen&&u?(0,a.tZ)(g.h,{children:(0,a.BX)(m.Tg,(0,i._)((0,r._)({elevated:!0,style:_,innerRef:D,css:E.L.popover},P),{children:[(0,a.tZ)(y.xv,{variant:"small",color:"dimmest",css:W.header,children:"Select a model"}),v.map(function(e,n){var o="advanced"===e&&!l,c=b.highlightedIndex!==n||o?void 0:{backgroundColor:p.vb.interactiveBackground};return(0,a.tZ)(w.G,(0,i._)((0,r._)({css:o?void 0:W.item,style:c},b.getItemProps({refKey:"innerRef",item:e,index:n})),{children:"basic"===e?(0,a.tZ)(z,{quota:{used:u.basicModelUsage,total:u.basicModelLimit},selected:"basic"===f,hasAccessToAdvancedModel:l}):(0,a.tZ)(U,{quota:{used:u.advancedModelUsage,total:u.advancedModelLimit},selected:"advanced"===f,hasAccessToAdvancedModel:l,onUpgrade:function(){return t(!0)}})}),e)})]}))}):null}))]}),(0,a.tZ)(T.Z,{isOpen:n,onClose:function(){return t(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"},trial:{context:C.$X.Workspace}}})]})}function X(){var e,n=(e=(0,r._)({},I,void 0),D.a(L,e)).data,t=null==n?void 0:n.currentUser;return!!t&&(t.userSubscriptionType===C.HP.HackerPro||!!((null==t?void 0:t.userPowerUpsByType.__typename)==="UserPowerUpsTypes"&&t.userPowerUpsByType.ghostwriter.active))}function V(){var e=X(),n=(0,N.Z)(),t=n.preferences,r=n.update;return[t.ghostwriterUseAdvancedModel&&e?"advanced":"basic",(0,S.useCallback)(function(e){return r({ghostwriterUseAdvancedModel:"advanced"===e})},[r])]}},56158:function(e,n,t){t.d(n,{L:function(){return c},w:function(){return l}});var r=t(32477),i=t(93918),o=t(43429),a=t(2581),u=t(29287);function l(){var e=(0,r._)((0,o.useState)(null),2),n=e[0],t=e[1],i=(0,r._)((0,o.useState)(null),2),u=i[0],l=i[1],c=(0,a.D)(n,u,{modifiers:[{name:"offset",options:{offset:[0,4]}},{name:"preventOverflow",options:{padding:16}}],placement:"bottom-start"});return{setPopoverEl:l,setTriggerEl:t,attributes:c.attributes.popper,styles:c.styles.popper}}var c=(0,i.X)({popover:[u.l0.borderRadius(4),u.l0.border({color:u.TV.outlineDefault}),u.l0.overflow("hidden"),u.l0.maxWidth(260)]})},98372:function(e,n,t){t.d(n,{S:function(){return u},W:function(){return a}});var r=t(8182),i=t(90234),o=t(43429),a=(0,o.createContext)(void 0);function u(e){var n=e.children,t=(0,o.useRef)();return t.current||(t.current=(0,i.MT)()),(0,r.tZ)(a.Provider,{value:t.current,children:n})}},20766:function(e,n,t){t.d(n,{Cd:function(){return g},KI:function(){return p},Og:function(){return h},Oy:function(){return v},RN:function(){return c},YY:function(){return f},d$:function(){return l},wK:function(){return d}});var r=t(45903),i=t(90234),o=t(92153),a=t(78094),u=(0,i.cn)(!1),l=function(){return(0,a.c1)(u)},c=function(){return(0,a.wM)(u)},s=(0,i.cn)({}),f=(0,i.cn)(null,function(e,n,t){var i=t.id,a=t.debugInfo,u=e(s);n(s,(0,o.ZP)(u,function(e){e[i]||(e[i]={}),e[i]=(0,r._)({},e[i],a)}))}),d=function(e){var n=e.messageId;return(0,a.c1)(s)[n]},p=(0,i.cn)(""),h=function(){return(0,a.c1)(p)},v=(0,i.cn)(""),g=function(){return(0,a.c1)(v)}},83898:function(e,n,t){t.d(n,{Cd:function(){return w.Cd},Gd:function(){return en},J:function(){return et},Og:function(){return w.Og},Qn:function(){return eo},ZT:function(){return J},fr:function(){return ei},gp:function(){return V},kL:function(){return z},qQ:function(){return ea},ql:function(){return ee},zu:function(){return q}});var r,i,o,a,u=t(95867),l=t(34142),c=t(45903),s=t(25e3),f=t(32477),d=t(87682),p=t(48900),h=t(90234),v=t(15859),g=t(30911),m=t.n(g),y=t(45434),b=t(47507),w=t(20766),x=t(66820),S=t(3590),k=t(38382),E=t(59868),T=t(84657),C=t(92153),R=t(29217),Z=t(43429),D=t(28999),P=t(78094),_=t(74997),I=t(14917),A=t(99952),L=t(52590),N=t(90841),O=t(52297),M=t(36617),B=t(44124),G=t(50782),F=t(72129),q=function(){return(0,P.wM)(x.qw)},z=function(){return(0,P.$X)(x.qw)},U=(0,h.cn)(new Set),W=(0,h.cn)(null,function(e,n,t){var r=(0,C.ZP)(e(U),function(e){e.add(t)});n(U,r)}),H=(0,h.cn)(null,function(e,n,t){var r=(0,C.ZP)(e(U),function(e){e.delete(t)});n(U,r)}),X=(0,h.cn)(function(e){return e(U).size>0}),V=function(){return(0,P.c1)(X)};function j(e){return{user:e.attribution,message:e.text}}var K=(0,h.cn)(null,(r=(0,l._)(function(e,n){var t;return(0,d.Jh)(this,function(r){switch(r.label){case 0:if(n(x.mJ),n(x.qw,[]),n(L.r),!(t=e(R.tV)))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.createNewSession()];case 2:return r.sent(),[3,4];case 3:return r.sent(),p.Tb(Error("Unable to initialize Ghostwriter Chat session")),[2];case 4:return[2]}})}),function(e,n){return r.apply(this,arguments)})),J=function(){return(0,P.$X)(K)},Y=(0,h.cn)(null,(i=(0,l._)(function(e,n,t){var r,i,o,a,l,f,p,h,v,g,m,C,Z,D,P,_,I,A,L,N,O,M,B,G,F,q,z,U,W,H,X,V,K,J,Y,Q,$,ee;return(0,d.Jh)(this,function(d){switch(d.label){case 0:r=t.chatInput,i=t.responseId,o=t.timesRegenerated,a=t.modelType,l=t.chatModel,f=t.replId,p=r.chatMessage,h=r.workspaceContext,v=r.messages,g=e(k.yH),m="advanced"===a&&g,C=p.type,Z=p.codeReference,D=h.fileContext,P=h.mostRecentFile,_=e(S.qy),I=e(R.tV),void 0!==(A=e(er))&&(p.action=A),(0,E.j)(E.U3.GHOSTWRITER_CHAT_MESSAGE_SENT,{type:C,model:l,isAdvancedModel:m}),L={id:i,type:C,codeReference:Z,text:"",loading:!0,attribution:"Assistant",model:l,useAdvancedModel:m,timesRegenerated:o},N=new AbortController,n(x.WU,{messageId:i,abortController:N}),d.label=1;case 1:var en,et;if(d.trys.push([1,14,15,16]),n(T.Et,!0),en=v,et=function(e){return!e.loading&&!e.error},O=en.filter(function(e,n){return(!(n<en.length-1)||!!et(en[n+1]))&&et(en[n])&&"feedback"!==en[n].type}).map(j),M=performance.now(),B=void 0,!(0,y.uL)(l))throw Error("Invalid chat model");if(!I)throw Error("Invalid Ghostwriter Chat client");G={fileContext:D,mostRecentFile:P},F=I.sendMessage({body:{chatHistory:O,message:p,model:l,useAdvancedModel:m,sessionId:_,context:G},options:{abortSignal:N.signal}}),q=void 0,z="",U=!1,W=!1,d.label=2;case 2:d.trys.push([2,7,8,13]),X=(0,u._)(F),d.label=3;case 3:return[4,X.next()];case 4:if(!(U=!(V=d.sent()).done))return[3,6];if((K=V.value).intentStreamChunk&&(q=K.intentStreamChunk.intent),K.debugStreamChunk&&(n(w.KI,K.debugStreamChunk.fullPrompt),n(w.YY,{id:i,debugInfo:{fullPrompt:K.debugStreamChunk.fullPrompt}}),n(w.YY,{id:i,debugInfo:{workspaceContext:G}})),B||(B=performance.now()-M,b.kg.time("ghostwriter chat time to first stream",B,{replid:f,chatId:_,chatModel:l,messageId:i,isAdvancedModel:m}),n(w.YY,{id:i,debugInfo:{timeToFirstStream:B}})),!K.responseStreamChunk)return[3,5];Y=(J=K.responseStreamChunk).stopReason,J.stopReason&&(n(w.Oy,J.stopReason),n(w.YY,{id:i,debugInfo:{stopReason:J.stopReason}}),Y=J.stopReason),z+=J.data,L=(0,s._)((0,c._)({},L),{loading:!1,streaming:!Y&&!K.responseStreamChunk.isComplete,text:z,intent:q,inferenceId:K.responseId,useAdvancedModel:m,stopReason:Y}),n(x.Mk,{message:L}),d.label=5;case 5:return U=!1,[3,3];case 6:return[3,13];case 7:return Q=d.sent(),W=!0,H=Q,[3,13];case 8:if(d.trys.push([8,,11,12]),!(U&&null!=X.return))return[3,10];return[4,X.return()];case 9:d.sent(),d.label=10;case 10:return[3,12];case 11:if(W)throw H;return[7];case 12:return[7];case 13:return n(er,void 0),[3,16];case 14:if($=d.sent(),n(T.Et,!1),"AbortError"===$.name)return n(x.Mk,{message:(0,s._)((0,c._)({},L),{aborted:!0,streaming:!1})}),[2];return n(x.b9,{messageId:i,error:$.message}),b.kg.error("ghostwriter chat client response error",{replid:f,chatId:_,chatModel:l,messageId:i,originalError:null!==(ee=null==$?void 0:$.message)&&void 0!==ee?ee:$}),[3,16];case 15:return n(x.mV,{messageId:i}),[7];case 16:return[2]}})}),function(e,n,t){return i.apply(this,arguments)})),Q=(0,h.cn)(null,(o=(0,l._)(function(e,n,t,r){var i,o,a,u,l,c,s,f,p,h,v,g,y,b,w,E,T;return(0,d.Jh)(this,function(d){switch(d.label){case 0:if(i=r.modelType,o=r.chatModel,a=r.replId,u=t.text,l=t.type,c=t.codeReference,s=(null==u?void 0:u.trim())||"",f=e(x.qw),p=m()(),h=m()(),e(k.Rr))return v={id:h,type:l,codeReference:c,loading:!1,text:"AI features are disabled in this team's Repls.",attribution:"Assistant",useAdvancedModel:!1},n(x.OV,{message:v}),[2];return M.B4.Check(O.cZ,t)?n(_.W,t.codeReference.filePath):M.B4.Check(O.FL,t)?n(I.k8,t.codeReference.filePath):M.B4.Check(O.Mx,t)&&n(A.ev,t.codeReference.filePath),0===e(x.qw).length&&n(S.xk,Date.now()),n(W,p),g={id:p,type:l,codeReference:c,text:s,attribution:"Human",timeCreated:new Date},n(x.TC,{message:g}),y={id:h,type:l,codeReference:c,loading:!0,text:"Please wait while I think through your request",attribution:"Assistant",useAdvancedModel:"advanced"===i},n(x.OV,{message:y}),b=e(N.Z1),[4,e(N.r6)(b)];case 1:E={fileContext:(w=d.sent()).ghostwriterFileContext.fileContext,mostRecentFile:w.mostRecentFile},T={type:l,text:s,codeReference:c},d.label=2;case 2:return d.trys.push([2,,4,5]),[4,n(Y,{chatInput:{chatMessage:T,workspaceContext:E,messages:f},responseId:h,modelType:i,chatModel:o,replId:a})];case 3:return d.sent(),[3,5];case 4:return n(H,p),[7];case 5:return[2]}})}),function(e,n,t,r){return o.apply(this,arguments)})),$=(0,h.cn)(null,(a=(0,l._)(function(e,n,t){var r,i,o,a,u,l,c,s,f,p,h,v,g,m,y,w,S,k,E;return(0,d.Jh)(this,function(d){switch(d.label){case 0:if(r=t.responseId,i=t.action,o=t.modelType,a=t.chatModel,u=t.replId,!(s=-1!==(c=(l=e(x.qw)).findIndex(function(e){return e.id===r}))&&"Assistant"===l[c].attribution))return b.kg.error("GW Chat error regenerate assistant message",{responseId:r,isResponseAssistantMessage:s}),[2];if(!(p=(f=l.slice(0,c)).pop()))return b.kg.error("GW Chat error no human message before response message"),[2];return n(W,p.id),h=(l[c].timesRegenerated||0)+1,v="advanced"===o,g=p.text,m=p.type,y=p.codeReference,w={id:r,type:m,codeReference:y,loading:!0,text:"Please wait while I think through your request",attribution:"Assistant",timesRegenerated:h,useAdvancedModel:v},n(x.Mk,{message:w}),[4,e(N.r6)()];case 1:k={fileContext:(S=d.sent()).ghostwriterFileContext.fileContext,mostRecentFile:S.mostRecentFile},E={type:m,parentEventId:"this_message_was_retried",text:g,codeReference:y,action:i},n(er,i),d.label=2;case 2:return d.trys.push([2,,4,5]),[4,n(Y,{chatInput:{chatMessage:E,messages:f,workspaceContext:k},responseId:r,timesRegenerated:h,modelType:o,chatModel:a,replId:u})];case 3:return d.sent(),[3,5];case 4:return n(H,p.id),[7];case 5:return[2]}})}),function(e,n,t){return a.apply(this,arguments)})),ee=function(){var e,n=(0,P.Uu)(),t=(0,f._)((0,B.Ni)(),1)[0],r=(0,F.v)(),i=(0,G.Z)();return(0,D.lV)((0,Z.useCallback)((e=(0,l._)(function(e,n,o){return(0,d.Jh)(this,function(e){switch(e.label){case 0:return[4,n(Q,o.chatMessage,{modelType:t,chatModel:r,replId:i})];case 1:return[2,e.sent()]}})}),function(n,t,r){return e.apply(this,arguments)}),[t,i,r]),{store:n})},en=function(){var e,n=(0,P.Uu)(),t=(0,f._)((0,B.Ni)(),1)[0],r=(0,F.v)(),i=(0,G.Z)();return(0,D.lV)((0,Z.useCallback)((e=(0,l._)(function(e,n,o){return(0,d.Jh)(this,function(e){switch(e.label){case 0:return[4,n($,{responseId:o.responseId,action:o.action,modelType:t,chatModel:r,replId:i})];case 1:return[2,e.sent()]}})}),function(n,t,r){return e.apply(this,arguments)}),[t,i,r]),{store:n})},et=function(){var e=(0,x.j3)(),n=(0,x.MY)();return V()&&e&&!n},er=(0,h.cn)(void 0),ei=function(){return(0,P.wM)(er)},eo=function(){return(0,P.$X)(er)};function ea(e){var n,t=(0,Z.useMemo)(function(){return(0,v.kv)(x.qw,function(n){var t=n.findIndex(function(n){return n.id===e}),r=t>=0?n[t]:null;if(!r)return null;if("Human"===r.attribution){var i=n[t+1];if(!i)return r;if("Assistant"===i.attribution&&"EXPLAIN"===i.intent)return(0,C.ZP)(r,function(e){e.text="Explain code",e.intent="EXPLAIN",e.codeReference=i.codeReference})}return r})},[e]);return null!==(n=(0,P.c1)(t))&&void 0!==n?n:null}},74997:function(e,n,t){t.d(n,{W:function(){return a},j:function(){return l}});var r=t(78094),i=t(66820),o=t(90234),a=(0,o.cn)(null,function(e,n,t){var r=e(i.qw).filter(function(e){var n;return!("explainCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)});n(i.qw,r)}),u=(0,o.cn)(function(e){return e(i.qw).filter(function(e){return"Assistant"===e.attribution&&"explainCode"===e.type})}),l=function(e){return(0,r.c1)(u).find(function(n){return n.codeReference&&n.codeReference.filePath===e})}},14917:function(e,n,t){t.d(n,{eD:function(){return c},k8:function(){return a},oQ:function(){return l}});var r=t(78094),i=t(66820),o=t(90234),a=(0,o.cn)(null,function(e,n,t){var r=e(i.qw).filter(function(e){var n;return!("generateCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)});n(i.qw,r)}),u=(0,o.cn)(function(e){return e(i.qw).filter(function(e){return"Assistant"===e.attribution&&"generateCode"===e.type})}),l=function(e){return(0,r.c1)(u).find(function(n){return n.codeReference&&n.codeReference.filePath===e})},c=function(){return(0,r.$X)(a)}},99952:function(e,n,t){t.d(n,{Ef:function(){return c},ev:function(){return a},iH:function(){return l}});var r=t(78094),i=t(66820),o=t(90234),a=(0,o.cn)(null,function(e,n,t){var r=e(i.qw).filter(function(e){var n;return!("transformCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)});n(i.qw,r)}),u=(0,o.cn)(function(e){return e(i.qw).filter(function(e){return"Assistant"===e.attribution&&"transformCode"===e.type})}),l=function(e){return(0,r.c1)(u).find(function(n){return n.codeReference&&n.codeReference.filePath===e})},c=function(){return(0,r.$X)(a)}},52590:function(e,n,t){t.d(n,{g:function(){return l},r:function(){return c}});var r=t(51944),i=t(78094),o=t(90234),a=t(43429),u=(0,o.cn)(new Set),l=function(e){var n=(0,i.c1)(u);(0,a.useEffect)(function(){if(e)return n.add(e),function(){n.delete(e)}},[n,e])},c=(0,o.cn)(null,function(e,n){var t=e(u),i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)l.value.dispatch({effects:r.Q.of(null)})}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}})},66820:function(e,n,t){t.d(n,{MY:function(){return P},Mk:function(){return v},OV:function(){return h},TC:function(){return p},WS:function(){return T},WU:function(){return w},b9:function(){return g},em:function(){return C},j3:function(){return E},mJ:function(){return k},mV:function(){return x},nS:function(){return y},qw:function(){return d},tz:function(){return R}});var r=t(32477),i=t(21289),o=t(90234),a=t(92153),u=t(73926),l=t.n(u),c=t(78094),s=t(50199),f=t(15859),d=(0,o.cn)([]),p=(0,o.cn)(null,function(e,n,t){var r=t.message,o=e(d);n(d,(0,i._)(o).concat([r]))}),h=(0,o.cn)(null,function(e,n,t){var r=t.message,o=e(d);n(D,{message:r}),n(d,(0,i._)(o).concat([r]))}),v=(0,o.cn)(null,function(e,n,t){var r=t.message,i=r.id,o=e(d),u=(0,a.ZP)(o,function(e){var n;for(n=e.length-1;n>=0&&o[n].id!==i;n--);n>=0&&(e[n]=r)});n(D,{message:r}),n(d,u)}),g=(0,o.cn)(null,function(e,n,t){var r=t.messageId,i=t.error,o=e(d);n(d,(0,a.ZP)(o,function(e){var n=e.find(function(e){return e.id===r});n&&(n.loading&&(n.text="",n.loading=!1),n.error=i)}))}),m=(0,o.cn)(null,function(e,n,t){var r=t.feedback,o=t.message,a=e(d),u={id:l()(),type:"feedback",text:r,feedbackProvidedMessage:{id:o.id,text:o.text},attribution:"Assistant",useAdvancedModel:o.useAdvancedModel};n(d,(0,i._)(a).concat([u]))}),y=function(){return(0,c.$X)(m)},b=(0,o.cn)(new Map),w=(0,o.cn)(null,function(e,n,t){var r=t.messageId,i=t.abortController,o=(0,a.ZP)(e(b),function(e){e.set(r,i)});n(b,o)}),x=(0,o.cn)(null,function(e,n,t){var r=t.messageId,i=(0,a.ZP)(e(b),function(e){e.delete(r)});n(b,i)}),S=(0,o.cn)(null,function(e,n,t){var r,i=t.messageId;null===(r=e(b).get(i))||void 0===r||r.abort(),n(d,function(e){return(0,a.ZP)(e,function(e){var n=!0,t=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if(u.id===i){u.stopReason="unknown",u.loading=!1;break}}}catch(e){t=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}})}),n(x,{messageId:i})}),k=(0,o.cn)(null,function(e,n){var t=(0,a.ZP)(e(b),function(e){var n=!0,t=!1,i=void 0;try{for(var o,a=e.entries()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=(0,r._)(o.value,2);(u[0],u[1]).abort()}}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}e.clear()});n(b,t)}),E=function(){return(0,c.c1)(b).size>0},T=function(e){return(0,c.c1)((0,s.Z)(function(){return(0,f.kv)(b,function(n){return!!(e&&n.has(e.id))})},[e]))},C=function(){return(0,c.$X)(k)},R=function(){return(0,c.$X)(S)},Z=(0,o.cn)(new Set),D=(0,o.cn)(null,function(e,n,t){var r=t.message,i=r.id,o=r.loading,u=(0,a.ZP)(e(Z),function(e){o?e.add(i):e.delete(i)});n(Z,u)}),P=function(){return(0,c.c1)(Z).size>0}},84657:function(e,n,t){t.d(n,{Et:function(){return o},Z9:function(){return l},Z_:function(){return a},rM:function(){return c}});var r=t(78094),i=t(90234),o=(0,i.cn)(!1),a=function(){return(0,r.wM)(o)},u=(0,i.cn)(!1),l=function(){return(0,r.wM)(u)},c=function(){return(0,r.$X)(u)}},3590:function(e,n,t){t.d(n,{Cp:function(){return f},jC:function(){return c},qy:function(){return u},ub:function(){return l},xk:function(){return s}});var r=t(78094),i=t(90234),o=t(30911),a=t.n(o),u=(0,i.cn)(a()()),l=function(){return(0,r.c1)(u)},c=function(){return(0,r.$X)(u)},s=(0,i.cn)(null),f=function(){return(0,r.c1)(s)}},4736:function(e,n,t){t.d(n,{Fy:function(){return i},Lv:function(){return a},Tt:function(){return o}});var r=t(78094),i=(0,t(90234).cn)(null),o=function(){return(0,r.c1)(i)},a=function(){return(0,r.$X)(i)}},38382:function(e,n,t){t.d(n,{$e:function(){return s},Rr:function(){return a},ll:function(){return l},yH:function(){return u}});var r=t(90234),i=t(78094),o=t(4736),a=(0,r.cn)(!1),u=(0,r.cn)(function(e){var n=e(o.Fy);return!!n&&n.advancedModelUsage<n.advancedModelLimit}),l=function(){return(0,i.c1)(u)},c=(0,r.cn)(null,function(e,n,t){n(a,t.isTeamWithAiDisabled)}),s=function(){return(0,i.$X)(c)}},90841:function(e,n,t){t.d(n,{U0:function(){return p},Xy:function(){return v},Z1:function(){return f},r6:function(){return d},zU:function(){return h}});var r=t(34142),i=t(21289),o=t(87682),a=t(78094),u=t(29217),l=t(28999),c=t(90234),s=t(43429),f=(0,c.cn)([]),d=(0,c.cn)(function(e){return e(u.Vx).getGhostwriterFileContext}),p=function(){var e,n=(0,a.Uu)();return(0,l.lV)((0,s.useCallback)((e=(0,r._)(function(e,n){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return t=e(f),[4,e(d)(t)];case 1:return[2,n.sent()]}})}),function(n,t){return e.apply(this,arguments)}),[]),{store:n})};function h(){var e,n=(0,a.Uu)();return(0,l.lV)((0,s.useCallback)((e=(0,r._)(function(e,n,t){var r,a,u;return(0,o.Jh)(this,function(o){return a=(r=e(f)).findIndex(function(e){return e.path===t.path}),u=(0,i._)(r),-1!==a?u[a]=t:u.push(t),n(f,u),[2]})}),function(n,t,r){return e.apply(this,arguments)}),[]),{store:n})}function v(){return(0,a.c1)(f)}},29217:function(e,n,t){t.d(n,{$0:function(){return v},PM:function(){return y},TP:function(){return s},U4:function(){return h},Vx:function(){return l},e:function(){return d},f9:function(){return u},n3:function(){return m},tV:function(){return b}});var r=t(34142),i=t(87682),o=t(78094),a=t(90234),u={getGhostwriterFileContext:(0,r._)(function(){return(0,i.Jh)(this,function(e){return[2,{ghostwriterFileContext:{fileContext:[],truncatedFiles:[],overflowingFiles:[]},mostRecentFile:null}]})}),ghostwriterClient:null},l=(0,a.cn)(u),c=(0,a.cn)(null,function(e,n,t){n(l,function(e){return{ghostwriterClient:e.ghostwriterClient,getGhostwriterFileContext:t}})});function s(){return(0,o.$X)(c)}var f=(0,a.cn)(null,function(e,n,t){n(l,function(e){return{ghostwriterClient:t,getGhostwriterFileContext:e.getGhostwriterFileContext}})});function d(){return(0,o.$X)(f)}var p=(0,a.cn)(null),h=function(){return(0,o.c1)(p)},v=function(){return(0,o.$X)(p)},g=(0,a.cn)(null),m=function(){return(0,o.c1)(g)},y=function(){return(0,o.$X)(g)},b=(0,a.cn)(function(e){return e(l).ghostwriterClient})},78094:function(e,n,t){t.d(n,{$X:function(){return c},Uu:function(){return a},c1:function(){return l},wM:function(){return u}});var r=t(71999),i=t(43429),o=t(98372);function a(){var e=(0,i.useContext)(o.W);if(!e)throw Error("Expected store in ghostwriter chat context");return e}function u(e){return(0,r.KO)(e,{store:a()})}function l(e){return(0,r.Dv)(e,{store:a()})}function c(e){return(0,r.b9)(e,{store:a()})}},10169:function(e,n,t){t.d(n,{B:function(){return f},FF:function(){return s},R$:function(){return d}});var r=t(34142),i=t(87682),o=t(78094),a=t(23394),u=t(54916),l=t(90234),c=t(43429),s=(0,l.cn)("unknown");function f(){var e=(0,u.Z)().dotReplit,n=(0,a.Z)(),t=(0,o.$X)(s);(0,c.useEffect)(function(){function o(){return(o=(0,r._)(function(){var r,o;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return[4,e.getConfig()];case 1:r=i.sent();try{if(o="unknown",o=function(e){if(e.error)return"unknown";var n="unknown";if((null===(r=e.config.interpreter)||void 0===r?void 0:null===(t=r.command)||void 0===t?void 0:t.args)&&(null===(u=e.config.interpreter)||void 0===u||null===(a=u.command)||void 0===a||a.args.forEach(function(e){/nodejs/.test(e)?n="nodejs":/python3/.test(e)&&(n="python3")}),"unknown"!==n)||(null===(i=e.config.run)||void 0===i?void 0:i.args)&&(null===(l=e.config.run)||void 0===l||l.args.forEach(function(e){/vite/.test(e)?n="vite":/node|npm/.test(e)?n="nodejs":/python3/.test(e)&&(n="python3")}),"unknown"!==n))return n;if(null===(o=e.config.packager)||void 0===o?void 0:o.language){var t,r,i,o,a,u,l,c,s=null===(c=e.config.packager)||void 0===c?void 0:c.language;if(/nodejs/.test(s)?n="nodejs":/python3/.test(s)&&(n="python3"),"unknown"!==n)return n}return"unknown"}(r),"unknown"===o){var a;a="unknown",/nodejs|typescript/.test(n)?a="nodejs":/python3/.test(n)&&(a="python3"),o=a}return t(o),[2,o]}catch(e){t("unknown")}return[2]}})})).apply(this,arguments)}return!function(){o.apply(this,arguments)}(),function(){t("unknown")}},[e,n,t])}function d(){return(0,o.c1)(s)}},36102:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(45903),i=t(8182),o=t(43429),a=t(68333),u=t(33195),l=t(82004),c=t(6187),s=t(50199),f=o.memo(a.ZP);function d(e){var n=e.source,t=e.sourcePos,o=e.fs,a=e.path,d=e.onCodeInsert,p=(0,u.l)(o,a),h=(0,c.Z)(n,100),v=(0,s.Z)(function(){return{img:p,a:function(e){return(0,i.tZ)(l.Z,(0,r._)({filePath:a},e))}}},[p,a]);return(0,i.tZ)(f,{onCodeInsert:d,components:v,sourcePos:t,children:h})}},61601:function(e,n,t){t.d(n,{A:function(){return p},Z:function(){return d}});var r=t(32477),i=t(8182),o=t(43429),a=t(29559),u=t(74833),l=t(29287),c=t(15146),s=t(42463),f=t(88936);function d(e){var n=e.fs,t=e.filePath,d=(0,r._)((0,o.useState)(null),2),h=d[0],v=d[1],g=(0,r._)((0,o.useState)(!0),2),m=g[0],y=g[1];return((0,o.useEffect)(function(){var e=n.watchFile(t,{onChange:function(e){v(e.toString("base64")),y(!1)},onError:function(){v(null),y(!1)},onMoveOrDelete:function(){v(null),y(!1)}});return function(){e(),y(!0),v(null)}},[n,t]),m)?(0,i.tZ)(f.Z,{}):h?(0,i.BX)(i.HY,{children:[(0,i.tZ)(p,{content:h,mime:(0,a.yC)(t)}),(0,i.tZ)(c.hU,{alt:"Download",css:[l.l0.position.absolute,l.l0.bottom(8),l.l0.right(8),l.l0.p(16)],children:(0,i.tZ)("a",{href:"data:text/plain;base64,".concat(h),download:(0,a.UO)(t),css:[l.l0.color.foregroundDimmer],children:(0,i.tZ)(s.Z,{})})})]}):(0,i.tZ)(u.xv,{multiline:!1,children:"Failed to load media file"})}var p=function(e){var n=e.content,t=e.mime,r=void 0===t?"":t;if(r.startsWith("video/"))return(0,i.tZ)("video",{src:"data:".concat(r,";base64,").concat(n),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0});if(r.startsWith("image/"))return(0,i.tZ)("img",{alt:"Preview",src:"data:".concat(r,";base64,").concat(n),css:{width:"80%",height:"80%",objectFit:"contain",imageRendering:"pixelated"}});if(r.startsWith("audio/")){var o=r;return"audio/wave"===o&&(o="audio/wav"),(0,i.tZ)("audio",{src:"data:".concat(o,";base64,").concat(n),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0})}return"application/pdf"===r?(0,i.tZ)("object",{data:"data:".concat(r,";base64,").concat(n),type:"application/pdf",css:{width:"100%",height:"100%",flex:1},children:(0,i.tZ)("embed",{src:"data:".concat(r,";base64,").concat(n),type:"application/pdf",css:{width:"100%",height:"100%"}})}):(0,i.tZ)(u.xv,{multiline:!1,children:"File type not supported."})}},17137:function(e,n,t){t.d(n,{Z:function(){return k}});var r=t(8182);t(43429);var i=t(49344),o=t(74833),a=t(1498),u=t(56596),l=t(94106),c=t(29287),s=t(36010),f=t.n(s),d=t(45903),p=t(93295),h=t(23982),v=t(66039);function g(){var e=(0,p._)(["\n  query NotAllowedModal {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return g=function(){return e},e}var m={},y=(0,h.Ps)(g()),b=t(50782),w=t(30983),x=t(75875),S=(0,t(93918).X)({root:[c.l0.colWithGap(32)],header:[c.l0.rowWithGap(16),c.l0.align.center],body:[c.l0.colWithGap(16)],staffHelpers:[c.l0.colWithGap(8),c.l0.border({color:"var(--accent-negative-default)",width:1,style:"solid"}),c.l0.overflow("hidden")],buttons:[c.l0.rowWithGap(16),c.l0.justify.end]}),k=function(e){var n,t,s=e.isOpen,p=(0,l.useRouter)(),h=(n=(0,d._)({},m,{skip:!s}),v.a(y,n)).data,g=(0,b.Z)(),k=null==h?void 0:null===(t=h.currentUser)||void 0===t?void 0:t.isStaff;return(0,r.tZ)(i.u,{preventClose:!0,isOpen:s,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(u.G,{css:S.root,children:[(0,r.tZ)(u.G,{css:S.header,children:(0,r.tZ)(o.h4,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"You cant run this Repl right now."})}),(0,r.BX)(u.G,{css:S.body,children:[(0,r.BX)(o.xv,{children:["It may be temporarily unavailable or it may have violated our"," ",(0,r.tZ)(f(),{legacyBehavior:!0,href:"/site/terms",children:"Terms of Service"}),"."]}),(0,r.tZ)(o.xv,{children:"If you are the owner of this Repl and believe you should be able to run it, you can try again later or contact support."}),k?(0,r.BX)(u.G,{css:S.staffHelpers,children:[(0,r.BX)(u.G,{css:c.l0.rowWithGap(8),children:[(0,r.tZ)(w.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(x.Z,{})}),(0,r.tZ)(o.h4,{level:3,children:"Debug Info"})]}),(0,r.tZ)(u.G,{children:(0,r.BX)(o.xv,{children:["Repl ID ",g," is not allowed to run. This is most likely due to a policy takedown."]})}),(0,r.tZ)(u.G,{children:(0,r.BX)(o.xv,{multiline:!1,children:[(0,r.tZ)(f(),{legacyBehavior:!0,href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(g),children:"All datadog logs"})," ",""," ",(0,r.tZ)(f(),{legacyBehavior:!0,href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(g,"+taking+down"),children:"Takedown-specific logs"})]})})]}):null]}),(0,r.BX)(u.G,{css:S.buttons,children:[(0,r.tZ)(a.zx,{text:"Reload",onClick:function(){window.location.reload()}}),(0,r.tZ)(a.zx,{text:"Leave",onClick:function(){p.push("/home","~/")}})]})]})})}},8607:function(e,n,t){var r=t(8182);t(43429);var i=t(49344),o=t(74833),a=t(1498),u=t(56596),l=t(94106),c=t(73722),s=t(29287),f=t(93918),d=t(56337),p=t(2038),h=(0,f.X)({root:[s.l0.colWithGap(16)],header:[s.l0.rowWithGap(16),s.l0.align.center],body:[s.l0.pr(32),s.l0.colWithGap(16)],buttonRow:[s.l0.rowWithGap(16)],button:[s.l0.flex.growAndShrink(1)]});n.Z=function(e){var n=e.isOpen,t=(0,l.useRouter)(),s=(0,p.Vg)(t),f=(0,d.Z)();return(0,r.tZ)(i.u,{preventClose:!0,isOpen:n,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(u.G,{css:h.root,children:[(0,r.BX)(u.G,{css:h.header,children:[(0,r.tZ)(c.Z,{size:24}),(0,r.tZ)(o.h4,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"Please Refresh"})]}),(0,r.BX)(u.G,{css:h.body,children:[(0,r.tZ)(o.xv,{children:"Your connection to this Repl has been temporarily interrupted. Usually this is because of a network issue. Please refresh."}),s?(0,r.tZ)(o.xv,{children:"If the issue continues please logout and re-login."}):null]}),(0,r.BX)(u.G,{css:h.buttonRow,children:[s||f?null:(0,r.tZ)(a.zx,{css:h.button,text:"Leave",onClick:function(){t.push("/home","~/")}}),(0,r.tZ)(a.zx,{text:"Refresh",colorway:"primary",css:h.button,onClick:function(){window.location.reload()}})]})]})})}},59716:function(e,n,t){t.d(n,{y:function(){return eM}});var r,i=t(39698),o=t(45903),a=t(25e3),u=t(32477),l=t(8182),c=t(56596),s=t(92153),f=t(43429),d=t(29287),p=t(80502),h=t(7444),v=t(26508),g=t(14675),m=t(95571),y=t(93918),b=t(31384),w=t(19562),x=t(91608),S={noScroll:!0};function k(e){for(var n=1,t=e.buffer.active._buffer.lines._array,r=e.buffer.active.length;r-- >0;){var i=t[r];if(i){for(var o=!1,a=0;a<e.cols;a++)if(0!==i.hasContent(a)){o=!0;break}if(o){n=r+1;break}}}return n}var E=(0,x.$)(["topOffset"]),T=E.cssVars,C=E.styleTokens,R=(0,y.X)({wrapper:{display:"grid"},terminal:{gridRow:1,gridColumn:1,position:"sticky",top:C.topOffset,"& .xterm":[d.l0.py(8),d.l0.pl(8),d.l0.height("100%"),d.l0.overflow("hidden")],"& .xterm-viewport":[d.l0.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:C.topOffset,height:30,margin:"2px 0 0 auto",zIndex:4}});function Z(e){var n=e.onMessage,t=e.onInput,r=e.openFile,i=e.openAIWithMessage,o=e.openSearchAndReplace,a=e.openWebview,s=e.listFiles,d=e.autoFocus,y=e.maxHeight,x=e.onResizeTerminal,E=e.scrollPosition,T=e.scrollParent,C=(0,u._)((0,p.Z)({autoFit:!1,size:{rows:10},openFile:r,listFiles:s,openWebview:a}),2),Z=C[0],D=C[1],P=(0,f.useMemo)(function(){return null==Z?void 0:Z._term},[Z]),_=(0,f.useMemo)(function(){var e,n=null==P?void 0:P._core;return null!==(e=null==n?void 0:n._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[P]),I=(0,u._)((0,f.useState)(!1),2),A=I[0],L=I[1],N=(0,u._)((0,f.useState)("normal"),2),O=N[0],M=N[1],B=(0,u._)((0,f.useState)(1),2),G=B[0],F=B[1],q=(0,u._)((0,f.useState)(1),2),z=q[0],U=q[1],W=(0,u._)((0,f.useState)(!1),2),H=W[0],X=W[1],V=(0,u._)((0,f.useState)(!1),2),j=V[0],K=V[1],J=(0,u._)((0,f.useState)(""),2),Y=J[0],Q=J[1],$=(0,h.Z)(G),ee=(0,h.Z)(z),en=(0,h.Z)(H),et=(0,h.Z)(O),er=(0,f.useMemo)(function(){return Math.floor((y-16)/_.height)},[y,_.height]),ei=(0,f.useRef)(null);(0,f.useEffect)(function(){return function(){$.current=1,ee.current=1,en.current=!1,et.current="normal",null!==ei.current&&clearTimeout(ei.current)}},[$,ee,en,et,ei]);var eo=(0,v.Z)(function(e){var n=e.widthChanged;Z&&P&&n&&Z.fit()},{type:"debounce",wait:200});(0,f.useLayoutEffect)(function(){Z&&Z.fit()},[Z]),(0,f.useLayoutEffect)(function(){d&&Z&&Z.focus()},[Z,d]),(0,f.useEffect)(function(){if(Z){var e=Z.onData(function(e){t(e)}),n=Z.onResize(function(){x(Z.getSize())});return function(){e.dispose(),n.dispose()}}},[Z,t,x]),(0,f.useEffect)(function(){if(P){var e=P.buffer.onBufferChange(function(e){M(e.type),"alternate"===e.type&&(F(er),U(er),X(!1))});return function(){e.dispose()}}},[P,er]),(0,f.useEffect)(function(){var e=function(){if(P&&"alternate"!==et.current){var e=P.buffer.active.cursorY,n=P.buffer.active.viewportY,t=k(P);t!==ee.current&&U(t),e>$.current&&F(e),n>0&&!1===en.current&&X(!0)}};if(P){var n=[P.onLineFeed(e),P.onCursorMove(e)];return function(){n.forEach(function(e){return e.dispose()})}}},[P,$,en,et,ee,er]),(0,f.useEffect)(function(){if(P&&Z){if(Z.getSize().rows!==er&&P.resize(P.cols,er),"alternate"===et.current)F(er);else{var e=k(P);e!==ee.current&&U(e),er<e?F(er):e<er&&F(e)}}},[P,Z,er,x,F,et,ee]),(0,f.useEffect)(function(){if(Z)return n(function(e){return Z.write(e)})},[n,Z]);var ea=(0,f.useMemo)(function(){return(Math.min(G,z)+1)*_.height+16},[G,z,_]),eu=(0,f.useMemo)(function(){return H?(z+1)*_.height+16:ea},[_,H,ea,z]);(0,f.useEffect)(function(){if(P){if(E<1||!H){P.scrollToLine(0);return}var e=eu-ea,n=z-G;if(e<1){P.scrollToLine(0);return}P.scrollToLine(Math.round(E/e*n))}},[E,_,P,H,eu,ea,G,z]);var el=(0,f.useCallback)(function(){if(P){var e=P.getSelectionPosition();e&&T(e.start.y*_.height-y/2)}},[P,_.height,y,T]),ec=(0,b.av)().onContextMenu,es=(0,w.j)({xterm:Z,isOutputsTerminal:!0,openAIWithMessage:i,openShellSearch:function(e){K(!0),Q(e)},openSearchAndReplace:o});return(0,l.tZ)(c.G,{innerRef:eo,children:(0,l.BX)(c.G,{css:R.wrapper,style:{height:eu,pointerEvents:A?"none":"all"},onWheel:function(){L(!0),ei.current&&clearTimeout(ei.current),ei.current=setTimeout(function(){L(!1)},200)},onKeyDown:function(e){"f"===e.key&&(0,m.j)(e)&&(K(!0),e.preventDefault())},children:[j?(0,l.tZ)(c.G,{css:R.searchWidget,children:(0,l.tZ)(g.R,{searchValue:Y,setSearchValue:Q,findPrevious:function(e){(null==Z?void 0:Z.findPrevious(e,S))&&el()},findNext:function(e){(null==Z?void 0:Z.findNext(e,S))&&el()},exit:function(){return K(!1)}})}):null,(0,l.tZ)(c.G,{style:{height:ea,maxHeight:y},css:R.terminal,onContextMenu:function(e){return ec(e,{command:es})},innerRef:D})]})})}var D=t(52902),P=t(18107),_=t(27592),I=t(6187),A=t(58200),L=t(8279),N=t(23291),O=t(1128),M=t(20573),B=t(32377),G=t(30983),F=t(74833),q=t(83109),z=t(15146),U=t(47507),W=/(((\w+Error)|(Error)): (.*)\r\n((?:\s+at .*\r\n)+))|(\/home\/runner(.*):\d+\r\n[\s\S]*((\w+Error)|(Error)): (.*)\r\n)/g,H=/(Traceback.*\r\n)?( +File.*(\r\n.*){1,2})*\r\n.*((\wError:)|(Exception:)).*/g,X=["abort","error","exception","fail","fatal","panic","traceback"].map(function(e){return"[".concat(e[0].toLowerCase()).concat(e[0].toUpperCase(),"]").concat(e.slice(1))}).join("|"),V=RegExp("(.*(".concat(X,")(.*\\r\\n)+?\\x1b\\[31m(.|\\r\\n)*?\\x1b\\[[0-9;]*m)|(.*\\x1b\\[31m.*?(").concat(X,")(.|\\r\\n)*?\\x1b\\[[0-9;]*m.*)"),"g"),j=/\x1b\[[0-9;]*[A-Za-z]/g,K=t(10169);function J(e,n){var t=(0,K.R$)(),r=(0,u._)((0,f.useState)(null),2),i=r[0],o=r[1],a=(0,u._)((0,f.useState)(""),2),l=a[0],c=a[1];return(0,f.useEffect)(function(){return n(function(e){c(function(n){return(n+e).slice(-2400)})})},[n]),(0,f.useEffect)(function(){var n=setTimeout(function(){var n,r=t;if("unknown"===r){var i,a=null===(i=e.configs.current)||void 0===i?void 0:i.entrypoint;(null==a?void 0:a.endsWith(".js"))?r="nodejs":(null==a?void 0:a.endsWith(".py"))&&(r="python3")}o((n=r,l&&function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";return"nodejs"===n?null!==e.match(W):"python3"===n?null!==e.match(H):null!==e.match(V)}(l,n)?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown",t=e.replace(j,""),r=null;return(r="nodejs"===n?t.match(W):"python3"===n?t.match(H):e.match(V))?r[r.length-1].replace(j,""):(U.kg.error("Ghostwriter Chat Debugger had no error - this should not have happened",{errorBuffer:e,interpreter:n}),"")}(l,n):null))},100);return function(){clearTimeout(n)}},[l,t,e]),{parsedError:i}}var Y=t(83898),Q=t(73030),$=t(77804),ee=t(40028),en=t(9331),et=t(99741),er=t(37770),ei=t(56378),eo=t(37463),ea=t(35375),eu=t(25425),el=t(1498),ec=t(73157),es=t(17216);function ef(e){return e&&0!==e.length?e[0].toUpperCase()+e.substring(1).toLowerCase():""}var ed=(0,y.X)({outputBlockMetadataWrapper:[{containerType:"size"},d.l0.pl(4),d.l0.pr(8),d.l0.rowWithGap(4),d.l0.align.center,d.l0.justify.spaceBetween,d.l0.height(28),d.l0.backgroundColor.backgroundDefault,d.l0.border({direction:"bottom",width:1,style:"solid",color:d.TV.backgroundHigher}),d.l0.position.sticky,d.l0.top(0),d.l0.zIndex(1)],outputBlockMetadataWrapperLeft:[d.l0.rowWithGap(4),d.l0.align.center,d.l0.flex.shrink(1)],outputBlockMetadataWrapperRight:[d.l0.rowWithGap(4),d.l0.align.center],executionPill:[d.l0.flex.shrink(0),d.l0.display.flex,{"@container (max-width: 200px)":[d.l0.display.none]}],ghostwriterDebuggerButton:[d.l0.flex.shrink(0),{"@container (max-width: 400px)":{padding:"0 4px","& > span":[d.l0.display.none],"& > svg":[d.l0.mr(0)]}}],lastLineTextWrapper:[d.l0.flex.shrink(1)],lastLineText:[d.l0.display.block,d.l0.maxWidth("100%"),d.l0.overflow("hidden"),d.l0.font.code,d.l0.flex.shrink(1),{textOverflow:"ellipsis",whiteSpace:"nowrap"}],dateText:[d.l0.flex.row,{"@container (max-width: 240px)":[d.l0.display.none]}],verticalDivider:[d.l0.mx(6),{width:1,height:28,background:d.TV.backgroundHigher}],portInfoDomain:[d.l0.display.flex,d.l0.flex.row,d.l0.align.center,d.l0.m(0),{"@container (max-width: 400px)":d.l0.display.none}],portInfoPorts:[d.l0.display.flex,d.l0.flex.row,d.l0.align.center,d.l0.m(0),{"@container (max-width: 300px)":d.l0.display.none}],portTooltipHeader:[d.l0.color.foregroundDimmer,d.l0.fontWeight.normal,d.l0.px(2),d.l0.pb(2)],portTooltipColumnLeft:[d.l0.textAlign.right],portTooltipColumnMiddle:[d.l0.textAlign.center,d.l0.px(4)]}),ep=(r={},(0,i._)(r,P.kH.DEBUGGER,"debugger"),(0,i._)(r,P.kH.PACKAGER,"packager"),(0,i._)(r,P.kH.UNIT_TEST,"tests"),(0,i._)(r,P.kH.EXECUTION,"run"),(0,i._)(r,P.kH.PORT_INFO,"port"),(0,i._)(r,P.kH.FORMATTER,"formatter"),r);function eh(e){var n=e.parsedError,t=e.openPane,r=(0,Y.ql)();return(0,l.tZ)(er.T,{iconLeft:(0,l.tZ)(Q.Z,{}),text:"Debug with AI",onClick:function(){n&&(t({type:"ghostwriterChat"}),r({chatMessage:{type:"debugger",errorType:"console",text:(0,$.Vh)(n,"debugger")}}))},colorway:"blurple",css:ed.ghostwriterDebuggerButton})}function ev(e){var n=e.openedPorts;return(0,l.tZ)(c.G,{children:(0,l.BX)("table",{children:[(0,l.BX)("tr",{children:[(0,l.tZ)("th",{css:ed.portTooltipHeader,children:"Internal"}),(0,l.tZ)("th",{}),(0,l.tZ)("th",{css:ed.portTooltipHeader,children:"External"})]}),(0,l.tZ)("tbody",{children:n.map(function(e){var n=e.configuration,t=!0,r=null;switch(n.type){case ea.DL.FORWARDED:t=!0,r=":".concat(n.externalPort);break;case ea.DL.INTERNAL_ONLY:t=!1,r=null;break;case ea.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:case ea.DL.MISCONFIGURED:case ea.DL.CONFIG_MISSING:t=!0,r=(0,l.tZ)(M.Z,{})}return(0,l.BX)("tr",{children:[(0,l.BX)("td",{css:ed.portTooltipColumnLeft,children:[":",n.localPort]}),(0,l.tZ)("td",{css:ed.portTooltipColumnMiddle,children:t?"":null}),(0,l.tZ)("td",{children:r})]},n.localPort)})})]})})}function eg(e){var n=e.isDone,t=e.error,r=e.finishedTooltipText,i=e.executionPillText,o=e.runningTooltipText,a=e.circleColor,u=void 0===a?d.TV.accentPositiveDefault:a,s=e.duration,f=e.time,p=e.ghostwriterParsedError,h=e.openPane,v=e.isCollapsed,g=e.setIsCollapsed,m=e.lastMeaningfullLine,y=e.renderDebugWithAI,b=e.openedPorts,w=e.renderPortsIntegration,x=(0,q.Z)(new Date(f),"HH:mm:ss, MM/dd"),S=y&&!!p,k=void 0!==t||!!p,E=(0,eu.P5)({controlName:"flag-dot-dev-url",logFlagToAnalytics:!1}),T=void 0!==b&&b.length>0,C="";return T&&(C=1===b.length?":".concat(b[0].configuration.localPort):"".concat(b.length," ").concat((0,ec.Z)("port",b.length))),(0,l.BX)(c.G,{css:ed.outputBlockMetadataWrapper,onDoubleClick:function(){return g(!v)},children:[(0,l.BX)(c.G,{css:ed.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.tZ)(z.hU,{alt:v?"Expand":"Collapse",onClick:function(){return g(!v)},children:v?(0,l.tZ)(en.Z,{}):(0,l.tZ)(et.Z,{})}),(0,l.tZ)(N.D,{color:"grey",text:ef(i),css:ed.executionPill}),S?(0,l.tZ)(eh,{parsedError:p,openPane:h}):null,(0,l.tZ)(c.G,{css:ed.lastLineTextWrapper,children:v?(0,l.tZ)(F.xv,{css:ed.lastLineText,variant:"small",children:m}):null})]}),(0,l.BX)(c.G,{css:ed.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[w&&T?(0,l.BX)(l.HY,{children:[(0,l.BX)(c.G,{css:ed.portInfoDomain,children:[(0,l.tZ)(F.xv,{color:"dimmer",css:d.l0.mr(0),children:(0,l.tZ)(G.u,{tooltip:"Open Webview",children:(0,l.tZ)(el.zx,{size:"small",variant:"underlinedOnHover",text:T?"{...}.".concat(E?"replit.dev":"repl.co"):"",onClick:function(){h({type:"webview",data:T?{portType:"local",port:b[0].configuration.localPort}:void 0},!0)}})})}),(0,l.tZ)(c.G,{css:ed.verticalDivider})]}),(0,l.BX)(c.G,{css:ed.portInfoPorts,children:[(0,l.tZ)(F.xv,{color:"dimmer",css:d.l0.mr(0),children:(0,l.tZ)(G.u,{tooltip:(0,l.tZ)(ev,{openedPorts:b}),children:(0,l.tZ)(el.zx,{size:"small",variant:"underlinedOnHover",iconLeft:(0,l.tZ)(es.Z,{color:d.TV.accentPositiveStronger}),text:C,onClick:function(){h({type:"networking"},!0)}})})}),(0,l.tZ)(c.G,{css:ed.verticalDivider})]})]}):null,(0,l.BX)(F.xv,{color:"dimmer",variant:"small",css:ed.dateText,children:[s?(0,l.tZ)(G.u,{tooltip:"".concat(Math.round(s).toLocaleString(),"ms"),children:s<1e3?"".concat(Math.floor(s),"ms"):s<6e4?"".concat(Math.floor(s/1e3),"s"):"".concat(Math.floor(s/6e4),"m")}):null,s?"".concat("\xa0","on").concat("\xa0"):null,x]}),n?(0,l.tZ)(G.u,{tooltip:r,children:k?(0,l.tZ)(M.Z,{}):(0,l.tZ)(B.Z,{})}):(0,l.tZ)(G.u,{tooltip:void 0===o?"Running...":o,children:(0,l.tZ)(O.Z,{color:u})})]})]})}function em(e){var n,t,r=e.isCollapsed,i=e.setIsCollapsed,o=e.openPane,a=e.startTime,u=e.endTime,c=e.localStartTime,s=e.localEndTime,f=e.isDone,d=e.data,p=e.error,h=e.toolchain,v=e.ports,g=e.renderDebugWithAI,m=e.renderPortsIntegration,y=eb(!f),b=J(h,d.onMessage).parsedError,w=ew(d.onMessage),x=(0,eo.r4)(v,d.cgroup);a&&u?n=u-a:!f&&c?n=y-c:f&&s&&(n=s-c);var S="Finished";return(void 0!==p||b)&&(S=void 0!==p?ef(p):"Finished with error"),(0,l.tZ)(eg,{isDone:f,error:p,finishedTooltipText:S,ghostwriterParsedError:b,executionPillText:null!==(t=d.executionMode)&&void 0!==t?t:"unknown",duration:n,time:null!=a?a:c,lastMeaningfullLine:w,openPane:o,isCollapsed:r,setIsCollapsed:i,renderDebugWithAI:g,openedPorts:x,renderPortsIntegration:m})}function ey(e){var n,t=e.isCollapsed,r=e.setIsCollapsed,i=e.openPane,o=e.localStartTime,a=e.localEndTime,u=e.isDone,c=e.type,s=e.error,f=e.data,p=e.toolchain,h=e.renderDebugWithAI,v=eb(!u),g=J(p,f.onMessage),m=ew(f.onMessage),y=ep[c],b=s?(0,l.BX)(F.xv,{multiline:!0,children:[ef(ep[c])," error",(0,l.tZ)("br",{}),s]}):"Finished",w=d.TV.accentPositiveDefault,x="Running...";if(c===P.kH.DEBUGGER){var S=f.debugState;w="paused"===S?d.TV.yellowDefault:d.TV.accentPositiveDefault,x="paused"===S?"Paused":"Running..."}return a?n=a-o:!u&&o&&(n=v-o),(0,l.tZ)(eg,{isCollapsed:t,setIsCollapsed:r,openPane:i,isDone:u,finishedTooltipText:b,executionPillText:y,duration:n,time:o,circleColor:w,runningTooltipText:x,ghostwriterParsedError:g.parsedError,lastMeaningfullLine:m,renderDebugWithAI:h,error:s})}function eb(e){var n=(0,u._)((0,f.useState)(function(){return Date.now()}),2),t=n[0],r=n[1];return(0,f.useEffect)(function(){if(e){var n=setInterval(function(){r(Date.now())},100);return function(){clearInterval(n)}}},[e]),t}function ew(e){var n=(0,u._)((0,f.useState)(""),2),t=n[0],r=n[1];return(0,f.useEffect)(function(){return e(function(e){var n,t=null===(n=(0,ei.Z)(e).split("\n").reverse().find(function(e){return e.trim().length>0}))||void 0===n?void 0:n.trim();t&&r(t)})}),t}function ex(e){var n=e.isCollapsed,t=e.setIsCollapsed,r=e.openPane,i=e.isDone,o=e.type,a=e.data,u=e.error,c=e.localStartTime,s=e.localEndTime,f=e.startTime,d=e.endTime,p=e.toolchain,h=e.renderDebugWithAI,v=e.ports,g=e.renderPortsIntegration;switch(o){case P.kH.EXECUTION:return(0,l.tZ)(em,{isCollapsed:n,setIsCollapsed:t,openPane:r,isDone:i,type:o,startTime:f,endTime:d,localStartTime:c,localEndTime:s,data:a,error:u,toolchain:p,renderDebugWithAI:h,ports:v,renderPortsIntegration:g});case P.kH.DEBUGGER:case P.kH.PACKAGER:case P.kH.UNIT_TEST:case P.kH.FORMATTER:return(0,l.tZ)(ey,{isCollapsed:n,setIsCollapsed:t,openPane:r,isDone:i,type:o,localStartTime:c,localEndTime:s,data:a,error:u,toolchain:p,renderDebugWithAI:h,ports:v,renderPortsIntegration:g});default:(0,ee.Z)(o)}}var eS=t(41084),ek=t(917),eE=t(5621),eT=t(2038),eC=t(27187),eR=(0,y.X)({emptyStateWrapper:[d.l0.p(8),d.l0.display.block,{lineHeight:"32px"}],simpleRunButtonWrapper:[d.l0.rowWithGap(6),d.l0.backgroundColor.accentPositiveDimmest,d.l0.color.accentPositiveStrongest,d.l0.align.center,d.l0.borderRadius(8),d.l0.py(2),d.l0.px(6),d.l0.mx(4),d.l0.cursor.pointer,{"&:hover":[d.l0.color.white,d.l0.backgroundColor.accentPositiveDefault]}]});function eZ(e){var n=e.runner;return(0,l.tZ)(c.G,{tag:"span",style:{display:"inline-block"},children:(0,l.BX)(c.G,{tag:"button",onClick:function(){return n.run()},css:eR.simpleRunButtonWrapper,children:[(0,l.tZ)(eC.Z,{size:12}),(0,l.tZ)(F.xv,{children:"Run"})]})})}function eD(e){var n=e.runner,t=(0,u._)((0,f.useState)(function(){return n.getRunState()}),2),r=t[0],i=t[1];return((0,f.useEffect)(function(){var e=n.onStateChanged(function(e){i(e)});return function(){return e()}},[n]),r===P.Ah.OFFLINE)?(0,l.tZ)(c.G,{css:eR.emptyStateWrapper,children:"The Repl is booting..."}):r===P.Ah.RUNNING||r===P.Ah.BEFORE_RUN?(0,l.tZ)(c.G,{css:eR.emptyStateWrapper,children:"Running..."}):(0,l.BX)(c.G,{css:eR.emptyStateWrapper,children:["Results of your code will appear here when you"," ",(0,l.tZ)(eZ,{runner:n})," the project."]})}var eP=t(32911),e_=(0,x.$)(["blockMinHeight","terminalBackgroundColor","previewHeight"]),eI=e_.cssVars,eA=e_.styleTokens,eL=(0,y.X)({outputsListParent:[d.l0.height("100%"),d.l0.overflow("hidden"),d.l0.borderRadius(0,0,8,8)],outputsListWrapper:[d.l0.height("100%")],outputsList:[d.l0.height("100%"),d.l0.overflowY("scroll")],outputsListSnapToBottom:{scrollSnapType:"y mandatory"},scrollSnap:[d.l0.height(1),{marginTop:-1,pointerEvents:"none",scrollSnapAlign:"end"}],outputBlockCollapsingWrapper:[d.l0.minHeight(eA.blockMinHeight)],outputBlockTerminalWrapper:[d.l0.minHeight(eA.blockMinHeight),{backgroundColor:eA.terminalBackgroundColor}],outputBlockClosingBorder:[d.l0.height(1),d.l0.zIndex(1),d.l0.border({direction:"bottom",width:1,style:"solid",color:d.TV.backgroundHigher}),{marginTop:-1}],terminalLoadingWrapper:[d.l0.p(8),d.l0.height(eA.previewHeight)],terminalLoadingLine:[d.l0.borderRadius(2),L.p.foregroundPulse(),d.l0.height(16),d.l0.mb(4)]});function eN(e){var n=e.targetHeight,t=Math.min(Math.floor((n-8)/20),4),r=(0,f.useMemo)(function(){return Array.from({length:t}).map(function(e,n){return(0,l.tZ)(c.G,{css:[eL.terminalLoadingLine],style:{width:100*Math.random()+"%"}},n)})},[t]);return(0,l.tZ)(c.G,{css:eL.terminalLoadingWrapper,style:(0,i._)({},eI.previewHeight,n+"px"),children:(0,l.tZ)(c.G,{style:{position:"sticky",top:36},children:r})})}function eO(e){var n,t,r,s,d,p,h,g,m,y,b,w,x,S,k,E,C,R,D,L=e.onInput,N=e.openFile,O=e.openPane,M=e.openAIWithMessage,B=e.openSearchAndReplace,G=e.listFiles,F=e.autoFocus,q=e.rootRef,z=e.maxHeight,U=e.onResizeTerminal,W=e.isDone,H=e.data,X=e.error,V=e.localStartTime,j=e.localEndTime,K=e.startTime,J=e.endTime,Y=e.type,Q=e.toolchain,$=e.renderDebugWithAI,ee=e.visualState,en=e.onSetVisualState,et=e.ports,er=e.renderPortsIntegration,ei=(0,f.useRef)(null),ea=(0,u._)((0,f.useState)(!0),2),eu=ea[0],el=ea[1],ec=(0,u._)((0,f.useState)(!1),2),es=ec[0],ef=ec[1],ed=(0,u._)((0,f.useState)(0),2),ep=ed[0],eh=ed[1],ev=(0,A.f)(),eg=(0,I.Z)(eu,es?6e4:500),em=(0,eo.r4)(et,Y===P.kH.EXECUTION?H.cgroup:void 0),ey=(0,u._)((0,f.useState)(0),2),eb=ey[0],ew=ey[1],eS=(0,f.useCallback)(function(e,n){O({type:"webview",data:{portType:"local",path:e,port:n}},!0)},[O]),ek=(t=(n={maxHeight:z,visualState:ee,onSetVisualState:en}).visualState,r=n.onSetVisualState,s=n.maxHeight,p=(d=(0,u._)((0,f.useState)(0),2))[0],h=d[1],g=(0,f.useRef)(null),y=(m=(0,u._)((0,f.useState)(t===P.MZ.EXPANDED?"expanded":"collapsed"),2))[0],b=m[1],x=(w=(0,u._)((0,f.useState)(void 0),2))[0],S=w[1],k=(0,v.Z)(function(e){var n=e.height;"expanded"===y&&h(n)},{type:"debounce",wait:200}),(0,f.useEffect)(function(){if(g.current)switch(y){case"start-collapsing":b("is-collapsing");break;case"is-collapsing":S(0);break;case"start-expanding":b("is-expanding");break;case"is-expanding":S(p);break;case"expanded":S(void 0)}},[y,p]),E="expanded"!==y&&"is-expanding"!==y,C=(0,f.useCallback)(function(e){r(e?P.MZ.COLLAPSED:P.MZ.EXPANDED)},[r]),R=(0,f.useRef)(t),(0,f.useEffect)(function(){R.current===P.MZ.EXPANDED&&t===P.MZ.COLLAPSED&&g.current&&(b("start-collapsing"),S(Math.min(g.current.getBoundingClientRect().height,s)),b("start-collapsing")),R.current===P.MZ.COLLAPSED&&t===P.MZ.EXPANDED&&b("start-expanding"),R.current=t},[s,t]),{collapsedStep:y,isCollapsed:E,setIsCollapsed:C,blockWrapperRef:g,blockWrapperProps:{style:{height:x,transition:"height 120ms ease-out",overflow:"expanded"===y||"start-collapsing"===y?"visible":"hidden"},onTransitionEnd:function(){"is-collapsing"===y&&b("collapsed"),"is-expanding"===y&&b("expanded")}},blockResizeRef:k,measuredBlockHeight:p}),eE=ek.collapsedStep,eT=ek.isCollapsed,eC=ek.setIsCollapsed,eR=ek.blockWrapperRef,eZ=ek.blockWrapperProps,eD=ek.blockResizeRef,e_=ek.measuredBlockHeight;(0,f.useEffect)(function(){if(q.current){var e,n=q.current,t=function(){var t,r;eh(Math.max(0,n.scrollTop-(null!==(r=null===(t=ei.current)||void 0===t?void 0:t.offsetTop)&&void 0!==r?r:0))),ef(!0),e&&clearTimeout(e),e=setTimeout(function(){ef(!1)},500)};return n.addEventListener("scroll",t),function(){clearInterval(e),n.removeEventListener("scroll",t)}}},[q,ei]),(0,f.useEffect)(function(){if(ei.current&&q.current)return(0,_.j)(ei.current,function(){return el(!0),function(){el(!1)}},{root:q.current,threshold:0})},[q,ei]);var eA=(0,v.Z)(function(e){var n=e.height;"expanded"===eE&&ew(n)},{type:"debounce",wait:200}),eO=!1;return"collapsed"===eE?eO=!1:(!W||eg)&&(eO=!0),(0,l.BX)(c.G,{innerRef:ei,children:[(0,l.tZ)(ex,{isCollapsed:eT,setIsCollapsed:eC,openPane:O,isDone:W,data:H,localStartTime:V,localEndTime:j,startTime:K,endTime:J,type:Y,error:X,toolchain:Q,renderDebugWithAI:$,ports:et,renderPortsIntegration:er}),er?(0,l.tZ)(c.G,{innerRef:eA,style:{position:"sticky",top:28},children:(0,l.tZ)(eP.ms,{configurations:em.map(function(e){return e.configuration}),openWebview:function(){eS("/",em[0].configuration.localPort)},openNetworkingTool:function(){O({type:"networking"},!0)}})}):null,(0,l.tZ)("div",(0,a._)((0,o._)({ref:eR},eZ),{children:(0,l.tZ)(c.G,{css:eL.outputBlockTerminalWrapper,style:(D={},(0,i._)(D,eI.blockMinHeight,e_+"px"),(0,i._)(D,eI.terminalBackgroundColor,null==ev?void 0:ev.background),(0,i._)(D,T.topOffset,28+eb+"px"),D),children:eO?(0,l.tZ)(c.G,{innerRef:eD,children:(0,l.tZ)(Z,{onMessage:H.onMessage,onInput:L,openFile:N,openAIWithMessage:M,openSearchAndReplace:B,openWebview:eS,listFiles:G,maxHeight:z-28-eb,onResizeTerminal:U,scrollPosition:ep,scrollParent:function(e){var n,t,r,i=e+(null!==(r=null===(n=ei.current)||void 0===n?void 0:n.offsetTop)&&void 0!==r?r:0);null===(t=q.current)||void 0===t||t.scrollTo({top:i})},autoFocus:F})}):(0,l.tZ)(eN,{targetHeight:e_})})})),(0,l.tZ)(c.G,{css:eL.outputBlockClosingBorder})]})}function eM(e){var n=e.performPaneOperation,t=e.isActive,r=e.runner,i=e.toolchain,o=e.ports,a=e.listFiles,d=e.renderEmptyStateMessage,p=e.renderDebugWithAI,h=void 0===p||p,g=e.renderSearchAndReplaceContextMenu,m=void 0===g||g,y=e.renderPortsIntegration,b=void 0===y||y,w=(0,u._)((0,f.useState)([]),2),x=w[0],S=w[1],k=(0,u._)((0,f.useState)(0),2),E=k[0],T=k[1],C=(0,u._)((0,f.useState)(!0),2),R=C[0],Z=C[1],_=(0,f.useRef)(null),I=(0,eS.Z)(ek.y.Output),A=(0,u._)((0,f.useState)(!1),2),L=A[0],N=A[1],O=(0,f.useRef)(0),M=(0,eT.T3)(),B=(0,v.Z)(function(e){T(e.height)},{type:"throttle",wait:200}),G=(0,f.useCallback)(function(e){n({operation:"open",secondary:!0,pane:{type:(0,D.Dp)(e),data:e}})},[n]),F=(0,f.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n({operation:"open",secondary:t,pane:e})},[n]),q=(0,f.useCallback)(function(e){n({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[n]),z=(0,Y.ql)(),U=(0,f.useCallback)(function(e){z({chatMessage:e}),n({operation:"open",secondary:!0,pane:{type:"ghostwriterChat"}})},[n,z]);return(0,f.useEffect)(function(){return r.onStateChanged(function(e){N(e===P.Ah.BEFORE_RUN)})},[r]),(0,f.useEffect)(function(){S(r.getOutputBlocks())},[r]),(0,f.useEffect)(function(){var e=r.onAllBlocksChanged(function(e){S(e)}),n=r.onBlockChanged(function(e){!x.find(function(n){return n.id===e.id})&&_.current&&(_.current.scrollTo(0,_.current.scrollHeight),Z(!0)),S((0,s.ZP)(function(n){var t=n.findIndex(function(n){return n.id===e.id});t>=0?n[t]=e:n.push(e)}))});return function(){n(),e()}},[r,x,_]),(0,l.BX)(c.G,{css:eL.outputsListParent,innerRef:I,children:[L?(0,l.tZ)(eE.Z,{}):null,(0,l.BX)(c.G,{css:eL.outputsListWrapper,innerRef:B,children:[0===x.length&&(void 0===d||d)?(0,l.tZ)(eD,{runner:r}):null,(0,l.BX)(c.G,{css:[eL.outputsList,R&&eL.outputsListSnapToBottom],innerRef:_,onScroll:function(){_.current&&(_.current.scrollTop<O.current?Z(!1):Z(_.current.scrollHeight-_.current.scrollTop-20<E),O.current=_.current.scrollTop)},children:[x.map(function(e,n){var u=n===x.length-1;return(0,l.tZ)(eO,{rootRef:_,maxHeight:E,onInput:r.sendInput,openFile:G,openAIWithMessage:h?U:void 0,openSearchAndReplace:m?q:void 0,openPane:F,listFiles:a,onResizeTerminal:function(n){e.isDone||e.type!==P.kH.EXECUTION||r.resizeTerminalForBlock(e.id,n)},autoFocus:t&&u&&!M,isDone:e.isDone,type:e.type,error:e.error,visualState:e.visualState,onSetVisualState:function(n){return r.setBlockVisualState(e.id,n)},localStartTime:e.localStartTime,localEndTime:e.localEndTime,startTime:e.startTime,endTime:e.endTime,data:e.data,toolchain:i,renderDebugWithAI:h,ports:o,renderPortsIntegration:b},e.id)}),R?(0,l.tZ)(c.G,{css:eL.scrollSnap}):null]})]})]})}},32911:function(e,n,t){t.d(n,{ms:function(){return P}});var r=t(32477),i=t(8182),o=t(56596),a=t(35375),u=t(40028),l=t(74833),c=t(1498),s=t(15146),f=t(58003),d=t(58719),p=t(93918),h=t(29287),v=t(66985),g=t(43429),m=t(25425),y=t(73157),b=t(50494),w=(0,p.X)({wrapper:[h.l0.py(6),h.l0.flex.row,h.l0.align.center,h.l0.backgroundColor.accentPrimaryDimmest],wrapperWarning:[h.l0.py(6),h.l0.flex.row,h.l0.align.center,h.l0.backgroundColor.orangeDimmest],body:[h.l0.flex.growAndShrink(1)],firstLine:[h.l0.px(6),h.l0.rowWithGap(2),h.l0.align.center,h.l0.flex.wrap,h.l0.maxWidth("100%"),h.l0.overflow("hidden")],secondLine:[h.l0.px(6),h.l0.rowWithGap(2),h.l0.align.center,h.l0.flex.wrap,h.l0.maxWidth("100%"),h.l0.overflow("hidden"),h.l0.color.accentPrimaryStronger],secondLineWarning:[h.l0.px(6),h.l0.rowWithGap(2),h.l0.align.center,h.l0.flex.wrap,h.l0.maxWidth("100%"),h.l0.overflow("hidden"),h.l0.color.orangeStrongest],buttons:[h.l0.flex.row,h.l0.pr(6)],verticalDivider:[h.l0.ml(6),h.l0.mr(6),h.l0.height("1em"),h.l0.width(1),h.l0.backgroundColor.foregroundDefault]});function x(e){var n=e.openNetworkingTool,t=e.onClose,r=e.firstLine,a=e.secondLine,u=e.renderSecondLine,l=e.isWarning,c=void 0!==l&&l;return(0,i.BX)(o.G,{css:c?w.wrapperWarning:w.wrapper,children:[(0,i.BX)(o.G,{css:w.body,children:[(0,i.tZ)(o.G,{css:w.firstLine,children:r}),u?(0,i.tZ)(o.G,{css:c?w.secondLineWarning:w.secondLine,children:a}):null]}),(0,i.BX)(o.G,{css:w.buttons,children:[(0,i.tZ)(s.hU,{alt:"Networking tool",onClick:n,children:(0,i.tZ)(f.Z,{})}),(0,i.tZ)(s.hU,{alt:"Close",onClick:t,children:(0,i.tZ)(d.Z,{})})]})]})}function S(){return(0,m.P5)({controlName:"flag-dot-dev-url",logFlagToAnalytics:!1})?"replit.dev":"repl.co"}function k(e){var n=e.configuration,t=e.openWebview,r=e.openNetworkingTool,o=e.onClose,a=e.renderSecondLine,u=S(),s=(0,v.O2)(n.externalPort)?"{...}.".concat(u):"{...}.".concat(u,":").concat(n.externalPort);return(0,i.tZ)(x,{openNetworkingTool:r,onClose:o,firstLine:(0,i.BX)(i.HY,{children:[(0,i.BX)(l.xv,{children:["Port :",n.localPort," opened on"]}),(0,i.tZ)(c.zx,{variant:"underlined",text:s,onClick:t})]}),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(l.xv,{children:"You can manage this config in the"}),(0,i.tZ)(c.zx,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:a})}function E(e){var n=e.configuration,t=e.openNetworkingTool,r=e.onClose,o=e.renderSecondLine;return(0,i.tZ)(x,{openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but not exposed to the web."),secondLine:(0,i.tZ)(c.zx,{variant:"underlined",text:"Expose this port?",onClick:t}),renderSecondLine:o})}function T(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.tZ)(x,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but all available external ports are reserved."),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(l.xv,{children:"Remove an external port in"}),(0,i.tZ)(c.zx,{variant:"underlined",text:"port configuration",onClick:n}),(0,i.tZ)(l.xv,{children:"to open a new port."})]}),renderSecondLine:o})}function C(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.tZ)(x,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but is not configured properly."),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(l.xv,{children:"You can fix this in the"}),(0,i.tZ)(c.zx,{variant:"underlined",text:"Networking tool",onClick:n})]}),renderSecondLine:o})}function R(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.tZ)(x,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but has missing configuration."),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(l.xv,{children:"You can fix this in the"}),(0,i.tZ)(c.zx,{variant:"underlined",text:"Networking tool",onClick:n})]}),renderSecondLine:o})}function Z(e){var n=e.configuration,t=e.openWebview,r=e.openNetworkingTool,o=e.onClose,l=e.renderSecondLine,c=n.type;switch(c){case a.DL.FORWARDED:return(0,i.tZ)(k,{configuration:n,openWebview:t,openNetworkingTool:r,onClose:o,renderSecondLine:l});case a.DL.INTERNAL_ONLY:return(0,i.tZ)(E,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:l});case a.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:return(0,i.tZ)(T,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:l});case a.DL.MISCONFIGURED:return(0,i.tZ)(C,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:l});case a.DL.CONFIG_MISSING:return(0,i.tZ)(R,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:l});default:(0,u.Z)(c)}}function D(e){var n=e.configurations,t=e.openWebview,r=e.openNetworkingTool,u=e.onClose,s=e.renderSecondLine,f=S(),d=n.filter(function(e){return e.type===a.DL.FORWARDED}),p=n.filter(function(e){return e.type!==a.DL.FORWARDED});return(0,i.tZ)(x,{isWarning:0===d.length&&p.length>0,openNetworkingTool:r,onClose:u,firstLine:(0,i.BX)(i.HY,{children:[d.length>0?(0,i.BX)(i.HY,{children:[(0,i.BX)(l.xv,{children:[d.length," ",(0,y.Z)("port",d.length)," ","opened on"]}),(0,i.tZ)(c.zx,{variant:"underlined",text:"{...}.".concat(f),onClick:t})]}):null,d.length>0&&p.length>0?(0,i.tZ)(o.G,{css:w.verticalDivider}):null,p.length>0?(0,i.BX)(l.xv,{children:[p.length," ",(0,y.Z)("port",p.length)," ","failed to open"]}):null]}),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(l.xv,{children:"You can manage this config in the"}),(0,i.tZ)(c.zx,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:s})}function P(e){var n=e.configurations,t=e.openWebview,o=e.openNetworkingTool,a=e.onClose,u=(0,b.e)("port-nudges"),l=(0,r._)((0,g.useState)(!1),2),c=l[0],s=l[1],f=!u.isDone,d=(0,r._)((0,g.useState)(!0),2),p=d[0],h=d[1];return((0,g.useEffect)(function(){0===n.length&&h(!0)},[n]),(0,g.useEffect)(function(){if(!u.isDone){if(n.length>0&&!c){s(!0);return}0===n.length&&c&&u.setAsDone()}},[n,u,c]),p&&0!==n.length)?1===n.length?(0,i.tZ)(Z,{configuration:n[0],openNetworkingTool:o,openWebview:t,renderSecondLine:f,onClose:a}):(0,i.tZ)(D,{configurations:n,openNetworkingTool:o,openWebview:t,renderSecondLine:f,onClose:a}):null}},19562:function(e,n,t){t.d(n,{j:function(){return w}});var r=t(34142),i=t(87682),o=t(8182),a=t(88978),u=t(10041),l=t(48728),c=t(5344),s=t(73030),f=t(19408),d=t(82723),p=t(41140),h=t(27308),v=t(43429),g=t(80259),m=t(25425),y=t(29287),b=t(47030);function w(e){var n,t,w,x,S,k,E,T,C,R=e.xterm,Z=e.openAIWithMessage,D=e.openShellSearch,P=e.openSearchAndReplace,_=e.isOutputsTerminal,I=(t=(n={xterm:R,openAIWithMessage:Z}).xterm,w=n.openAIWithMessage,x=(0,m.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),(0,v.useMemo)(function(){if(!x&&w)return{data:{type:"context",label:"AI",icon:(0,o.tZ)(s.Z,{})},commands:function(){return[{match:g.pl,data:{type:"action",label:"Explain",icon:(0,o.tZ)(f.Z,{color:y.TV.blurpleStronger}),run:function(){var e,n;w({type:"chat",text:(n=null!==(e=null==t?void 0:t._term.getSelection())&&void 0!==e?e:"","\nCan you explain this shell output?\n\n```\n".concat(n,"\n```\n"))})}}}]}}},[x,t,w])),A=(k=(S={xterm:R,openShellSearch:D,openSearchAndReplace:P,isOutputsTerminal:void 0!==_&&_}).xterm,E=S.openShellSearch,T=S.openSearchAndReplace,C=S.isOutputsTerminal,(0,v.useMemo)(function(){var e=[];if(E){var n=C?(0,o.tZ)(b.Z,{}):(0,o.tZ)(p.Z,{});e.push({match:g.pl,data:{type:"action",label:C?"Find in Console":"Find in Shell",icon:n,run:function(){var e;E(null!==(e=null==k?void 0:k._term.getSelection())&&void 0!==e?e:"")}}})}if(T&&e.push({match:g.pl,data:{type:"action",label:"Find in Repl",icon:(0,o.tZ)(d.Z,{}),run:function(){var e;T(null!==(e=null==k?void 0:k._term.getSelection())&&void 0!==e?e:"")}}}),0!==e.length)return{data:{type:"context",label:"Search",icon:(0,o.tZ)(d.Z,{})},commands:function(){return e}}},[k,E,T,C])),L=(0,v.useMemo)(function(){return{data:{type:"context",label:"Clipboard",icon:(0,o.tZ)(l.Z,{})},commands:function(){return[{match:g.pl,data:{type:"action",label:"Copy",icon:(0,o.tZ)(c.Z,{}),keyboardShortcut:(0,h.l2)({cmdOrCtrl:!0,key:"c"}),run:function(){var e,n=null!==(e=null==R?void 0:R._term.getSelection())&&void 0!==e?e:"";(0,u.Z)(n)}}},{match:g.pl,data:{type:"action",label:"Paste",icon:(0,o.tZ)(l.Z,{}),keyboardShortcut:(0,h.l2)({cmdOrCtrl:!0,key:"v"}),run:function(){return(0,r._)(function(){var e,n;return(0,i.Jh)(this,function(t){switch(t.label){case 0:e="",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return e=t.sent(),[3,4];case 3:return n=t.sent(),a.kg.error("Shell context menu paste failed",{message:n.message}),[2];case 4:return null==R||R._term.paste(e),[2]}})})()}}}]}}},[R]);return(0,v.useMemo)(function(){var e=[];return I&&e.push(I),A&&e.push(A),L&&e.push(L),{data:{type:"context",label:"Search actions",icon:(0,o.tZ)(d.Z,{})},commands:function(){return e}}},[I,A,L])}},14675:function(e,n,t){t.d(n,{R:function(){return c}});var r=t(8182),i=t(94450),o=t.n(i),a=t(29287),u=t(83848),l=t(43429);function c(e){var n=e.searchValue,t=e.setSearchValue,i=e.findNext,c=e.findPrevious,s=e.exit,f=(0,l.useRef)(null);(0,l.useEffect)(function(){f.current&&f.current.focus()},[]);var d=function(e){if("Escape"===e.key){s();return}"Enter"===e.key&&(e.shiftKey?c(n):i(n))};return(0,r.BX)("div",{className:"jsx-cae03adee2975d4 search",children:[(0,r.tZ)("input",{ref:f,placeholder:"Find",value:n,onChange:function(e){return t(e.target.value)},onKeyDown:function(e){return d(e)},css:[a.l0.focusRing],className:"jsx-cae03adee2975d4"}),(0,r.tZ)(u.Z,{size:"small",onClick:function(){return i(n)},children:"Next"}),(0,r.tZ)(u.Z,{size:"small",onClick:function(){return c(n)},children:"Previous"}),(0,r.tZ)(u.Z,{size:"small",onClick:s,children:"Exit"}),(0,r.tZ)(o(),{id:"cae03adee2975d4",children:".search.jsx-cae03adee2975d4{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:30px}input.jsx-cae03adee2975d4{padding:4px var(--space-8)var(--space-4);background-color:var(--background-default);color:var(--foreground-default);height:24px;width:85px;border:none;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}input.jsx-cae03adee2975d4::-webkit-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:-moz-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::-moz-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:-ms-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::-ms-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:focus{outline:none;border:var(--accent-primary-default)}input.jsx-cae03adee2975d4,.search button{margin:0 var(--space-4)}"})]})}},75834:function(e,n,t){t.d(n,{Z:function(){return U}});var r,i,o=t(34142),a=t(32477),u=t(87682),l=t(8182),c=t(94450),s=t.n(c),f=t(43429),d=t(48900),p=t(26508),h=t(59868),v=t(28268),g=t(47001),m=t(86612),y=t(12834),b=t(88936),w=t(49344),x=t(45726),S=t(93918),k=t(29287),E=t(56596),T=t(37951),C=t(1498),R=t(73722),Z=t(25425),D=t(50782),P=t(58130),_=t(31811),I=t(94106),A=t(45903),L=t(93295),N=t(23982),O=t(66039);function M(){var e=(0,L._)(["\n  query WorkspaceVncOutput($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        slug\n        owner {\n          ... on Team {\n            id\n            username\n          }\n          ... on User {\n            id\n            username\n          }\n        }\n      }\n    }\n  }\n"]);return M=function(){return e},e}var B={},G=(0,N.Ps)(M()),F=t(75246),q=t(68333);(r=i||(i={})).Connecting="Connecting",r.Connected="Connected",r.Disconnected="Disconnected",r.Errored="Errored";var z="VNC_PASSWORD";function U(e){var n,r,i,c,S,k,E,T,C,R,L,N=e.fs,M=e.container,F=(0,a._)(f.useState(null),2),q=F[0],U=F[1],W=(0,a._)(f.useState(void 0),2),X=W[0],V=W[1],j=(0,a._)(f.useState(!1),2),K=j[0],J=j[1],Y=(0,a._)(f.useState("Connecting"),2),Q=Y[0],$=Y[1],ee=(0,a._)(f.useState(null),2),en=ee[0],et=ee[1],er=(0,a._)(f.useState(!1),2),ei=er[0],eo=er[1],ea=(0,a._)(f.useState(!1),2),eu=ea[0],el=ea[1],ec=(0,a._)(f.useState(null),2),es=ec[0],ef=ec[1],ed=f.useRef(0),ep=(0,y.Z)(),eh=(0,Z.P5)({controlName:"flag-vnc-error-status",logFlagToAnalytics:!1}),ev=(0,Z.P5)({controlName:"flag-vnc-dash-url",logFlagToAnalytics:!1}),eg=(0,I.useRouter)().pathname,em=(L=null==(R=(null==(C=(r={skip:({skip:!(ev&&("/replEnvironmentDesktop"===eg||"/replEnvironmentMobile"===eg)&&!(0,_.Z)())}).skip,variables:{replId:(0,D.Z)()}},i=(0,A._)({},B,r),O.a(G,i)).data)?void 0:C.repl.__typename)==="Repl"?C.repl:null)?void 0:null===(n=R.owner)||void 0===n?void 0:n.username,R&&L&&!(R.slug.length+L.length+2>63)?(S=(c={username:L,replSlug:R.slug}).replSlug,k=c.username,E=(0,_.Z)()?P.js:P.ck,T=(0,P.mZ)(E),"".concat(T,"//").concat(S,"--").concat(k,".").concat(E)):null),ey=(0,m.Z)(M);(0,Z.P5)({controlName:"flag-dot-dev-url",logFlagToAnalytics:!1})&&ey&&(em=ey.replace("http","ws")),(0,h.j)(h.U3.VNC_OPENED),f.useEffect(function(){if(em){if(M.getConnectionState()===g.em.CONNECTED){if(!em)return;ef(em);return}return M.onConnectionStateChanged(function(e){e===g.em.CONNECTED&&em&&ef(em)})}},[M,em]),f.useEffect(function(){if(!em){if(M.getConnectionState()===g.em.CONNECTED){M.getVncUrl().then(function(e){return ef(e)});return}return M.onConnectionStateChanged(function(e){e===g.em.CONNECTED&&M.getVncUrl().then(function(e){return ef(e)})})}},[M,em]);var eb=(0,a._)(f.useState(null),2),ew=eb[0],ex=eb[1],eS=f.useRef(function(){return null});f.useEffect(function(){eS.current()},[ew]);var ek=(0,p.Z)(function(e){return ex(e.width&&e.height?{width:e.width,height:e.height}:null)},{type:"throttle",wait:100}),eE=f.useRef(function(e){});f.useEffect(function(){eE.current(eu)},[eu]),f.useEffect(function(){if(!q){var e=!1;return t.e(5925).then(t.bind(t,65925)).then(function(n){e||U(n)}),function(){e=!0}}},[q]),f.useEffect(function(){eh||"Disconnected"!==Q||setTimeout(function(){ep.current&&$("Connecting")},Math.random()*(Math.pow(2,ed.current)-1)*1e3)},[Q,ep,eh]),f.useEffect(function(){if(eh&&"Disconnected"===Q){var e=setTimeout(function(){$("Connecting")},Math.random()*(Math.pow(2,ed.current)-1)*1e3);return function(){clearTimeout(e)}}},[Q,ep,eh]);var eT=(0,D.Z)();f.useEffect(function(){if(es&&en&&q&&"Connecting"===Q){ed.current++;var e=q.default,n=M.getConnectionMetadata(),t={credentials:{username:null==n?void 0:n.token,password:X||""}};(0,h.j)(h.U3.VNC_CONNECTED);var r=new e(en,es,t);r.scaleViewport=!0,r.resizeSession=!0;var i=function(){ep.current&&(ed.current=0,$("Connected"))},a=function(e){var n=e.detail.capabilities.audio;eo(void 0!==window.MediaSource&&!!n)},l=function(e){if(eS.current=function(){return null},eE.current=function(e){},r.removeEventListener("securityfailure",c),r.removeEventListener("disconnect",l),r.removeEventListener("capabilities",a),r.removeEventListener("connect",i),ep.current){if(eh&&!e.detail.clean){var n=M.getConnectionMetadata(),t=n?(0,P.he)(n.token):null;(0,h.j)(h.U3.VNC_ERRORED,{vncUrl:es,replId:eT,cluster:null==t?void 0:t.cluster}),$("Errored");return}$("Disconnected")}},c=function(){if(ep.current){var e,n=function(){J(!0)};(e=(0,o._)(function(){var e,t,r;return(0,u.Jh)(this,function(i){switch(i.label){case 0:return[4,N.readFile(".env")];case 1:if(e=i.sent(),!ep.current)return[2];if(e.error||(t=e.content.toString("utf8"),!(z in(r=v.Z.parse(t)))))return n(),[2];return V(r[z]),[2]}})}),function(){return e.apply(this,arguments)})().catch(function(e){return d.Tb(e)})}};return r.addEventListener("connect",i),r.addEventListener("capabilities",a),r.addEventListener("disconnect",l),r.addEventListener("securityfailure",c),eS.current=function(){return r._windowResize()},eo(!1),el(!1),eE.current=function(n){n?((0,h.j)(h.U3.VNC_AUDIO_ENABLED),r.enableAudio(2,window.MediaSource.isTypeSupported("audio/webm;codecs=opus")?e.audioCodecs.OpusWebM:e.audioCodecs.MP3,32768)):r.disableAudio()},function(){ep.current||(eS.current=function(){return null},eE.current=function(e){},r.removeEventListener("securityfailure",c),r.removeEventListener("disconnect",l),r.removeEventListener("capabilities",a),r.removeEventListener("connect",i),r.disconnect())}}},[q,en,M,es,N,X,Q,ep,eh,eT]);var eC="vnc-output-".concat(Q.toLowerCase());return(0,l.BX)("div",{className:"jsx-612fb0831fb3a82c vnc",children:[ei?(0,l.BX)("label",{className:"jsx-612fb0831fb3a82c vnc-audio",children:["\uD83C\uDFA7"," ",(0,l.tZ)("input",{type:"checkbox",checked:eu,onChange:function(e){return el(e.target.checked)},className:"jsx-612fb0831fb3a82c"})]}):null,(0,l.tZ)("div",{ref:function(e){ek(e),et(e)},"data-cy":eC,className:"jsx-612fb0831fb3a82c vnc-target"}),"Connecting"===Q||"Disconnected"===Q?(0,l.tZ)("div",{className:"jsx-612fb0831fb3a82c vnc-overlay",children:(0,l.tZ)(b.Z,{size:32})}):null,"Errored"===Q?(0,l.tZ)(H,{vncUrl:es,onRetry:function(){return $("Connecting")}}):null,(0,l.tZ)(w.u,{isOpen:K,onRequestClose:function(){return J(!1)},children:(0,l.tZ)(x.Z,{prompt:"Password",desc:"The output is password protected, please input it",placeholder:"password",type:"text",onCancel:function(){return J(!1)},onConfirm:function(e){V(e),J(!1)}})}),(0,l.tZ)(s(),{id:"612fb0831fb3a82c",children:".vnc.jsx-612fb0831fb3a82c{position:relative}.vnc.jsx-612fb0831fb3a82c,.vnc-target.jsx-612fb0831fb3a82c{height:100%;width:100%}.vnc-audio.jsx-612fb0831fb3a82c{position:absolute;bottom:0;right:0;padding:.2em}.vnc-overlay.jsx-612fb0831fb3a82c{top:0;position:absolute;height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:rgba(0,0,0,.85);color:var(--white)}"})]})}var W=(0,S.X)({root:[k.l0.coverContainer,k.l0.center,k.l0.p(16)],inner:[k.l0.colWithGap(8),k.l0.width(250)],diagnosisContent:[k.l0.py(8)]});function H(e){var n=e.vncUrl,t=e.onRetry,r=null;if(n){var i=new URL("wss://10622591-6a32-44be-aa89-1421705f33ea.id.repl.co").hostname;r=(0,l.tZ)(F.Q,{headerContent:"Diagnosis",children:(0,l.tZ)(E.G,{css:[W.diagnosisContent],children:(0,l.tZ)(q.ZP,{children:"Open this link and check if you can visit this URL from your browser:\n[".concat(i,"](https://").concat(i,").\n\nIf you see a browser error, it's possible that your ISP have security settings blocking the URL. Please contact your ISP and ask them to unblock the URL above. Here are the support links for common ISPs:\n- [Xfinity](https://www.xfinity.com/support/articles/report-blocked-website)\n- [Spectrum.net](https://www.spectrum.net/support/forms/unblock_site)\n")})})})}return(0,l.tZ)(E.G,{css:W.root,children:(0,l.BX)(E.G,{css:W.inner,children:[(0,l.tZ)(T.E,{colorway:"warning",text:"There was an error connecting to the server"}),r,(0,l.tZ)(C.zx,{iconLeft:(0,l.tZ)(R.Z,{}),text:"Try again",onClick:t})]})})}},66985:function(e,n,t){function r(e){return 80===e||443===e}function i(e,n){var t=new URL(e);return!n||r(n)?t.port&&(t.port=""):t.port=n.toString(),t}function o(e){var n=e.url,t=e.port,i=e.path,o=e.id,a=new URL(n);return r(t)?a.port="":a.port=t.toString(),a.searchParams.set("initialPath",i),a.searchParams.set("id",o),a}t.d(n,{Gz:function(){return o},O2:function(){return r},hw:function(){return i}})},25961:function(e,n,t){t.d(n,{Ih:function(){return m},bM:function(){return y},ir:function(){return x}});var r=t(39698),i=t(45903),o=t(25e3),a=t(8182);t(43429);var u=t(27308),l=t(93918),c=t(29287),s=t(56596),f=t(74833),d=t(21557),p=(0,t(91608).$)(["fontSize","gap"]),h=p.cssVars,v=p.styleTokens,g=(0,l.X)({chord:[c.l0.display.inlineFlex,c.l0.rowWithGap(12)],shortcut:[c.l0.display.inlineFlex,c.l0.flex.row,{fontSize:v.fontSize,"& > div":{marginRight:v.gap},"& > div:last-child":{marginRight:0}}]});function m(e){return((0,u.bU)(e)?e:[e]).map(function(e){return(0,u.QR)(e).map(function(e){var n;return null!==(n=w[e])&&void 0!==n?n:e.toUpperCase()}).join(" ")}).join(" ")}function y(e){if((0,u.bU)(e.keyCombo))return(0,a.tZ)(s.G,{"data-testid":"Keybinding:".concat(e.keyCombo.join(" ")),css:g.chord,children:e.keyCombo.map(function(n,t){return(0,a.tZ)(y,(0,o._)((0,i._)({},e),{keyCombo:n}),t)})});var n=(0,u.QR)(e.keyCombo);return(0,a.tZ)(s.G,{"data-testid":"Keybinding:".concat(e.keyCombo),css:g.shortcut,style:(0,r._)({},h.gap,e.hideBorder?"2px":"4px"),title:e.keyCombo,children:n.map(function(n){var t;return(0,a.tZ)(x,{text:n,hideBorder:e.hideBorder,small:e.small,isActive:null==e?void 0:null===(t=e.match)||void 0===t?void 0:t.includes(n.toLowerCase())},n)})})}var b=(0,l.X)({root:[c.l0.color.foregroundDimmest,c.l0.position.relative,c.l0.px(4),c.l0.py(1),{fontSize:"inherit",minWidth:c.TV.space16,textAlign:"center",textTransform:"capitalize"}],border:[c.l0.coverContainer,c.l0.borderRadius(4),{opacity:.5,minWidth:c.TV.space16,border:"1px solid",borderColor:c.TV.outlineStrongest}]}),w={Ctrl:d.V5?"":"Ctrl",Cmd:d.V5?"":"Cmd",Alt:d.V5?"":"Alt",Shift:d.V5?"":"Shift",Enter:d.V5?"Return":"Enter",ArrowLeft:"",ArrowRight:"",ArrowUp:"",ArrowDown:""," ":"Space"};function x(e){var n,t,i=e.text,o=e.small,u=void 0!==o&&o,l=e.isActive,d=void 0!==l&&l,p=e.hideBorder,v=(n={},(0,r._)(n,h.fontSize,u?c.TV.fontSizeSmall:c.TV.fontSizeDefault),(0,r._)(n,"height",u?20:24),n);d&&(v.fontWeight=c.TV.fontWeightMedium,v.color=c.TV.foregroundDefault);var g={borderColor:c.TV.foregroundDefault,opacity:1};return(0,a.BX)(s.G,{css:b.root,style:v,children:["string"==typeof i?(0,a.tZ)(f.xv,{variant:u?"small":"text",children:null!==(t=w[i])&&void 0!==t?t:i}):i,void 0!==p&&p?null:(0,a.tZ)(s.G,{css:b.border,style:d?g:void 0})]})}},74652:function(e,n,t){t.d(n,{GO:function(){return l},Ih:function(){return u.Ih},Il:function(){return o.Il},bM:function(){return u.bM},gf:function(){return o.gf}});var r=t(8182),i=t(43429),o=t(96003),a=t(27308),u=t(25961);function l(e){var n=(0,o.ns)(e);return(0,r.BX)(o.Ge.Provider,{value:n,children:[e.children,(0,r.tZ)(c,{})]})}function c(){var e=(0,o.Sy)(),n=(0,i.useRef)(null);return(0,i.useEffect)(function(){var t=function(t){var r=(0,a.IX)(t);if(r){var i=r;n.current&&(i=(0,a.cZ)(n.current,r));var u=e(i);switch(u.kind){case o.Xp.NoMatch:n.current=null;break;case o.Xp.WaitingForChord:n.current=u.key,t.preventDefault();break;case o.Xp.MatchFound:n.current=null;var l=!0,c=!1,s=void 0;try{for(var f,d=u.matches[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var p=f.value,h=p.run,v=p.bubble;if(!1!==h()&&(t.preventDefault(),!v))break}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}},[e]),null}},45123:function(e,n,t){t.d(n,{T:function(){return f},W:function(){return d}});var r=t(34142),i=t(32477),o=t(87682),a=t(72190),u=t(30084),l=t(39756),c=t(64540),s=t(29559);function f(e){var n=e.find(function(e){return e.toLowerCase().endsWith("readme.md")});return n?n:e.includes("Makefile")?"Makefile":e.find(s.gK)||e.find(function(e){return![".replit","replit.nix"].includes(e)&&!(0,a.C)(e)})}function d(e){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e){var n,t,a,d,p,h,v,g,m;function y(){return(y=(0,r._)(function(){var e,n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:if(!(e=null==p?void 0:p.entrypoint))return[2,null];if(!(0,s.Il)(e))return[2,g.includes(e)?e:null];return[4,t.stat(e)];case 1:return[2,(n=r.sent()).exists&&n.type===u.Tv.File?e:null]}})})).apply(this,arguments)}return(0,o.Jh)(this,function(r){switch(r.label){case 0:if(n=e.dotReplit,t=e.fs,!c.l)throw Error("Expected apollo client");return[4,Promise.all([t.readDir(l.Ql),n.getConfig()])];case 1:if(d=(a=i._.apply(void 0,[r.sent(),2]))[0],p=a[1].config,!d||d.error)throw Error("Could not read files");return v=(h=d.children).find(function(e){return e.type===u.Tv.File&&e.filename.toLowerCase().endsWith("readme.md")}),g=h.filter(function(e){return e.type===u.Tv.File}).map(function(e){return e.filename}),[4,function(){return y.apply(this,arguments)}()];case 2:if(m=r.sent())return[2,{entrypoint:m,readmeFile:null==v?void 0:v.filename}];return[2,{entrypoint:f(g),readmeFile:null==v?void 0:v.filename}]}})})).apply(this,arguments)}},11774:function(e,n,t){function r(e){var n=document.createElement("canvas"),t=n.getContext("2d");if(n.width=e.width,n.height=e.height,!t)throw Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map(function(r){var i=new window.ImageData(new Uint8ClampedArray(r.pixels),e.width,e.height);return t.putImageData(i,0,0),n.toDataURL()})}}function i(e){return new Promise(function(n,t){var r=new window.Image;r.src=e,r.onload=function(){n(r)},r.onerror=t})}function o(e){return new Promise(function(n,t){Promise.all(e.frames.map(i)).then(function(r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var o=i.getContext("2d");if(!o){t(Error("failed to get canvas ctx"));return}n({frames:r.map(function(n){return o.drawImage(n,0,0),{pixels:Array.from(o.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}),preview:e.frames[0],width:e.width,height:e.height})}).catch(t)})}t.d(n,{C:function(){return r},u:function(){return o}})},86533:function(e,n,t){t.d(n,{z:function(){return a}});var r=t(72190),i=t(39756),o=t(17789);function a(e){var n=e.siblingNames,t=e.fileName,a=e.initialValue,u=e.parentPath;if(t.includes("/"))return"File names cannot include forward slashes";if("."===t||".."===t)return'File names cannot be "'.concat(t,'"');if(t.match(/^\s/)||t.match(/\s$/))return"File names cannot start or end with whitespace";if(a!==t&&n.includes(t))return"A file or folder with that name already exists";if(t.length>100)return"File names cannot be longer than 100 characters";var l=u===i.Ql?t:u+"/"+t;return l===o.w?"You can create environment variables with the Secrets tool! (.env files are deprecated)":(0,r.C)(l)?'"'.concat(l,'" is reserved'):null}},52902:function(e,n,t){t.d(n,{kz:function(){return S},F3:function(){return p},fK:function(){return b},ME:function(){return c},DQ:function(){return f},Dp:function(){return u},WQ:function(){return d},Ur:function(){return s},RX:function(){return l},b:function(){return v},Se:function(){return x}});var r=t(30084),i=t(51384),o=t(29287),a=t(29559);function u(e){var n=e.path;return n?(0,a.T3)(n)?"media":(0,a.sL)(n)?"draw":(0,a.IQ)(n)?"pedit":"codeEditor":"codeEditor"}function l(e){return"codeEditor"===e||"media"===e||"pedit"===e||"draw"===e||"history"===e}function c(e){return e.filter(function(e){return e.type===r.Tv.File}).map(function(e){return{type:u({path:e.path}),data:{path:e.path}}})}function s(e){return l(e.type)}function f(e){return s(e)?e.data.path:null}function d(e){return"extension"===e.type}var p=(0,i.iv)([o.l0.width("100%"),o.l0.maxWidth(600),{marginLeft:"auto",marginRight:"auto"}]),h=["autograder","education","instructions","markdown","threadInbox","extensionStore","chat","docs","webview","vnc","runnerOutput","git","packager","envEditor","debugger","tutorial","database","neon","replAuth","autograder","unitTests","education","preferences","deployments","ghostwriterChat","extensionDevtools","problems","networking"];function v(e,n){return n&&h.indexOf("webview")>=0&&h.splice(h.indexOf("webview"),1),h.includes(e)}var g=t(8182),m=t(43429),y={type:"commands",data:{autoFocus:!1}};function b(e){var n=e.config;return{Icon:function(e){var t=e.pane,r=e.size,i=n[t.type]?t:y,o=n[i.type].Icon;return(0,g.tZ)(o,{pane:i,size:void 0===r?16:r})},Content:function(e){var t=e.pane,r=e.options,i=n[t.type]?t:y,o=n[i.type].Content;return(0,g.tZ)(o,{pane:i,options:r})},getTitle:function(e){var t=n[e.type]?e:y;return n[t.type].getTitle(t)},decode:function(e,t){var r,i=null;try{i=null===(r=n[e])||void 0===r?void 0:r.decode(t)}catch(e){}return i}}}var w=(0,m.createContext)(null);function x(){var e=(0,m.useContext)(w);if(!e)throw Error("Expected PaneUI in context");return e}var S=w.Provider},80502:function(e,n,t){t.d(n,{Z:function(){return N}});var r,i=t(34142),o=t(32477),a=t(87682),u=t(48900),l=t(7444),c=t(92920),s=t(10041),f=t(40473),d=t(63009),p=t(43429),h=t(26508),v=t(72282),g=t.n(v)()(function(){if("undefined"!=typeof AudioContext){var e=(r||(r=new AudioContext),r),n=e.createBufferSource();e.decodeAudioData(function(e){for(var n=window.atob(e),t=n.length,r=new Uint8Array(t),i=0;i<t;i++)r[i]=n.charCodeAt(i);return r.buffer}("SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),function(t){n.buffer=t,n.connect(e.destination),n.start(0)})}},500,{leading:!0,trailing:!0}),m="replit-icons-font",y=t(47507),b="BESbswy";function w(e){return x.apply(this,arguments)}function x(){return(x=(0,i._)(function(e){return(0,a.Jh)(this,function(n){switch(n.label){case 0:if(!document.fonts)return[3,2];return[4,function(e,n){return k.apply(this,arguments)}(document.fonts,e)];case 1:case 3:return n.sent(),[2];case 2:return[4,Promise.all([E("serif",e),E("sans-serif",e),E("monospace",e)])]}})})).apply(this,arguments)}function S(e){var n=e.family,t=e.style,r=e.weight;return"".concat(void 0===t?"normal":t," ").concat(void 0===r?"normal":r," 100px ").concat(n)}function k(){return(k=(0,i._)(function(e,n){var t,r,i,o,u,l;return(0,a.Jh)(this,function(a){return t=n.fontInfo,i=void 0===(r=n.characters)?b:r,u=void 0===(o=n.timeout)?3e3:o,l=S(t),[2,new Promise(function(n,r){var o=!1,a=y.kg.timeStart({family:t.family,style:t.style,weight:t.weight}),c=setTimeout(function(){o=!0,a("xterm font loading timed out"),n()},u);e.load(l,i).then(function(){o||(a("xterm font loaded"),clearTimeout(c),n())}).catch(function(e){o||(clearTimeout(c),r(e))})})]})})).apply(this,arguments)}function E(e,n){return T.apply(this,arguments)}function T(){return(T=(0,i._)(function(e,n){var t,r,i,o,u,l,c,s,f;return(0,a.Jh)(this,function(a){return(t=n.fontInfo,i=void 0===(r=n.characters)?b:r,u=void 0===(o=n.timeout)?3e3:o,l=S(t),(c=document.createElement("span")).innerText=i,c.style.font="normal normal 100px ".concat(e),c.style.position="absolute",c.style.left="-9999px",c.style.top="-9999px",document.body.appendChild(c),s=c.offsetWidth,c.style.font=l,(f=function(){return s!==c.offsetWidth})())?[2]:[2,new Promise(function(e,n){var r=setInterval(function(){f()&&(clearInterval(r),clearTimeout(i),document.body.removeChild(c),e())},50),i=setTimeout(function(){if(clearInterval(r),document.body.removeChild(c),f()){e();return}n(Error("Font loading timed out "+t.family))},u)})]})})).apply(this,arguments)}function C(e){u.Tb(e)}var R='"ReplitHack"',Z=String.fromCharCode(61095);function D(){return(D=(0,i._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return!function(){if(!document.getElementById(m)){var e=document.createElement("style");e.id=m,e.type="text/css",e.appendChild(document.createTextNode("\n@font-face {\n  font-family: 'replit-icons';\n  font-style: normal;\n  font-weight: normal;\n  font-stretch: normal;\n  src: url(".concat("/public/fonts/replit-icons.woff",") format('woff'),\n    url(").concat("/public/fonts/replit-icons.ttf",") format('truetype');\n}"))),document.head.appendChild(e)}}(),[4,Promise.all([w({fontInfo:{family:"replit-icons"},characters:Z}).catch(C),w({fontInfo:{family:R,weight:"400"}}).catch(C),w({fontInfo:{family:R,weight:"400",style:"italic"}}).catch(C),w({fontInfo:{family:R,weight:"700"}}).catch(C),w({fontInfo:{family:R,weight:"700",style:"italic"}}).catch(C)])];case 1:return e.sent(),[2]}})})).apply(this,arguments)}var P=t(58200),_=t(96003),I=t(27308),A=t(56337),L=t(89106);function N(e){var n,r,v,m,y=(0,o._)((0,p.useState)(null),2),b=y[0],w=y[1],x=(0,o._)((0,p.useState)(null),2),S=x[0],k=x[1],E=(0,P.f)(),T=(0,c.Z)().preferences,C=T.fontSize,Z=T.accessibleTerminal,N=(0,d.uV)(),O=(0,A.Z)(),M=null==e?void 0:e.openFile,B=(0,l.Z)(null==e?void 0:e.openWebview),G=null==e?void 0:e.listFiles,F={screenReaderMode:Z,fileLinking:(0,p.useMemo)(function(){return M&&G?{openFile:M,listFiles:G}:null},[M,G]),terminalTheme:E,fontSize:C,scrollback:null==e?void 0:e.scrollback},q=(0,l.Z)(F),z=(0,h.Z)(function(){(null==e?void 0:e.autoFit)!==!1&&(null==S||S.fit())},{type:"debounce",wait:200}),U=(0,p.useRef)(null),W=(0,l.Z)(null==e?void 0:e.size),H=(0,_.Sy)();return(0,p.useLayoutEffect)(function(){if(b){var e=[];return(function(){return n.apply(this,arguments)})().catch(function(e){if(e.message&&e.message.toLowerCase().includes("loading chunk")){u.$e(function(n){n.setExtra("message",e.message),n.setExtra("stack",e.stack),u.Tb(Error("Loading chunk failed"))});return}N({error:e,origin:"Xterm: init"})}),function(){e.forEach(function(e){return e()})}}function n(){return(n=(0,i._)(function(){var n,r,i,l,c,d,p,h,v,m,y,w,x,S,E,T,C,Z,P,A,N;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,Promise.all([Promise.all([(0,f.Z)(function(){return t.e(9784).then(t.t.bind(t,54095,23))}),(0,f.Z)(function(){return t.e(5030).then(t.t.bind(t,5030,23))}),(0,f.Z)(function(){return t.e(380).then(t.t.bind(t,10774,23))}),(0,f.Z)(function(){return t.e(1225).then(t.t.bind(t,41225,23))}),(0,f.Z)(function(){return t.e(5564).then(t.t.bind(t,5564,23))}),(0,f.Z)(function(){return t.e(3900).then(t.bind(t,53900))}),(0,f.Z)(function(){return t.e(9286).then(t.t.bind(t,19286,23))}),(0,f.Z)(function(){return t.e(2971).then(t.t.bind(t,62792,23))})]),function(){return D.apply(this,arguments)}()])];case 1:var M;if(i=o._.apply(void 0,[a.sent(),1]),c=(l=(0,o._)(i[0],8))[0].Terminal,d=l[1].FitAddon,p=l[2].SearchAddon,h=l[3].WebLinksAddon,v=l[4].Unicode11Addon,m=l[5].FileLinkAddon,y=l[6].CanvasAddon,w=l[7].WebglAddon,!b)return[2];return S={allowProposedApi:!0,cursorBlink:!1,scrollback:null!==(x=q.current.scrollback)&&void 0!==x?x:1e3,tabStopWidth:4,fontFamily:"".concat(R,', replit-icons, Monaco, "Ubuntu Mono", Consolas, monospace'),fontSize:q.current.fontSize,lineHeight:1,fontWeight:400,fontWeightBold:700,drawBoldTextInBrightColors:!1,minimumContrastRatio:4.5,theme:q.current.terminalTheme,screenReaderMode:q.current.screenReaderMode},(null===(n=W.current)||void 0===n?void 0:n.cols)!==void 0&&(S.cols=W.current.cols),(null===(r=W.current)||void 0===r?void 0:r.rows)!==void 0&&(S.rows=W.current.rows),E=new c(S),q.current.fileLinking?(U.current=new m(q.current.fileLinking.openFile,q.current.fileLinking.listFiles),E.loadAddon(U.current)):U.current=null,T=new d,E.loadAddon(T),C=new h((M=function(e){O?L.X.openExternalUrl(e):window.open(e,"_blank")},function(e,n){var t;try{t=new URL(n)}catch(e){return}if(("0.0.0.0"===t.hostname||"localhost"===t.hostname)&&void 0!==B.current){B.current(t.pathname,parseInt(t.port,10));return}M(n)})),E.loadAddon(C),Z=new p,E.loadAddon(Z),P=new v,E.loadAddon(P),E.unicode.activeVersion="11",E.onBell(g),E.open(b),e.push(function(){return E.dispose()}),function(){try{if(!(!function(){if(!/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent))return!1;var e=window.navigator.userAgent.match(/Version\/(\d+)/);return null===e||e.length<2||16>parseInt(e[1],10)}()&&document.createElement("canvas").getContext("webgl2"))){var e=new y;E.loadAddon(e);return}var n=new w;E.loadAddon(n)}catch(e){var t=new y;E.loadAddon(t)}}(),A=!1,N=null,E.attachCustomKeyEventHandler(function(e){var n=(0,I.IX)(e);if(n){var t=n;N&&(t=(0,I.cZ)(N,n));var r=H(t);switch(r.kind){case _.Xp.NoMatch:N=null;break;case _.Xp.WaitingForChord:return N=r.key,!1;case _.Xp.MatchFound:return N=null,!1}}return(!window.navigator.clipboard||"c"!==e.key.toLowerCase()||!e.ctrlKey||!e.shiftKey||("keyup"===e.type&&E.hasSelection()&&(0,s.Z)(E.getSelection()).catch(function(e){u.$e(function(n){n.setTag("xterm-clipboard",!0),n.setExtra("type","copy"),u.Tb(e)})}),e.preventDefault(),e.stopPropagation(),!1))&&("shift"===e.key.toLowerCase()||"ctrl"===e.key.toLowerCase()||"alt"===e.key.toLowerCase()||"meta"===e.key.toLowerCase()||("tab"!==e.key.toLowerCase()||!A)&&(A="escape"===e.key.toLowerCase(),!0))}),k({onKey:E.onKey.bind(E),onData:E.onData.bind(E),onResize:E.onResize.bind(E),write:E.write.bind(E),fit:function(){var e=b.getBoundingClientRect(),n=e.width,t=e.height;n>0&&t>0&&T.fit()},focus:function(){return E.focus()},clear:function(){return E.clear()},findPrevious:function(e,n){return Z.findPrevious(e,n)},findNext:function(e,n){return Z.findNext(e,n)},getSize:function(){return{cols:E.cols,rows:E.rows}},paste:function(e){return E.paste(e)},_term:E}),z(b),[2]}})})).apply(this,arguments)}},[b,z,q,N,W,H,O,B]),n=null==S?void 0:S._term,r=F.screenReaderMode,v=F.fileLinking,m=F.terminalTheme,(0,p.useEffect)(function(){n&&m&&(n.options.theme=m)},[n,m]),(0,p.useEffect)(function(){n&&(n.options.screenReaderMode=r)},[n,r]),(0,p.useEffect)(function(){if(n){if(!v){U.current&&U.current.deactivate();return}if(!U.current){var e=!1;return t.e(3900).then(t.bind(t,53900)).then(function(t){var r=t.FileLinkAddon;e||(U.current=new r(v.openFile,v.listFiles),n.loadAddon(U.current))}),function(){e=!0}}U.current.update(v.openFile,v.listFiles),U.current.reactivate()}},[n,v,U]),(0,p.useEffect)(function(){var e=null==S?void 0:S._term;e&&C&&e.options.fontSize!==C&&(e.options.fontSize=C,e.refresh(0,e.rows-1),S.fit())},[C,S]),[S,w]}},58200:function(e,n,t){t.d(n,{f:function(){return a}});var r=t(70671),i=t(49932),o=t(43429);function a(){var e=(0,r.F)().values;return(0,o.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.Sj.values;return{foreground:e.global.foregroundDefault,background:e.global.backgroundDefault,cursor:e.global.foregroundDefault,cursorAccent:e.global.backgroundHigher,selectionBackground:e.global.foregroundDefault,black:e.global.backgroundRoot,red:e.global.redStronger,green:e.global.accentPositiveDefault,yellow:e.global.yellowDefault,blue:e.global.blueStronger,magenta:e.global.magentaDefault,cyan:e.global.tealDefault,white:e.global.foregroundDefault,brightBlack:e.global.outlineDimmest,brightRed:e.global.redStrongest,brightGreen:e.global.accentPositiveStronger,brightYellow:e.global.yellowStronger,brightBlue:e.global.blueStrongest,brightMagenta:e.global.magentaStronger,brightCyan:e.global.tealStronger,brightWhite:e.global.foregroundDefault}}(e)},[e])}},45434:function(e,n,t){t.d(n,{J1:function(){return s},ce:function(){return m},hf:function(){return h},uL:function(){return c},yL:function(){return p}});var r,i,o=t(21289),a=t(92809),u=t(36617),l=t(52297);function c(e){return u.B4.Check(a.Type.Union([l.LD,l.t3]),e)}function s(e){return u.B4.Check(l.vD,e)}(r=i||(i={})).Response="response",r.Error="error",r.Debug="debug",r.Intent="intent",r.TokenUsage="tokenUsage";var f={defaultLimit:{messageCharacters:2e3,responseTokens:1e3,fileContextCharacters:8e3,maxTotalTokens:4050},gpt35:{messageCharacters:5e3,responseTokens:4e3,fileContextCharacters:3e4,maxTotalTokens:16e3},gpt4:{messageCharacters:2e3,responseTokens:1e3,fileContextCharacters:1e4,maxTotalTokens:8e3},gpt4_32k:{messageCharacters:12e3,responseTokens:4e3,fileContextCharacters:6e4,maxTotalTokens:32e3}},d={"codechat-bison":f.defaultLimit,"text-davinci-003":f.defaultLimit,"gpt-3.5-turbo":f.defaultLimit,"gpt-3.5-turbo-0613":f.defaultLimit,"gpt-3.5-turbo-0301":f.defaultLimit,"gpt-3.5-turbo-16k-0613":f.gpt35,"gpt-3.5-turbo-1106":f.gpt35,"gpt-4":f.gpt4,"gpt-4-0613":f.gpt4,"gpt-4-32k":f.gpt4_32k,"gpt-4-32k-0613":f.gpt4_32k,"gpt-4-1106-preview":{messageCharacters:12e3,responseTokens:4e3,fileContextCharacters:6e4,maxTotalTokens:32e3}};function p(e){return d[e]}var h={model:"gpt-4-1106-preview",weeklyTokenLimit:621e3},v=l.LD.anyOf.map(function(e){return e.const}),g=l.t3.const,m=(0,o._)(v).concat([g])},13090:function(e,n,t){t.d(n,{BP:function(){return o},BY:function(){return i},U4:function(){return r.U4},Vh:function(){return a},fF:function(){return r.fF},tr:function(){return r.tr}});var r=t(16385);function i(e){var n;if(!e)throw Error("Expected baseUrl");try{n=new URL(e)}catch(e){throw Error("baseUrl failed to parse as URL")}if("https:"!==n.protocol)throw Error("baseUrl must use https");return n.href.replace(/\/$/,"")}function o(e){return a(e,"extension.json")}function a(e,n){var t=i(e);return new URL(n,t).href}},16385:function(e,n,t){t.d(n,{MU:function(){return C},U4:function(){return k},fF:function(){return T},tr:function(){return E}});var r=t(32477),i=t(92809),o=t(36617),a=t(80290),u=t.n(a),l=t(94998),c=t(61314),s=t.n(c),f=t(10602),d=t.n(f),p=t(34471),h=i.Type.String({minLength:1,maxLength:64}),v=i.Type.Object({path:i.Type.String({minLength:1}),label:i.Type.String({minLength:1})}),g=i.Type.Object({image:(0,p.K5)(i.Type.String({minLength:1})),title:i.Type.String({minLength:1,maxLength:60}),body:i.Type.String({minLength:1,maxLength:512})}),m=i.Type.Object({glob:i.Type.String({minLength:1}),handler:i.Type.String({minLength:1}),name:(0,p.K5)(i.Type.String({minLength:1})),icon:(0,p.K5)(i.Type.String({minLength:1}))}),y=i.Type.Object({handler:i.Type.String({minLength:1}),name:(0,p.K5)(i.Type.String({minLength:1})),icon:(0,p.K5)(i.Type.String({minLength:1}))}),b=i.Type.Union(l.l.map(function(e){return i.Type.Literal(e)})),w=i.Type.Object({name:b,reason:i.Type.String()}),x=i.Type.Object({page:i.Type.String()}),S=i.Type.Object({name:i.Type.String({minLength:1,maxLength:60}),description:i.Type.String({minLength:1,maxLength:255}),scopes:(0,p.K5)(i.Type.Array(w)),longDescription:(0,p.K5)(i.Type.String({minLength:1})),icon:(0,p.K5)(i.Type.String({minLength:1})),tags:(0,p.K5)(i.Type.Array(h,{maxItems:16})),coverImages:(0,p.K5)(i.Type.Array(v,{maxItems:16})),fileHandlers:(0,p.K5)(i.Type.Array(m,{maxItems:4})),tools:(0,p.K5)(i.Type.Array(y,{maxItems:4})),website:(0,p.K5)(i.Type.String()),authorEmail:(0,p.K5)(i.Type.String()),background:(0,p.K5)(x),features:(0,p.K5)(i.Type.Array(g,{minItems:1,maxItems:10}))});function k(e){var n=function(n,t,r){return{manifest:null,error:new p.Jg([{type:t,schema:S,path:n,value:e,message:r}])}};if(o.B4.Check(S,e)){if(e.website&&!s()(e.website))return n("website",o.B0.StringFormat,"website must be a valid url");if(e.authorEmail&&!d()(e.authorEmail))return n("authorEmail",o.B0.StringFormat,"authorEmail must be a valid email");var t=null!==(c=e.fileHandlers)&&void 0!==c?c:[],i=!0,a=!1,l=void 0;try{for(var c,f,h=t.entries()[Symbol.iterator]();!(i=(f=h.next()).done);i=!0){var v=(0,r._)(f.value,2),g=v[0],m=v[1];if(!u()(m.glob))return n("fileHandlers[".concat(g,"].glob"),o.B0.StringFormat,"glob must be a valid glob pattern")}}catch(e){a=!0,l=e}finally{try{i||null==h.return||h.return()}finally{if(a)throw l}}if(t&&t.length>1){var y=!0,b=!1,w=void 0;try{for(var x,k=t.entries()[Symbol.iterator]();!(y=(x=k.next()).done);y=!0){var E=(0,r._)(x.value,2),T=E[0],C=E[1];if(!(C.icon&&C.name))return n("fileHandlers[".concat(T,"]"),o.B0.ObjectRequiredProperty,"When at least two fileHandlers are provided, they must all specify a name and icon")}}catch(e){b=!0,w=e}finally{try{y||null==k.return||k.return()}finally{if(b)throw w}}}var R=null!==(_=e.tools)&&void 0!==_?_:[];if(R&&R.length>1){var Z=!0,D=!1,P=void 0;try{for(var _,I,A=R.entries()[Symbol.iterator]();!(Z=(I=A.next()).done);Z=!0){var L=(0,r._)(I.value,2),N=L[0],O=L[1];if(!(O.icon&&O.name))return n("tool[".concat(N,"]"),o.B0.ObjectRequiredProperty,"When at least two tools are provided, they must all specify a name and icon")}}catch(e){D=!0,P=e}finally{try{Z||null==A.return||A.return()}finally{if(D)throw P}}}return{manifest:e,error:null}}return{manifest:null,error:(0,p.ZA)(S,e)}}function E(e){var n=k(e);if(n.manifest)return n.manifest;throw n.error}function T(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:null!==(e=t.name)&&void 0!==e?e:"Unnamed Extension",description:null!==(n=t.description)&&void 0!==n?n:"(no description)"}}function C(e,n){return!!e.scopes&&void 0!==e.scopes.find(function(e){return e.name===n})}},94998:function(e,n,t){t.d(n,{k:function(){return r},l:function(){return i}});var r=[{key:"read",friendlyName:"Read files",description:"Read any file in your Repl"},{key:"write-exec",friendlyName:"Write & Execute",description:"Write to any file in your Repl and execute any code"},{key:"repldb:read",friendlyName:"ReplDB Read",description:"Read any key, or list all keys under any prefix in the repldb belonging to your Repl"},{key:"repldb:write",friendlyName:"ReplDB Write",description:"Write or delete any key in the repldb belonging to your Repl"},{key:"experimental-api",friendlyName:"Experimental APIs",description:"Use experimental APIs that may be unstable, change in behavior, or be removed entirely"}],i=r.map(function(e){return e.key})},30671:function(e,n,t){t.d(n,{GK:function(){return c},Rg:function(){return p},nO:function(){return f}});var r=t(34142),i=t(87682),o=t(69953),a=t(10653),u=t(94048),l=o.g.getTracer("repl.it-web");function c(e,n){return s.apply(this,arguments)}function s(){return(s=(0,r._)(function(e,n){return(0,i.Jh)(this,function(t){switch(t.label){case 0:return[4,f(a.D.active(),e,n)];case 1:return[2,t.sent()]}})})).apply(this,arguments)}function f(e,n,t){return d.apply(this,arguments)}function d(){return(d=(0,r._)(function(e,n,t){var r,a;return(0,i.Jh)(this,function(i){switch(i.label){case 0:r=l.startSpan(n,void 0,e),a=o.g.setSpan(e,r),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,t(a)];case 2:return[2,i.sent()];case 3:throw i.sent();case 4:return r.end(),[7];case 5:return[2]}})})).apply(this,arguments)}function p(e){var n={};return new u.jf().inject(e,n,{set:function(e,n,t){e[n]=t}}),n}},78037:function(e,n,t){function r(e,n){return{ok:!1,error:e,errorExtras:n}}function i(e){return{ok:!0,value:e}}t.d(n,{Ok:function(){return i},U:function(){return r}}),n.Z={Ok:i,Err:r}},37685:function(e,n,t){t.d(n,{MF:function(){return l},TI:function(){return u},lv:function(){return f},uC:function(){return c},yb:function(){return s}});var r=t(39426),i=t(39756),o=t(43778),a=t(93711);function u(e){var n=(0,a.nV)(e)[1];return!!n&&(n===i.oh||n===i.AS)}function l(e){return".env"===e.toString()||".breakpoints"===e.toString()||".cache"===e.toString()||(0,a.X2)((0,a.S1)(".cache"),e)}function c(e){return o.nh.includes(e.toString())}function s(e,n){return!!(n&&r.ZP.isLangFileBinary(n,e.toString()))}function f(e,n){if(!n)return!1;var t=(0,a.nV)(e).slice(1),r=!0,i=!1,o=void 0;try{for(var u,l=n[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var c=u.value,s=!0,f=!1,d=void 0;try{for(var p,h=t[Symbol.iterator]();!(s=(p=h.next()).done);s=!0)if(p.value.toString().match(c))return!0}catch(e){f=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(f)throw d}}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return!1}},53941:function(e,n,t){t.d(n,{Y:function(){return o}});var r=t(34142),i=t(87682);function o(e){return a.apply(this,arguments)}function a(){return(a=(0,r._)(function(e){var n,t;return(0,i.Jh)(this,function(r){return n=e.container,t=e.service,[2,new Promise(function(e){var r=n.openChannel({service:t},function(n){return e([n.channel,r]),r})})]})})).apply(this,arguments)}},90487:function(e,n,t){t.d(n,{Z:function(){return v}});var r,i,o=t(34142),a=t(32477),u=t(87682),l=t(58962),c=t(48900),s=t(83493),f=t(78037),d=t(53941);(r=i||(i={})).OUTPUT="OUTPUT",r.ERROR="ERROR",r.STATE_CHANGED="STATE_CHANGED",r.CHANNEL_OPENED="CHANNEL_OPENED";var p=t(30671),h=t(67795);function v(e){var n=e.container,t=e.forceTrace,r=e.track,v=(0,s.ZP)(),g=new Map;function m(e){var n=g.get(e);return n||(n={packagerChannel:null,didCallOpenChannel:!1,closeChannel:null},g.set(e,n)),n}function y(e){return b.apply(this,arguments)}function b(){return(b=(0,o._)(function(e){var t,r,i,o,l=arguments;return(0,u.Jh)(this,function(u){switch(u.label){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:0,[4,(0,d.Y)({container:n,service:"packager3"})];case 1:if(i=(r=a._.apply(void 0,[u.sent(),2]))[0],o=r[1],!e)return[3,3];return[4,i.request({packageSetPackagerRequest:{packagerId:e}})];case 2:u.sent(),u.label=3;case 3:if("open"!==i.status){if(t>5)throw Error("Failed to getAnonymousPackagerChannel");return[2,y(e,t+1)]}return[2,[i,o]]}})})).apply(this,arguments)}function w(e){return x.apply(this,arguments)}function x(){return(x=(0,o._)(function(e){var t;return(0,u.Jh)(this,function(r){return((t=m(e)).didCallOpenChannel||function(e){var t=m(e);if(t.didCallOpenChannel)throw Error("Already called open channel");t.didCallOpenChannel=!0,t.closeChannel=n.openChannel({service:"packager3",name:e||"packager",action:l.api.OpenChannel.Action.ATTACH_OR_CREATE},function(n){var r=n.channel;return r.onCommand(function(n){if(null!=n.state){var t=n.state===l.api.State.Running;v.emit(i.STATE_CHANGED,t,e)}else null!=n.output?v.emit(i.OUTPUT,n.output,e):null!=n.error&&v.emit(i.ERROR,n.error,e)}),e?r.request({packageSetPackagerRequest:{packagerId:e}}).then(function(){t.packagerChannel=r,v.emit(i.CHANNEL_OPENED,r,e)}):(t.packagerChannel=r,v.emit(i.CHANNEL_OPENED,r,e)),function(){t.packagerChannel=null}})}(e),t.packagerChannel&&"open"===t.packagerChannel.status)?[2,t.packagerChannel]:[2,new Promise(function(n){v.once(i.CHANNEL_OPENED,function(t,r){r===e&&n(t)})})]})})).apply(this,arguments)}return{addPackages:function(e,n){return(0,o._)(function(){var t,i,o,a;return(0,u.Jh)(this,function(u){switch(u.label){case 0:return[4,w(n)];case 1:if("open"!==(i=u.sent()).status)return[2,!1];return o=e.map(function(e){return{name:e.name,spec:e.version}}),[4,i.request({packageAdd:{pkgs:o,useNewResponse:!0}})];case 2:if((a=u.sent()).channelClosed||a.error)return[2,!1];return(null===(t=a.packageAddResponse)||void 0===t?void 0:t.installedSystemDependencies)&&r&&r(h.U3.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:n}),[2,!0]}})})()},removePackages:function(e,n){return(0,o._)(function(){var t,r,i;return(0,u.Jh)(this,function(o){switch(o.label){case 0:return[4,w(n)];case 1:if("open"!==(t=o.sent()).status)return[2,!1];return r=e.map(function(e){return{name:e}}),[4,t.request({packageRemove:{pkgs:r}})];case 2:if((i=o.sent()).channelClosed)return[2,!1];return[2,!!i.ok]}})})()},searchPackages:function(e,n){return(0,o._)(function(){var t,r,i,o;return(0,u.Jh)(this,function(u){switch(u.label){case 0:return[4,y(n)];case 1:return r=(t=a._.apply(void 0,[u.sent(),2]))[0],i=t[1],[4,r.request({packageSearch:{query:e}})];case 2:if((o=u.sent()).channelClosed)return[2,[]];if(i(),"packageSearchResp"===o.body&&o.packageSearchResp)return[2,o.packageSearchResp.results||[]];return c.Tb(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageSearchResp. Received error: ".concat(o.error))),[2,[]]}})})()},fetchPackageInfo:function(e,n){return(0,o._)(function(){var t,r,i,o;return(0,u.Jh)(this,function(u){switch(u.label){case 0:return[4,y(n)];case 1:return r=(t=a._.apply(void 0,[u.sent(),2]))[0],i=t[1],[4,r.request({packageInfo:{pkg:{name:e}}})];case 2:if((o=u.sent()).channelClosed)return[2,void 0];if(i(),"packageInfoResp"===o.body&&o.packageInfoResp)return[2,o.packageInfoResp.pkg||void 0];return c.Tb(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageInfoResp. Received error: ".concat(o.error))),[2,void 0]}})})()},installPackages:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,o._)(function(){return(0,u.Jh)(this,function(a){var l;return[2,(0,p.nO)(e,"packager.installPackages",(l=(0,o._)(function(e){var o,a,l;return(0,u.Jh)(this,function(u){switch(u.label){case 0:return[4,w(n)];case 1:if("open"!==(o=u.sent()).status)return[2,(0,f.U)("ChannelClosed")];return[4,o.request({packageInstall:{useNewResponse:!0,disableGuess:i},traceInfo:(0,p.Rg)(e),forceTrace:t})];case 2:if((a=u.sent()).error)return[2,(0,f.U)(a.error)];if(a.channelClosed)return[2,(0,f.U)("ChannelClosed")];if(!(l=a.packageInstallResponse))return[2,(0,f.U)("No package install response found")];return l.installedSystemDependencies&&r&&r(h.U3.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:n}),[2,(0,f.Ok)(l)]}})}),function(e){return l.apply(this,arguments)}))]})})()},listSpecfile:function(e){return(0,o._)(function(){var n,t,r,i,o,l,s;return(0,u.Jh)(this,function(u){switch(u.label){case 0:return[4,y(e)];case 1:return t=(n=a._.apply(void 0,[u.sent(),2]))[0],r=n[1],[4,t.request({packageListSpecfile:{}})];case 2:if((i=u.sent()).channelClosed)return[2,{packages:null,error:"channel closed"}];switch(r(),i.body){case"error":return[2,{packages:null,error:"list specfile failed: ".concat(i.error)}];case"packageListSpecfileResp":if(!(l=null===(o=i.packageListSpecfileResp)||void 0===o?void 0:o.pkgs))return[2,{packages:null,error:"list specfile returned an empty response"}];return[2,{packages:l,error:null}];default:return s="Unknown packager3 listSpecFile command ".concat(i.body,". ")+"Expected error or packageListSpecfileResp",c.Tb(Error(s)),[2,{packages:null,error:s}]}return[2]}})})()},getPackagerIds:function(){return Array.from(g.keys())},clearPackager:function(e){var n=g.get(e);(null==n?void 0:n.closeChannel)&&n.closeChannel(),g.delete(e)},onOutput:function(e){return v.on(i.OUTPUT,e),function(){v.removeListener(i.OUTPUT,e)}},onError:function(e){return v.on(i.ERROR,e),function(){v.removeListener(i.ERROR,e)}},onStateChanged:function(e){return v.on(i.STATE_CHANGED,e),function(){v.removeListener(i.STATE_CHANGED,e)}}}}},23015:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(34142),i=t(87682),o=t(59173),a=t(59808);function u(e){var n=e.container,t=e.dotReplit,u=(0,o.u)(null),l=(0,o.u)(null),c=(0,o.u)(null);function s(){return c.current?Promise.resolve(c.current):new Promise(function(e){var n=c.subscribe(function(t){t&&(n(),e(t))})})}return n.openChannel({service:"toolchain"},function(e){var n=e.channel;c.set(n);var t=n.onCommand(function(e){e.toolchainChanged?u.current=e.toolchainChanged.configs:e.nixModulesChanged&&(l.current=e.nixModulesChanged.modules)});return n.request({toolchainGetRequest:{}}).then(function(e){var n;u.current=(null===(n=e.toolchainGetResponse)||void 0===n?void 0:n.configs)||null}),n.request({nixModulesGetRequest:{}}).then(function(e){var n;l.current=(null===(n=e.nixModulesGetResponse)||void 0===n?void 0:n.modules)||null}),function(){t()}}),{configs:u,modules:l,getConfigs:function(){return u.current?Promise.resolve(u.current):new Promise(function(e){var n=u.subscribe(function(t){if(n(),null===t)throw Error("Returned toolchain config should not be null");e(t)})})},getRegistry:function(){return(0,r._)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:return[4,s()];case 1:return[4,e.sent().request({nixModulesGetRegistryRequest:{}})];case 2:return[2,e.sent().nixModulesGetRegistryResponse||null]}})})()},addModule:function(e){return(0,r._)(function(){var n,r,o;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return r=[],[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.Yt.NotFound)throw Error("Failed to read .replit"+o.error);if(-1!==(r=(null===(n=o.config)||void 0===n?void 0:n.modules)||[]).indexOf(e))return[3,3];return r.push(e),[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(r)}])];case 2:i.sent(),i.label=3;case 3:return[2]}})})()},removeModule:function(e){return(0,r._)(function(){var n,r,o,u;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return r=[],[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.Yt.NotFound)throw Error("Failed to read .replit"+o.error);if((u=(r=(null===(n=o.config)||void 0===n?void 0:n.modules)||[]).filter(function(n){if(e===n)return!1;var t=n.match(/^(.+)\.nix$/);return(t&&t[1])!==e})).length===r.length)return[2];return[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(u)}])];case 2:return i.sent(),[2]}})})()},upgradeModule:function(e,n){return(0,r._)(function(){var r,o,u;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.Yt.NotFound)throw Error("Failed to read .replit"+o.error);return u=((null===(r=o.config)||void 0===r?void 0:r.modules)||[]).map(function(t){return e===t?n:t}),[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(u)}])];case 2:return i.sent(),[2]}})})()},buildModules:function(){return(0,r._)(function(){var e,n;return(0,i.Jh)(this,function(t){switch(t.label){case 0:return e=this,[4,s()];case 1:return n=t.sent(),[2,new Promise(function(t){var r=e.configs.subscribe(function(e){e&&(r(),t(void 0))});n.send({nixModulesBuildRequest:{}})})]}})}).apply(this)}}}},34471:function(e,n,t){t.d(n,{Jg:function(){return v},K5:function(){return h},ZA:function(){return g}});var r=t(23026),i=t(3194),o=t(21289),a=t(92635),u=t(2543),l=t(92809),c=t(36617),s=t(31345),f=t.n(s),d=t(90390),p=t.n(d);l.FormatRegistry.Set("uuid",function(e){return f()(e)}),l.FormatRegistry.Set("date-time",function(e){return p()(e)});var h=function(e){return l.Type.Optional(l.Type.Union([l.Type.Null(),e]))},v=function(e){"use strict";(0,i._)(t,e);var n=(0,u._)(t);function t(e){var i;return(0,r._)(this,t),(i=n.call(this)).name="Schema validation error",i.message=e.map(function(e){return"".concat(e.path,": ").concat(e.message)}).join("\n"),i.issues=e,i}return t}((0,a._)(Error));function g(e,n){return new v((0,o._)(c.B4.Errors(e,n)))}}}]);
//# sourceMappingURL=8709-c5309a7bb9e663a1.js.map